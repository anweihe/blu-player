import{d as J}from"./chunk-KFW5HDWR.js";import"./chunk-NX6VWMXW.js";import"./chunk-OCLKLVYL.js";import"./chunk-VWKT4AXU.js";import"./chunk-IFTFUA44.js";import{e as G,f as Q,k as Z,l as I}from"./chunk-Y2DN57ZN.js";import{Ab as _,Bb as d,Cb as V,Db as v,Ga as O,Ja as a,Kb as $,N as D,Nb as j,S as u,Va as R,X as x,Y as b,Z as m,_ as F,_b as A,db as f,dc as N,eb as g,fb as E,gb as h,hb as y,ia as S,ib as q,j as z,jb as r,kb as n,lb as c,o as U,pb as w,rb as H,tb as s,y as B,yb as L}from"./chunk-AT7XICDW.js";var P=class i{http=u(N);auth=u(I);getHistory(){let e=this.auth.getProfileId();return e?this.http.get(`/Qobuz?handler=History&profileId=${encodeURIComponent(e)}`).pipe(U(t=>this.transformToSections(t)),B(()=>z([]))):z([])}transformToSections(e){let t=[];return e.qobuzPlaylists?.length>0&&t.push({title:"Zuletzt geh\xF6rt - Playlists",iconType:"qobuz",items:e.qobuzPlaylists.map(o=>this.transformPlaylist(o))}),e.qobuzAlbums?.length>0&&t.push({title:"Zuletzt geh\xF6rt - Alben",iconType:"qobuz",items:e.qobuzAlbums.map(o=>this.transformAlbum(o))}),e.tuneIn?.length>0&&t.push({title:"Zuletzt geh\xF6rt - Radio",iconType:"tunein",items:e.tuneIn.map(o=>this.transformTuneIn(o))}),e.radioParadise?.length>0&&t.push({title:"Zuletzt geh\xF6rt - Radio Paradise",iconType:"radioparadise",items:e.radioParadise.map(o=>this.transformRadioParadise(o))}),t}transformPlaylist(e){return{id:e.id,title:e.playlistName,imageUrl:e.coverUrl,type:"playlist",actionId:e.playlistId}}transformAlbum(e){return{id:e.id,title:e.albumName,subtitle:e.artist,imageUrl:e.coverUrl,type:"album",actionId:e.albumId}}transformTuneIn(e){return{id:e.id,title:e.title,imageUrl:e.imageUrl,type:"tunein",actionUrl:e.actionUrl}}transformRadioParadise(e){return{id:e.id,title:e.title,subtitle:e.quality,imageUrl:e.imageUrl,type:"radioparadise",actionUrl:e.actionUrl}}addAlbumToHistory(e,t,o,l){let p=this.auth.getProfileId();if(!p)return;let k=`history_albums_${p}`,C=this.getLocalHistory(k).filter(K=>K.albumId!==e);C.unshift({id:`album_${e}_${Date.now()}`,albumId:e,albumName:t,artist:o,coverUrl:l,type:"album"});let M=C.slice(0,20);localStorage.setItem(k,JSON.stringify(M))}addPlaylistToHistory(e,t,o){let l=this.auth.getProfileId();if(!l)return;let p=`history_playlists_${l}`,T=this.getLocalHistory(p).filter(M=>M.playlistId!==e);T.unshift({id:`playlist_${e}_${Date.now()}`,playlistId:e,playlistName:t,coverUrl:o,type:"playlist"});let C=T.slice(0,20);localStorage.setItem(p,JSON.stringify(C))}getLocalHistory(e){try{let t=localStorage.getItem(e);return t?JSON.parse(t):[]}catch{return[]}}static \u0275fac=function(t){return new(t||i)};static \u0275prov=D({token:i,factory:i.\u0275fac,providedIn:"root"})};var ee=()=>[1,2],te=()=>[1,2,3,4],W=(i,e)=>e.id,ie=(i,e)=>e.title;function oe(i,e){if(i&1){let t=w();r(0,"button",22),H("click",function(){x(t);let l=s();return b(l.openProfileSwitcher())}),d(1),n()}if(i&2){let t=s();L("background-color",t.profileService.activeProfile()?t.profileService.getProfileColor(t.profileService.activeProfile().id):"var(--color-accent-qobuz)"),a(),v(" ",t.profileInitial()," ")}}function re(i,e){if(i&1){let t=w();r(0,"app-profile-switcher",23),H("closed",function(){x(t);let l=s();return b(l.closeProfileSwitcher())})("profileSelected",function(l){x(t);let p=s();return b(p.onProfileSelected(l))}),n()}}function ne(i,e){if(i&1&&(m(),r(0,"svg",30),c(1,"circle",31)(2,"circle",32),n()),i&2){let t=s().$implicit;_(t.colorClass)}}function ae(i,e){if(i&1&&(m(),r(0,"svg",33),c(1,"circle",34)(2,"path",35)(3,"path",36)(4,"circle",37),n()),i&2){let t=s().$implicit;_(t.colorClass)}}function le(i,e){if(i&1&&(m(),r(0,"svg",33),c(1,"path",38)(2,"path",39)(3,"path",40),n()),i&2){let t=s().$implicit;_(t.colorClass)}}function se(i,e){if(i&1&&(r(0,"a",24)(1,"div",25),f(2,ne,3,2,":svg:svg",26)(3,ae,5,2,":svg:svg",27)(4,le,4,2,":svg:svg",27),n(),r(5,"span",28),d(6),n(),r(7,"span",29),d(8),n()()),i&2){let t,o=e.$implicit;_("hover:border-"+o.hoverBorderClass),q("routerLink",o.route),a(),_(o.bgClass),a(),g((t=o.id)==="qobuz"?2:t==="tunein"?3:t==="radioparadise"?4:-1),a(4),V(o.name),a(2),V(o.description)}}function ce(i,e){i&1&&(r(0,"div",44),c(1,"div",45)(2,"div",46),n())}function de(i,e){i&1&&(r(0,"div",41),c(1,"div",42),r(2,"div",43),h(3,ce,3,0,"div",44,E),n()()),i&2&&(a(3),y($(0,te)))}function me(i,e){i&1&&(r(0,"div",16),h(1,de,5,1,"div",41,E),n()),i&2&&(a(),y($(0,ee)))}function pe(i,e){if(i&1&&c(0,"img",53),i&2){let t=s().$implicit;q("src",t.imageUrl,O)("alt",t.title)}}function ue(i,e){i&1&&(m(),c(0,"circle",5)(1,"path",59)(2,"circle",60))}function fe(i,e){i&1&&(m(),c(0,"path",61)(1,"path",62)(2,"path",63))}function ge(i,e){i&1&&(m(),c(0,"path",64)(1,"circle",65)(2,"circle",66))}function _e(i,e){if(i&1&&(r(0,"div",57),m(),r(1,"svg",58),f(2,ue,3,0)(3,fe,3,0)(4,ge,3,0),n()()),i&2){let t,o=s(2).$implicit,l=s(2);_(l.getPlaceholderClass(o.iconType)),a(2),g((t=o.iconType)==="tunein"?2:t==="radioparadise"?3:4)}}function he(i,e){if(i&1&&(r(0,"span",56),d(1),n()),i&2){let t=s().$implicit;a(),v(" ",t.subtitle," ")}}function ye(i,e){if(i&1){let t=w();r(0,"button",52),H("click",function(){let l=x(t).$implicit,p=s(3);return b(p.playFromHistory(l))}),f(1,pe,1,2,"img",53)(2,_e,5,3,"div",54),r(3,"span",55),d(4),n(),f(5,he,2,1,"span",56),n()}if(i&2){let t=e.$implicit;a(),g(t.imageUrl?1:2),a(3),v(" ",t.title," "),a(),g(t.subtitle?5:-1)}}function xe(i,e){if(i&1&&(r(0,"section",48)(1,"h3",49),d(2),c(3,"span",50),n(),r(4,"div",43),h(5,ye,6,3,"button",51,W),n()()),i&2){let t=e.$implicit,o=e.$index;L("animation-delay",o*50,"ms"),a(2),v(" ",t.title," "),a(3),y(t.items)}}function be(i,e){if(i&1&&(r(0,"div",16),h(1,xe,7,3,"section",47,ie),n()),i&2){let t=s();a(),y(t.historySections())}}var Y=class i{auth=u(I);historyService=u(P);router=u(G);isLoading=S(!0);historySections=S([]);sources=[{id:"qobuz",name:"Qobuz",description:"Hi-Res Streaming",route:"/qobuz",colorClass:"text-accent-qobuz",bgClass:"bg-accent-qobuz/15",hoverBorderClass:"accent-qobuz"},{id:"tunein",name:"TuneIn",description:"Internet Radio",route:"/tunein",colorClass:"text-orange-500",bgClass:"bg-orange-500/15",hoverBorderClass:"orange-500"},{id:"radioparadise",name:"Radio Paradise",description:"Eclectic Mix",route:"/radioparadise",colorClass:"text-emerald-500",bgClass:"bg-emerald-500/15",hoverBorderClass:"emerald-500"}];profileService=u(Z);showProfileSwitcher=S(!1);profileInitial=j(()=>{let e=this.profileService.activeProfile();return e?this.profileService.getProfileInitial(e.name):this.auth.userInitial()});openProfileSwitcher(){this.showProfileSwitcher.set(!0)}closeProfileSwitcher(){this.showProfileSwitcher.set(!1)}onProfileSelected(e){this.profileService.setActiveProfileId(e.id),this.closeProfileSwitcher(),this.loadHistory()}ngOnInit(){this.loadHistory()}loadHistory(){this.isLoading.set(!0),this.historyService.getHistory().subscribe({next:e=>{this.historySections.set(e),this.isLoading.set(!1)},error:()=>{this.isLoading.set(!1)}})}toggleMenu(){}getPlaceholderClass(e){switch(e){case"tunein":return"bg-gradient-to-br from-orange-500/15 to-orange-500/5 text-orange-500";case"radioparadise":return"bg-gradient-to-br from-emerald-500/15 to-emerald-500/5 text-emerald-500";default:return"bg-gradient-to-br from-accent-qobuz/15 to-accent-qobuz/5 text-accent-qobuz"}}playFromHistory(e){switch(e.type){case"album":this.router.navigate(["/qobuz/album",e.actionId]);break;case"playlist":this.router.navigate(["/qobuz/playlist",e.actionId]);break;case"tunein":this.router.navigate(["/tunein"]);break;case"radioparadise":this.router.navigate(["/radioparadise"]);break}}static \u0275fac=function(t){return new(t||i)};static \u0275cmp=R({type:i,selectors:[["app-home"]],decls:31,vars:3,consts:[[1,"min-h-screen","bg-bg-primary"],[1,"sticky","top-0","z-40","bg-bg-secondary","border-b","border-border-subtle","safe-area-top"],[1,"flex","items-center","justify-between","px-4","py-3.5","max-w-5xl","mx-auto"],[1,"flex","items-center","gap-2.5"],["viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2",1,"w-7","h-7","text-accent-qobuz"],["cx","12","cy","12","r","10"],["cx","12","cy","12","r","3"],["d","M12 2v4M12 18v4M2 12h4M18 12h4"],[1,"text-xl","font-semibold","tracking-tight"],[1,"w-9","h-9","rounded-full","text-white","flex","items-center","justify-center","text-sm","font-semibold","cursor-pointer","hover:ring-2","hover:ring-accent-qobuz/50","transition-all",3,"background-color"],[1,"px-4","py-8","max-w-xl","mx-auto","pb-28"],[1,"text-center","mb-6"],[1,"text-2xl","font-bold","tracking-tight","mb-1.5"],[1,"text-sm","text-text-secondary"],[1,"grid","grid-cols-2","sm:grid-cols-3","gap-2","mb-8"],[1,"source-card","flex","flex-col","items-center","gap-1.5","p-3","bg-bg-card","border","border-border-accent","rounded-xl","cursor-pointer","transition-all","hover:bg-bg-card-hover","hover:-translate-y-0.5",3,"routerLink","class"],[1,"space-y-6"],[1,"flex","justify-center","mt-8"],["routerLink","/players",1,"inline-flex","items-center","justify-center","gap-2","px-4","py-2","bg-bg-card","border","border-border-accent","rounded-full","text-text-secondary","text-xs","hover:bg-bg-card-hover","hover:text-text-primary","hover:border-white/20","transition-all"],["viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2",1,"w-4","h-4"],["x","4","y","4","width","16","height","16","rx","2"],["d","M12 9v-2M12 17v-2M9 12H7M17 12h-2"],[1,"w-9","h-9","rounded-full","text-white","flex","items-center","justify-center","text-sm","font-semibold","cursor-pointer","hover:ring-2","hover:ring-accent-qobuz/50","transition-all",3,"click"],[3,"closed","profileSelected"],[1,"source-card","flex","flex-col","items-center","gap-1.5","p-3","bg-bg-card","border","border-border-accent","rounded-xl","cursor-pointer","transition-all","hover:bg-bg-card-hover","hover:-translate-y-0.5",3,"routerLink"],[1,"w-10","h-10","rounded-full","flex","items-center","justify-center"],["viewBox","0 0 100 100","fill","currentColor",1,"w-5","h-5",3,"class"],["viewBox","0 0 100 100","fill","none","stroke","currentColor","stroke-width","5",1,"w-5","h-5",3,"class"],[1,"text-xs","font-semibold","text-text-primary"],[1,"text-[10px]","text-text-muted","hidden","sm:block"],["viewBox","0 0 100 100","fill","currentColor",1,"w-5","h-5"],["cx","50","cy","50","r","45","fill","none","stroke","currentColor","stroke-width","6"],["cx","50","cy","50","r","20"],["viewBox","0 0 100 100","fill","none","stroke","currentColor","stroke-width","5",1,"w-5","h-5"],["cx","50","cy","50","r","45"],["d","M30 50a20 20 0 0140 0","stroke-width","4"],["d","M20 50a30 30 0 0160 0","stroke-width","4"],["cx","50","cy","50","r","5","fill","currentColor"],["d","M50 10L10 35l40 25 40-25-40-25z"],["d","M10 65l40 25 40-25"],["d","M10 50l40 25 40-25"],[1,"animate-pulse"],[1,"h-4","w-40","bg-bg-secondary","rounded","mb-3"],[1,"grid","grid-cols-3","sm:grid-cols-4","md:grid-cols-5","gap-2.5"],[1,"flex","flex-col","items-center","gap-2"],[1,"w-14","h-14","sm:w-16","sm:h-16","bg-bg-secondary","rounded-lg"],[1,"h-3","w-12","bg-bg-secondary","rounded"],[1,"history-section",3,"animation-delay"],[1,"history-section"],[1,"flex","items-center","gap-2","text-xs","font-semibold","text-text-muted","uppercase","tracking-wide","mb-3"],[1,"flex-1","h-px","bg-border-subtle"],[1,"history-item","flex","flex-col","items-center","p-2.5","bg-bg-card","rounded-lg","hover:bg-bg-card-hover","transition-all","hover:scale-102","active:scale-98"],[1,"history-item","flex","flex-col","items-center","p-2.5","bg-bg-card","rounded-lg","hover:bg-bg-card-hover","transition-all","hover:scale-102","active:scale-98",3,"click"],["loading","lazy",1,"w-14","h-14","sm:w-16","sm:h-16","rounded-md","object-cover","bg-bg-secondary","shadow-sm","mb-2",3,"src","alt"],[1,"w-14","h-14","sm:w-16","sm:h-16","rounded-md","flex","items-center","justify-center","mb-2",3,"class"],[1,"text-xs","font-medium","text-text-primary","text-center","line-clamp-2","leading-tight"],[1,"text-[10px]","text-text-muted","text-center","truncate","w-full","mt-0.5"],[1,"w-14","h-14","sm:w-16","sm:h-16","rounded-md","flex","items-center","justify-center","mb-2"],["viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","1.5",1,"w-6","h-6"],["d","M8 12a4 4 0 018 0"],["cx","12","cy","12","r","1","fill","currentColor"],["d","M12 3L2 9l10 6 10-6-10-6z"],["d","M2 17l10 6 10-6"],["d","M2 13l10 6 10-6"],["d","M9 18V5l12-2v13"],["cx","6","cy","18","r","3"],["cx","18","cy","16","r","3"]],template:function(t,o){t&1&&(r(0,"div",0)(1,"header",1)(2,"div",2)(3,"div",3),m(),r(4,"svg",4),c(5,"circle",5)(6,"circle",6)(7,"path",7),n(),F(),r(8,"h1",8),d(9,"Bluesound"),n()(),f(10,oe,2,3,"button",9),n()(),f(11,re,1,0,"app-profile-switcher"),r(12,"main",10)(13,"div",11)(14,"h2",12),d(15,"Musik streamen"),n(),r(16,"p",13),d(17,"W\xE4hle eine Quelle um loszulegen"),n()(),r(18,"div",14),h(19,se,9,8,"a",15,W),n(),f(21,me,3,1,"div",16)(22,be,3,0,"div",16),r(23,"div",17)(24,"a",18),m(),r(25,"svg",19),c(26,"rect",20)(27,"circle",6)(28,"path",21),n(),F(),r(29,"span"),d(30,"Bluesound Players verwalten"),n()()()()()),t&2&&(a(10),g(o.auth.isLoggedIn()?10:-1),a(),g(o.showProfileSwitcher()?11:-1),a(8),y(o.sources),a(2),g(o.isLoading()?21:o.historySections().length>0?22:-1))},dependencies:[A,Q,J],styles:[".safe-area-top[_ngcontent-%COMP%]{padding-top:env(safe-area-inset-top,0)}.history-section[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeInUp .4s ease forwards;opacity:0}@keyframes _ngcontent-%COMP%_fadeInUp{0%{opacity:0;transform:translateY(12px)}to{opacity:1;transform:translateY(0)}}.line-clamp-2[_ngcontent-%COMP%]{display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical;overflow:hidden}.hover\\:scale-102[_ngcontent-%COMP%]:hover{transform:scale(1.02)}.active\\:scale-98[_ngcontent-%COMP%]:active{transform:scale(.98)}"]})};export{Y as HomeComponent};
