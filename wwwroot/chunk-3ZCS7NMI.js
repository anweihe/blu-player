import{b as $}from"./chunk-QC44KA67.js";import{a as q}from"./chunk-O66JSED4.js";import{a as H,d as B}from"./chunk-YHMOLQY4.js";import"./chunk-XHV6DCF3.js";import{e as Q,g as L}from"./chunk-NROGR6IW.js";import{f as N}from"./chunk-N35TVY3C.js";import{a as O}from"./chunk-GT7YEPYQ.js";import{$b as F,Bb as s,Cb as j,Db as b,Ga as D,Ja as r,Nb as A,S as v,Va as E,X as p,Y as u,Z as f,_ as g,db as x,eb as _,gb as z,hb as V,ia as P,ib as S,jb as l,kb as o,lb as m,pb as T,rb as y,tb as c,yb as I}from"./chunk-TWVQ6WYG.js";var R=(n,t)=>t.id;function U(n,t){n&1&&(l(0,"div",1),m(1,"div",4),o())}function W(n,t){if(n&1&&m(0,"div",36),n&2){let e=c(2);I("background-image","url("+e.coverImage()+")")}}function Z(n,t){if(n&1&&m(0,"img",11),n&2){let e,i=c(2);S("src",i.coverImage(),D)("alt",(e=i.playlist())==null?null:e.name)}}function J(n,t){n&1&&(l(0,"div",12),f(),l(1,"svg",37),m(2,"path",38),o()())}function K(n,t){if(n&1&&(l(0,"p",16),s(1),o()),n&2){let e,i=c(2);r(),b(" von ",(e=i.playlist())==null||e.owner==null?null:e.owner.name," ")}}function X(n,t){if(n&1&&(l(0,"span",18),s(1,"\u2022"),o(),l(2,"span"),s(3),o()),n&2){let e=c(2);r(3),b("Aktualisiert ",e.formatDate(e.playlist().updated_at))}}function Y(n,t){if(n&1&&(l(0,"p",19),s(1),o()),n&2){let e,i=c(2);r(),b(" ",(e=i.playlist())==null?null:e.description," ")}}function ee(n,t){if(n&1){let e=T();l(0,"app-track-item",39),y("play",function(){let a=p(e),h=a.$implicit,w=a.$index,k=c(2);return u(k.playTrack(h,w))})("menu",function(a){p(e);let h=c(2);return u(h.openTrackMenu(a))}),o()}if(n&2){let e=t.$implicit,i=t.$index,a=c(2);S("track",e)("trackNumber",i+1)("showNumber",!0)("showArt",!0)("showArtist",!0)("showAlbum",!0)("showQuality",a.isTrackHiRes(e))("showMenu",!0)("isPlaying",a.isTrackPlaying(e))}}function te(n,t){n&1&&(l(0,"div",35),f(),l(1,"svg",40),m(2,"path",41),o(),g(),l(3,"p"),s(4,"Diese Playlist enth\xE4lt keine Tracks"),o()())}function ie(n,t){if(n&1){let e=T();l(0,"div",5),x(1,W,1,2,"div",6),m(2,"div",7),l(3,"div",8)(4,"div",9)(5,"div",10),y("click",function(){p(e);let a=c();return u(a.coverImage()&&a.openFullCover())}),x(6,Z,1,2,"img",11)(7,J,3,0,"div",12),o(),l(8,"div",13)(9,"span",14),s(10," Playlist "),o(),l(11,"h1",15),s(12),o(),x(13,K,2,1,"p",16),l(14,"div",17)(15,"span"),s(16),o(),l(17,"span",18),s(18,"\u2022"),o(),l(19,"span"),s(20),o(),x(21,X,4,1),o(),x(22,Y,2,1,"p",19),l(23,"div",20)(24,"button",21),y("click",function(){p(e);let a=c();return u(a.playAll())}),f(),l(25,"svg",22),m(26,"path",23),o(),s(27," Abspielen "),o(),g(),l(28,"button",24),y("click",function(){p(e);let a=c();return u(a.shufflePlay())}),f(),l(29,"svg",25),m(30,"path",26),o()()()()()()(),g(),l(31,"div",27)(32,"div",28)(33,"span",29),s(34,"#"),o(),m(35,"span",30),l(36,"span",31),s(37,"Titel"),o(),l(38,"span",32),s(39,"Dauer"),o(),m(40,"span",33),o(),z(41,ee,1,9,"app-track-item",34,R),x(43,te,5,0,"div",35),o()}if(n&2){let e,i,a,h,w,k,M,C,d=c();r(),_(d.coverImage()?1:-1),r(5),_(d.coverImage()?6:7),r(6),b(" ",(e=d.playlist())==null?null:e.name," "),r(),_(!((i=d.playlist())==null||i.owner==null)&&i.owner.name?13:-1),r(3),b("",(a=d.playlist())==null?null:a.tracks_count," Tracks"),r(4),j(d.formatPlaylistDuration(((h=d.playlist())==null?null:h.duration)??0)),r(),_((w=d.playlist())!=null&&w.updated_at?21:-1),r(),_((k=d.playlist())!=null&&k.description?22:-1),r(19),V((M=d.playlist())==null||M.tracks==null?null:M.tracks.items),r(2),_(!((C=d.playlist())==null||C.tracks==null||C.tracks.items==null)&&C.tracks.items.length?-1:43)}}function ne(n,t){n&1&&(l(0,"div",2),f(),l(1,"svg",40),m(2,"path",42),o(),g(),l(3,"p"),s(4,"Playlist konnte nicht geladen werden"),o(),l(5,"button",43),s(6," Zur\xFCck zum Browser "),o()())}function le(n,t){if(n&1){let e=T();l(0,"div",44),y("click",function(){p(e);let a=c();return u(a.closeFullCover())}),l(1,"button",45),y("click",function(){p(e);let a=c();return u(a.closeFullCover())}),f(),l(2,"svg",46),m(3,"path",47),o()(),g(),l(4,"img",48),y("click",function(a){return p(e),u(a.stopPropagation())}),o()()}if(n&2){let e,i=c();r(4),S("src",i.coverImage(),D)("alt",(e=i.playlist())==null?null:e.name)}}var G=class n{id;qobuzApi=v(L);playerState=v(q);playbackService=v($);navState=v(O);contextMenu=v(H);loading=P(!0);playlist=P(null);showFullCover=P(!1);coverImage=A(()=>{let t=this.playlist();return t?t.images300?.[0]??t.images150?.[0]??t.images?.[0]:null});formatDuration=Q;ngOnInit(){document.querySelector("main")?.scrollTo(0,0),this.navState.enterDetailMode("/qobuz/browse","Playlist",{showPlayButton:!0,onPlayAll:()=>this.playAll()}),this.id&&this.loadPlaylist()}ngOnDestroy(){this.navState.exitDetailMode()}loadPlaylist(){let t=parseInt(this.id,10);this.qobuzApi.getPlaylist(t).subscribe({next:e=>{this.playlist.set(e),this.loading.set(!1)},error:()=>this.loading.set(!1)})}formatPlaylistDuration(t){let e=Math.floor(t/3600),i=Math.floor(t%3600/60);return e>0?`${e} Std. ${i} Min.`:`${i} Min.`}formatDate(t){return new Date(t*1e3).toLocaleDateString("de-DE",{day:"2-digit",month:"2-digit",year:"numeric"})}isTrackHiRes(t){return t.hires_streamable||t.hires||t.maximum_bit_depth!==void 0&&t.maximum_bit_depth>16}isTrackPlaying(t){let e=this.playerState.currentPlayingTrackId(),i=this.playerState.currentTrack();return(e===t.id||i?.id===t.id)&&this.playerState.isPlaying()}goBack(){window.history.back()}playAll(){let t=this.playlist(),e=t?.tracks?.items;t&&e?.length&&this.playbackService.playPlaylist(t,e,0)}shufflePlay(){let t=this.playlist(),e=t?.tracks?.items;if(t&&e?.length){let i=[...e].sort(()=>Math.random()-.5);this.playbackService.playPlaylist(t,i,0)}}playTrack(t,e){let i=this.playlist(),a=i?.tracks?.items;i&&a?.length&&this.playbackService.playPlaylist(i,a,e)}openTrackMenu(t){let i=(this.playlist()?.tracks?.items??[]).findIndex(a=>a.id===t.track.id);this.contextMenu.openTrackMenu(t.event,t.track,{onPlay:()=>this.playTrack(t.track,i>=0?i:0),onAddToQueue:()=>this.playbackService.addToQueue(t.track)})}openFullCover(){this.showFullCover.set(!0)}closeFullCover(){this.showFullCover.set(!1)}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=E({type:n,selectors:[["app-playlist-detail"]],inputs:{id:"id"},decls:5,vars:2,consts:[[1,"playlist-detail","bg-bg-primary","min-h-screen","pb-28"],[1,"flex","justify-center","items-center","h-64"],[1,"flex","flex-col","items-center","justify-center","h-64","text-text-muted"],[1,"fixed","inset-0","z-[200]","bg-black/95","flex","items-center","justify-center","cursor-zoom-out"],[1,"loading-spinner"],[1,"playlist-header","relative"],[1,"absolute","inset-0","bg-cover","bg-center","opacity-20","blur-2xl",3,"background-image"],[1,"absolute","inset-0","bg-gradient-to-b","from-transparent","via-bg-primary/50","to-bg-primary"],[1,"relative","p-4","sm:p-6","pt-4"],[1,"flex","gap-4","sm:gap-6","flex-col","md:flex-row"],[1,"playlist-cover","w-36","h-36","sm:w-48","sm:h-48","md:w-56","md:h-56","overflow-hidden","bg-bg-secondary","flex-shrink-0","mx-auto","md:mx-0","shadow-2xl","cursor-zoom-in",3,"click"],[1,"w-full","h-full","object-cover",3,"src","alt"],[1,"w-full","h-full","flex","items-center","justify-center","text-text-muted","bg-gradient-to-br","from-bg-secondary","to-bg-card"],[1,"playlist-meta","flex","flex-col","justify-center","text-center","md:text-left","flex-1","min-w-0"],[1,"text-xs","text-text-muted","uppercase","tracking-wider","mb-2"],[1,"text-xl","sm:text-2xl","md:text-3xl","font-bold","mb-2","line-clamp-2"],[1,"text-text-secondary"],[1,"flex","items-center","justify-center","md:justify-start","gap-2","mt-3","text-sm","text-text-muted","flex-wrap"],[1,"text-border-subtle"],[1,"text-sm","text-text-muted","mt-3","line-clamp-3"],[1,"flex","items-center","justify-center","md:justify-start","gap-3","mt-5"],[1,"flex","items-center","gap-2","px-6","py-2.5","bg-accent-qobuz","text-white","rounded-full","font-medium","hover:bg-accent-qobuz/90","transition-colors","shadow-lg",3,"click"],["xmlns","http://www.w3.org/2000/svg","fill","currentColor","viewBox","0 0 24 24",1,"w-5","h-5"],["d","M8 5v14l11-7z"],["title","Zuf\xE4llige Wiedergabe",1,"flex","items-center","gap-2","px-4","py-2.5","bg-bg-secondary","border","border-border-subtle","rounded-full","text-sm","hover:border-border-accent","transition-colors",3,"click"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor","stroke-width","2",1,"w-4","h-4"],["stroke-linecap","round","stroke-linejoin","round","d","M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"],[1,"tracks-list","px-4","md:px-6"],[1,"hidden","md:flex","items-center","gap-3","px-3","py-2","text-xs","text-text-muted","border-b","border-border-subtle","mb-2"],[1,"w-8","text-center"],[1,"w-10"],[1,"flex-1"],[1,"w-20","text-right"],[1,"w-8"],[3,"track","trackNumber","showNumber","showArt","showArtist","showAlbum","showQuality","showMenu","isPlaying"],[1,"flex","flex-col","items-center","justify-center","py-16","text-text-muted"],[1,"absolute","inset-0","bg-cover","bg-center","opacity-20","blur-2xl"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"w-16","h-16","opacity-30"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","1","d","M4 6h16M4 10h16M4 14h16M4 18h16"],[3,"play","menu","track","trackNumber","showNumber","showArt","showArtist","showAlbum","showQuality","showMenu","isPlaying"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"w-12","h-12","mb-4","opacity-50"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","1","d","M9 19V6l12-3v13M9 19c0 1.105-1.343 2-3 2s-3-.895-3-2 1.343-2 3-2 3 .895 3 2zm12-3c0 1.105-1.343 2-3 2s-3-.895-3-2 1.343-2 3-2 3 .895 3 2zM9 10l12-3"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","1","d","M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"],["routerLink","/qobuz/browse",1,"mt-4","px-4","py-2","bg-accent-qobuz","text-white","rounded-lg","hover:bg-accent-qobuz/90","transition-colors"],[1,"fixed","inset-0","z-[200]","bg-black/95","flex","items-center","justify-center","cursor-zoom-out",3,"click"],[1,"absolute","top-4","right-4","w-10","h-10","rounded-full","bg-white/10","text-white","flex","items-center","justify-center","hover:bg-white/20","transition-colors","safe-area-top","safe-area-right",3,"click"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor","stroke-width","2",1,"w-6","h-6"],["stroke-linecap","round","stroke-linejoin","round","d","M6 18L18 6M6 6l12 12"],[1,"max-w-[90vw]","max-h-[90vh]","object-contain","shadow-2xl",3,"click","src","alt"]],template:function(e,i){e&1&&(l(0,"div",0),x(1,U,2,0,"div",1)(2,ie,44,9)(3,ne,7,0,"div",2),x(4,le,5,2,"div",3),o()),e&2&&(r(),_(i.loading()?1:i.playlist()?2:3),r(3),_(i.showFullCover()?4:-1))},dependencies:[F,N,B],styles:[".loading-spinner[_ngcontent-%COMP%]{width:40px;height:40px;border:3px solid var(--color-border-accent);border-top-color:var(--color-accent-qobuz);border-radius:50%;animation:_ngcontent-%COMP%_spin .8s linear infinite}@keyframes _ngcontent-%COMP%_spin{to{transform:rotate(360deg)}}.line-clamp-2[_ngcontent-%COMP%]{display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical;overflow:hidden}.line-clamp-3[_ngcontent-%COMP%]{display:-webkit-box;-webkit-line-clamp:3;-webkit-box-orient:vertical;overflow:hidden}@media(max-width:380px){.playlist-cover[_ngcontent-%COMP%]{width:128px!important;height:128px!important}}.safe-area-top[_ngcontent-%COMP%]{padding-top:env(safe-area-inset-top,0)}"]})};export{G as PlaylistDetailComponent};
