import{a as d}from"./chunk-GWJHP5PM.js";import{l as h}from"./chunk-GYSMW3IL.js";import{$b as b,M as u,R as p,j as t,o,x as a}from"./chunk-63K3V35C.js";var m=class l{http=p(b);auth=p(h);playerState=p(d);apiBaseUrl="/api";qobuzApiUrl="/api/qobuz";getPlayers(){return this.http.get(`${this.apiBaseUrl}/players`).pipe(a(()=>t([])))}refreshPlayers(){return this.http.post(`${this.apiBaseUrl}/players/refresh`,{}).pipe(a(()=>t([])))}getSyncStatus(e){return this.http.get(`${this.apiBaseUrl}/player/${encodeURIComponent(e)}/sync`).pipe(a(()=>t(null)))}getStatus(e){return this.http.get(`${this.apiBaseUrl}/player/${encodeURIComponent(e)}/status`).pipe(a(()=>t(null)))}getQueue(e){return this.http.get(`${this.apiBaseUrl}/player/${encodeURIComponent(e)}/queue`).pipe(a(()=>t([])))}play(e){return this.http.post(`${this.apiBaseUrl}/player/${encodeURIComponent(e)}/play`,{}).pipe(o(()=>!0),a(()=>t(!1)))}pause(e){return this.http.post(`${this.apiBaseUrl}/player/${encodeURIComponent(e)}/pause`,{}).pipe(o(()=>!0),a(()=>t(!1)))}stop(e){return this.http.post(`${this.apiBaseUrl}/player/${encodeURIComponent(e)}/stop`,{}).pipe(o(()=>!0),a(()=>t(!1)))}skip(e){return this.http.post(`${this.apiBaseUrl}/player/${encodeURIComponent(e)}/skip`,{}).pipe(o(()=>!0),a(()=>t(!1)))}back(e){return this.http.post(`${this.apiBaseUrl}/player/${encodeURIComponent(e)}/back`,{}).pipe(o(()=>!0),a(()=>t(!1)))}seek(e,r){return this.http.post(`${this.apiBaseUrl}/player/${encodeURIComponent(e)}/seek`,{seconds:r}).pipe(o(()=>!0),a(()=>t(!1)))}setVolume(e,r){return this.http.post(`${this.apiBaseUrl}/player/${encodeURIComponent(e)}/volume`,{level:r}).pipe(o(()=>!0),a(()=>t(!1)))}setMute(e,r){return this.http.post(`${this.apiBaseUrl}/player/${encodeURIComponent(e)}/mute`,{mute:r}).pipe(o(()=>!0),a(()=>t(!1)))}playQobuzTrack(e,r,s){let n=this.auth.authToken(),y=this.playerState.streamingQuality();return n?this.http.post(`${this.qobuzApiUrl}/play-on-bluesound`,{ip:e,port:11e3,trackId:r,authToken:n,formatId:y,title:s?.title,artist:s?.performer?.name,album:s?.album?.title,imageUrl:s?.album?.image?.large}).pipe(o(i=>i.success),a(i=>(console.error("Failed to play track on Bluesound:",i),t(!1)))):(console.error("No auth token available for Qobuz playback"),t(!1))}playQobuzAlbum(e,r,s=0){return this.http.post(`${this.apiBaseUrl}/player/${encodeURIComponent(e)}/play-qobuz-album`,{albumId:r,startTrackIndex:s}).pipe(o(()=>!0),a(()=>t(!1)))}playQobuzPlaylist(e,r,s=0){return this.http.post(`${this.apiBaseUrl}/player/${encodeURIComponent(e)}/play-qobuz-playlist`,{playlistId:r,startTrackIndex:s}).pipe(o(()=>!0),a(()=>t(!1)))}addToQueue(e,r){return this.http.post(`${this.apiBaseUrl}/player/${encodeURIComponent(e)}/queue/add`,{trackId:r}).pipe(o(()=>!0),a(()=>t(!1)))}clearQueue(e){return this.http.post(`${this.apiBaseUrl}/player/${encodeURIComponent(e)}/queue/clear`,{}).pipe(o(()=>!0),a(()=>t(!1)))}playQueueItem(e,r){return this.http.post(`${this.apiBaseUrl}/player/${encodeURIComponent(e)}/queue/play`,{index:r}).pipe(o(()=>!0),a(()=>t(!1)))}removeQueueItem(e,r){return this.http.delete(`${this.apiBaseUrl}/player/${encodeURIComponent(e)}/queue/${r}`).pipe(o(()=>!0),a(()=>t(!1)))}createGroup(e,r){return this.http.post(`${this.apiBaseUrl}/player/${encodeURIComponent(e)}/group/create`,{slaveIps:r}).pipe(o(()=>!0),a(()=>t(!1)))}addToGroup(e,r){return this.http.post(`${this.apiBaseUrl}/player/${encodeURIComponent(e)}/group/add`,{slaveIp:r}).pipe(o(()=>!0),a(()=>t(!1)))}removeFromGroup(e,r){return this.http.post(`${this.apiBaseUrl}/player/${encodeURIComponent(e)}/group/remove`,{slaveIp:r}).pipe(o(()=>!0),a(()=>t(!1)))}leaveGroup(e){return this.http.post(`${this.apiBaseUrl}/player/${encodeURIComponent(e)}/group/leave`,{}).pipe(o(()=>!0),a(()=>t(!1)))}static \u0275fac=function(r){return new(r||l)};static \u0275prov=u({token:l,factory:l.\u0275fac,providedIn:"root"})};export{m as a};
