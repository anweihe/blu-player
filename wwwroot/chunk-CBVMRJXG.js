import{a as B}from"./chunk-LVEH3NFO.js";import{a as T}from"./chunk-IRN5XAR5.js";import{a as V}from"./chunk-A3MRUIW5.js";import{Bb as h,Ha as E,Ia as a,R as g,Ua as w,W as x,X as y,Xb as L,Y as m,Z as _,bb as p,cb as u,eb as C,fb as P,ha as S,kb as i,lb as o,mb as l,nb as v,ob as k,pb as M,qb as f,rb as c,xb as b,zb as d}from"./chunk-MM2V5YAY.js";var q=(n,t)=>t.id;function H(n,t){n&1&&(i(0,"div",15),m(),i(1,"svg",21),l(2,"path",23),o()())}function G(n,t){n&1&&(i(0,"div",16),l(1,"div",24),i(2,"span",25),d(3,"Bluesound Player"),o(),l(4,"div",24),o())}function N(n,t){n&1&&(i(0,"div",31),m(),i(1,"svg",21),l(2,"path",23),o()())}function D(n,t){if(n&1){let e=v();i(0,"button",8),f("click",function(){x(e);let s=c().$implicit,j=c(2);return y(j.selectPlayer(s))}),i(1,"div",9),m(),i(2,"svg",10),l(3,"path",27),o()(),_(),i(4,"div",28)(5,"p",29),d(6),o(),i(7,"p",30),d(8),o()(),p(9,N,3,0,"div",31),o()}if(n&2){let e=c().$implicit,r=c(2);b("bg-accent-qobuz/10",r.isSelected(e))("border-accent-qobuz",r.isSelected(e))("border-2",r.isSelected(e))("bg-bg-card",!r.isSelected(e))("hover:bg-bg-card-hover",!r.isSelected(e)),a(),b("bg-accent-qobuz",r.isSelected(e))("text-white",r.isSelected(e))("bg-bg-secondary",!r.isSelected(e))("text-text-muted",!r.isSelected(e)),a(4),b("text-accent-qobuz",r.isSelected(e)),a(),h(" ",e.name," "),a(2),h(" ",r.getPlayerSubtitle(e)," "),a(),u(r.isSelected(e)?9:-1)}}function A(n,t){if(n&1&&p(0,D,10,23,"button",26),n&2){let e=t.$implicit;u(e.isSecondaryStereoPairSpeaker?-1:0)}}function I(n,t){n&1&&(i(0,"div",17),m(),i(1,"svg",32),l(2,"path",33),o(),_(),i(3,"p",34),d(4,"Keine Player gefunden"),o(),i(5,"p",35),d(6,"Stellen Sie sicher, dass Ihre Bluesound Player eingeschaltet sind"),o()())}function O(n,t){n&1&&(i(0,"div",18),l(1,"div",36),i(2,"p",37),d(3,"Suche nach Playern..."),o()())}function $(n,t){if(n&1){let e=v();i(0,"div",0),f("click",function(){x(e);let s=c();return y(s.close())}),o(),i(1,"div",1)(2,"div",2)(3,"h2",3),d(4,"Wiedergabeger\xE4t"),o(),i(5,"button",4),f("click",function(){x(e);let s=c();return y(s.close())}),m(),i(6,"svg",5),l(7,"path",6),o()()(),_(),i(8,"div",7)(9,"button",8),f("click",function(){x(e);let s=c();return y(s.selectBrowser())}),i(10,"div",9),m(),i(11,"svg",10),l(12,"path",11),o()(),_(),i(13,"div",12)(14,"p",13),d(15," Dieser Browser "),o(),i(16,"p",14),d(17,"Wiedergabe auf diesem Ger\xE4t"),o()(),p(18,H,3,0,"div",15),o(),p(19,G,5,0,"div",16),C(20,A,1,1,null,null,q),p(22,I,7,0,"div",17),p(23,O,4,0,"div",18),o(),i(24,"div",19)(25,"button",20),f("click",function(){x(e);let s=c();return y(s.refreshPlayers())}),m(),i(26,"svg",21),l(27,"path",22),o(),d(28," Player aktualisieren "),o()()()}if(n&2){let e=c();a(9),b("bg-accent-qobuz/10",e.playerState.playerMode()==="browser")("border-accent-qobuz",e.playerState.playerMode()==="browser")("border-2",e.playerState.playerMode()==="browser")("bg-bg-card",e.playerState.playerMode()!=="browser")("hover:bg-bg-card-hover",e.playerState.playerMode()!=="browser"),a(),b("bg-accent-qobuz",e.playerState.playerMode()==="browser")("text-white",e.playerState.playerMode()==="browser")("bg-bg-secondary",e.playerState.playerMode()!=="browser")("text-text-muted",e.playerState.playerMode()!=="browser"),a(4),b("text-accent-qobuz",e.playerState.playerMode()==="browser"),a(4),u(e.playerState.playerMode()==="browser"?18:-1),a(),u(e.players().length>0?19:-1),a(),P(e.players()),a(2),u(e.players().length===0&&!e.isLoading()?22:-1),a(),u(e.isLoading()?23:-1),a(2),k("disabled",e.isLoading()),a(),b("animate-spin",e.isLoading())}}var z=class n{playerState=g(V);playback=g(B);bluesoundApi=g(T);isVisible=S(!1);isLoading=S(!1);players=S([]);ngOnInit(){this.loadPlayers()}open(){this.isVisible.set(!0),this.loadPlayers()}close(){this.isVisible.set(!1)}async selectBrowser(){await this.playback.switchToBrowser(),this.close()}async selectPlayer(t){await this.playback.switchToBluesound(t),this.close()}isSelected(t){return this.playerState.selectedPlayer()?.id===t.id}getPlayerSubtitle(t){return t.isStereoPaired?`${t.modelName} (Stereopaar)`:t.isGrouped?t.isMaster?`${t.groupName} (Master)`:`${t.groupName}`:t.modelName}loadPlayers(){this.isLoading.set(!0),this.bluesoundApi.getPlayers().subscribe({next:t=>{this.players.set(t),this.playerState.players.set(t),this.isLoading.set(!1)},error:()=>{this.isLoading.set(!1)}})}refreshPlayers(){this.isLoading.set(!0),this.bluesoundApi.refreshPlayers().subscribe({next:t=>{this.players.set(t),this.playerState.players.set(t),this.isLoading.set(!1)},error:()=>{this.isLoading.set(!1)}})}onEscapeKey(){this.isVisible()&&this.close()}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=w({type:n,selectors:[["app-player-selector"]],hostBindings:function(e,r){e&1&&M("keydown.escape",function(){return r.onEscapeKey()},E)},decls:1,vars:1,consts:[[1,"fixed","inset-0","bg-black/50","z-[110]",3,"click"],[1,"fixed","bottom-0","left-0","right-0","bg-bg-primary","rounded-t-2xl","z-[111]","max-h-[80vh]","overflow-hidden","flex","flex-col","safe-area-bottom","animate-slide-up"],[1,"flex","items-center","justify-between","px-6","py-4","border-b","border-border-subtle"],[1,"text-lg","font-semibold"],[1,"w-8","h-8","rounded-full","hover:bg-bg-card","flex","items-center","justify-center","text-text-muted","hover:text-text-primary","transition-colors",3,"click"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"w-5","h-5"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M6 18L18 6M6 6l12 12"],[1,"flex-1","overflow-y-auto","p-4","space-y-2"],[1,"w-full","flex","items-center","gap-4","p-4","rounded-xl","transition-colors",3,"click"],[1,"w-12","h-12","rounded-xl","flex","items-center","justify-center"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"w-6","h-6"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9.75 17L9 20l-1 1h8l-1-1-.75-3M3 13h18M5 17h14a2 2 0 002-2V5a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"],[1,"flex-1","text-left"],[1,"font-medium"],[1,"text-sm","text-text-muted"],[1,"w-6","h-6","rounded-full","bg-accent-qobuz","text-white","flex","items-center","justify-center"],[1,"flex","items-center","gap-3","py-3"],[1,"text-center","py-8","text-text-muted"],[1,"text-center","py-8"],[1,"p-4","border-t","border-border-subtle"],[1,"w-full","flex","items-center","justify-center","gap-2","py-3","text-sm","text-text-secondary","hover:text-text-primary","transition-colors",3,"click","disabled"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"w-4","h-4"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M5 13l4 4L19 7"],[1,"flex-1","h-px","bg-border-subtle"],[1,"text-xs","text-text-muted","uppercase","tracking-wide"],[1,"w-full","flex","items-center","gap-4","p-4","rounded-xl","transition-colors",3,"bg-accent-qobuz/10","border-accent-qobuz","border-2","bg-bg-card","hover:bg-bg-card-hover"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M19.428 15.428a2 2 0 00-1.022-.547l-2.387-.477a6 6 0 00-3.86.517l-.318.158a6 6 0 01-3.86.517L6.05 15.21a2 2 0 00-1.806.547M8 4h8l-1 1v5.172a2 2 0 00.586 1.414l5 5c1.26 1.26.367 3.414-1.415 3.414H4.828c-1.782 0-2.674-2.154-1.414-3.414l5-5A2 2 0 009 10.172V5L8 4z"],[1,"flex-1","text-left","min-w-0"],[1,"font-medium","truncate"],[1,"text-sm","text-text-muted","truncate"],[1,"w-6","h-6","rounded-full","bg-accent-qobuz","text-white","flex","items-center","justify-center","flex-shrink-0"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"w-12","h-12","mx-auto","mb-3","opacity-50"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","1.5","d","M19.428 15.428a2 2 0 00-1.022-.547l-2.387-.477a6 6 0 00-3.86.517l-.318.158a6 6 0 01-3.86.517L6.05 15.21a2 2 0 00-1.806.547M8 4h8l-1 1v5.172a2 2 0 00.586 1.414l5 5c1.26 1.26.367 3.414-1.415 3.414H4.828c-1.782 0-2.674-2.154-1.414-3.414l5-5A2 2 0 009 10.172V5L8 4z"],[1,"font-medium","mb-1"],[1,"text-sm"],[1,"w-8","h-8","border-2","border-accent-qobuz","border-t-transparent","rounded-full","animate-spin","mx-auto","mb-3"],[1,"text-text-muted"]],template:function(e,r){e&1&&p(0,$,29,27),e&2&&u(r.isVisible()?0:-1)},dependencies:[L],styles:[".safe-area-bottom[_ngcontent-%COMP%]{padding-bottom:env(safe-area-inset-bottom,0)}@keyframes _ngcontent-%COMP%_slide-up{0%{transform:translateY(100%)}to{transform:translateY(0)}}.animate-slide-up[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_slide-up .3s ease-out}"]})};export{z as a};
