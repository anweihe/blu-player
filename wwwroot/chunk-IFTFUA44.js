import{l as d}from"./chunk-Y2DN57ZN.js";import{N as g,S as m,cc as p,dc as c,j as l,o as i,y as b}from"./chunk-AT7XICDW.js";function h(r){if(r)return r.large??r.extralarge??r.mega??r.medium??r.small??r.thumbnail}function y(r){return r.picture??h(r.image)}function x(r){let e=Math.floor(r),t=Math.floor(e/3600),s=Math.floor(e%3600/60),a=e%60;return t>=1?`${t}:${s.toString().padStart(2,"0")}:${a.toString().padStart(2,"0")}`:`${s}:${a.toString().padStart(2,"0")}`}function S(r){return r.product_type?.toLowerCase()==="single"||r.tracks_count===1?"Single":r.product_type?.toLowerCase()==="ep"||r.tracks_count>=2&&r.tracks_count<=6&&r.duration<1800?"EP":"Album"}function z(r){return r.state==="play"||r.state==="stream"}function Q(r){return r.state==="pause"}function A(r){return r.state==="stop"}var f=class r{http=m(c);auth=m(d);apiBaseUrl="/api/qobuz";getNewReleases(e=0,t=50){return this.http.get(`${this.apiBaseUrl}/new-releases`,{params:{offset:e.toString(),limit:t.toString()},headers:this.auth.getAuthHeaders()}).pipe(i(s=>s?.albums??{items:[],total:0,offset:0,limit:t}),b(s=>(console.error("Failed to load new releases:",s),l({items:[],total:0,offset:0,limit:t}))))}getAlbumCharts(e=0,t=50){return this.http.get(`${this.apiBaseUrl}/album-charts`,{params:{offset:e.toString(),limit:t.toString()},headers:this.auth.getAuthHeaders()}).pipe(i(s=>s?.albums??{items:[],total:0,offset:0,limit:t}),b(s=>(console.error("Failed to load album charts:",s),l({items:[],total:0,offset:0,limit:t}))))}getAlbum(e){return this.http.get(`${this.apiBaseUrl}/album/${encodeURIComponent(e)}`,{headers:this.auth.getAuthHeaders()})}getFeaturedPlaylists(e,t,s=0,a=50){let o=new p().set("offset",s.toString()).set("limit",a.toString());return e&&(o=o.set("tags",e)),t?.length&&(o=o.set("genreIds",t.join(","))),this.http.get(`${this.apiBaseUrl}/featured-playlists`,{params:o,headers:this.auth.getAuthHeaders()}).pipe(i(u=>u.playlists??{items:[],total:0,offset:0,limit:a}))}getUserPlaylists(e=0,t=50){return this.http.get(`${this.apiBaseUrl}/user-playlists`,{params:{offset:e.toString(),limit:t.toString()},headers:this.auth.getAuthHeaders()}).pipe(i(s=>s.playlists??{items:[],total:0,offset:0,limit:t}))}getPlaylist(e){return this.http.get(`${this.apiBaseUrl}/playlist/${e}`,{headers:this.auth.getAuthHeaders()})}getArtistPage(e){return this.http.get(`${this.apiBaseUrl}/artist/${e}`,{headers:this.auth.getAuthHeaders()})}getArtistDiscography(e,t="all",s=0,a=50,o="release_date"){return this.http.get(`${this.apiBaseUrl}/artist/${e}/discography`,{params:{releaseType:t,offset:s.toString(),limit:a.toString(),sort:o},headers:this.auth.getAuthHeaders()}).pipe(i(u=>({items:u.albums?.map(n=>({id:n.id,title:n.title,artist:{id:0,name:n.artistName},image:{large:n.coverUrl,small:n.coverUrl},duration:0,tracks_count:n.tracksCount??0,released_at:n.releasedAt,release_type:n.typeLabel}))??[],total:u.albums?.length??0,offset:u.offset,limit:a,hasMore:u.hasMore})))}getFavoriteAlbums(e=0,t=50){return this.http.get(`${this.apiBaseUrl}/favorites/albums`,{params:{offset:e.toString(),limit:t.toString()},headers:this.auth.getAuthHeaders()}).pipe(i(s=>s.albums??{items:[],total:0,offset:0,limit:t}))}getFavoriteTracks(e=0,t=50){return this.http.get(`${this.apiBaseUrl}/favorites/tracks`,{params:{offset:e.toString(),limit:t.toString()},headers:this.auth.getAuthHeaders()}).pipe(i(s=>s.tracks?.items??[]))}getFavoriteArtists(e=0,t=50){return this.http.get(`${this.apiBaseUrl}/favorites/artists`,{params:{offset:e.toString(),limit:t.toString()},headers:this.auth.getAuthHeaders()})}search(e,t=20,s=0){return this.http.get(`${this.apiBaseUrl}/search`,{params:{query:e,limit:t.toString(),offset:s.toString()},headers:this.auth.getAuthHeaders()})}getTrackStreamUrl(e,t=27){return this.http.get(`${this.apiBaseUrl}/track-stream-url`,{params:{trackId:e.toString(),formatId:t.toString()},headers:this.auth.getAuthHeaders()}).pipe(i(s=>s.url))}getAlbumInfo(e,t,s){return this.http.get(`${this.apiBaseUrl}/album-info`,{params:{albumId:e,albumTitle:t,artistName:s},headers:this.auth.getAuthHeaders()}).pipe(i(a=>{if(!a.success)throw new Error(a.error||"Album-Info nicht verf\xFCgbar");return{style:a.style||"",summary:a.summary||""}}))}getGenres(){return this.http.get(`${this.apiBaseUrl}/genres`,{headers:this.auth.getAuthHeaders()}).pipe(i(e=>e.genres??[]))}static \u0275fac=function(t){return new(t||r)};static \u0275prov=g({token:r,factory:r.\u0275fac,providedIn:"root"})};export{z as a,Q as b,A as c,y as d,x as e,S as f,f as g};
