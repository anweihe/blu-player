import{l as d}from"./chunk-GYSMW3IL.js";import{$b as m,M as p,R as b,_b as g,j as n,o as r,x as h}from"./chunk-63K3V35C.js";var c=class u{http=b(m);auth=b(d);apiBaseUrl="/api/qobuz";getNewReleases(t=0,e=50){return this.http.get(`${this.apiBaseUrl}/new-releases`,{params:{offset:t.toString(),limit:e.toString()},headers:this.auth.getAuthHeaders()}).pipe(r(s=>s?.albums??{items:[],total:0,offset:0,limit:e}),h(s=>(console.error("Failed to load new releases:",s),n({items:[],total:0,offset:0,limit:e}))))}getAlbumCharts(t=0,e=50){return this.http.get(`${this.apiBaseUrl}/album-charts`,{params:{offset:t.toString(),limit:e.toString()},headers:this.auth.getAuthHeaders()}).pipe(r(s=>s?.albums??{items:[],total:0,offset:0,limit:e}),h(s=>(console.error("Failed to load album charts:",s),n({items:[],total:0,offset:0,limit:e}))))}getAlbum(t){return this.http.get(`${this.apiBaseUrl}/album/${encodeURIComponent(t)}`,{headers:this.auth.getAuthHeaders()})}getFeaturedPlaylists(t,e,s=0,a=50){let o=new g().set("offset",s.toString()).set("limit",a.toString());return t&&(o=o.set("tags",t)),e?.length&&(o=o.set("genreIds",e.join(","))),this.http.get(`${this.apiBaseUrl}/featured-playlists`,{params:o,headers:this.auth.getAuthHeaders()}).pipe(r(l=>l.playlists??{items:[],total:0,offset:0,limit:a}))}getUserPlaylists(t=0,e=50){return this.http.get(`${this.apiBaseUrl}/user-playlists`,{params:{offset:t.toString(),limit:e.toString()},headers:this.auth.getAuthHeaders()}).pipe(r(s=>s.playlists??{items:[],total:0,offset:0,limit:e}))}getPlaylist(t){return this.http.get(`${this.apiBaseUrl}/playlist/${t}`,{headers:this.auth.getAuthHeaders()})}getArtistPage(t){return this.http.get(`${this.apiBaseUrl}/artist/${t}`,{headers:this.auth.getAuthHeaders()})}getArtistDiscography(t,e="all",s=0,a=50,o="release_date"){return this.http.get(`${this.apiBaseUrl}/artist/${t}/discography`,{params:{releaseType:e,offset:s.toString(),limit:a.toString(),sort:o},headers:this.auth.getAuthHeaders()}).pipe(r(l=>({items:l.albums?.map(i=>({id:i.id,title:i.title,artist:{id:0,name:i.artistName},image:{large:i.coverUrl,small:i.coverUrl},duration:0,tracks_count:i.tracksCount??0,released_at:i.releasedAt,release_type:i.typeLabel}))??[],total:l.albums?.length??0,offset:l.offset,limit:a,hasMore:l.hasMore})))}getFavoriteAlbums(t=0,e=50){return this.http.get(`${this.apiBaseUrl}/favorites/albums`,{params:{offset:t.toString(),limit:e.toString()},headers:this.auth.getAuthHeaders()}).pipe(r(s=>s.albums??{items:[],total:0,offset:0,limit:e}))}getFavoriteTracks(t=0,e=50){return this.http.get(`${this.apiBaseUrl}/favorites/tracks`,{params:{offset:t.toString(),limit:e.toString()},headers:this.auth.getAuthHeaders()}).pipe(r(s=>s.tracks?.items??[]))}getFavoriteArtists(t=0,e=50){return this.http.get(`${this.apiBaseUrl}/favorites/artists`,{params:{offset:t.toString(),limit:e.toString()},headers:this.auth.getAuthHeaders()})}search(t,e=20,s=0){return this.http.get(`${this.apiBaseUrl}/search`,{params:{query:t,limit:e.toString(),offset:s.toString()},headers:this.auth.getAuthHeaders()})}getTrackStreamUrl(t,e=27){return this.http.get(`${this.apiBaseUrl}/track-stream-url`,{params:{trackId:t.toString(),formatId:e.toString()},headers:this.auth.getAuthHeaders()}).pipe(r(s=>s.url))}getAlbumInfo(t,e,s){return this.http.get(`${this.apiBaseUrl}/album-info`,{params:{albumId:t,albumTitle:e,artistName:s},headers:this.auth.getAuthHeaders()}).pipe(r(a=>{if(!a.success)throw new Error(a.error||"Album-Info nicht verf\xFCgbar");return{style:a.style||"",summary:a.summary||""}}))}getGenres(){return this.http.get(`${this.apiBaseUrl}/genres`,{headers:this.auth.getAuthHeaders()}).pipe(r(t=>t.genres??[]))}static \u0275fac=function(e){return new(e||u)};static \u0275prov=p({token:u,factory:u.\u0275fac,providedIn:"root"})};export{c as a};
