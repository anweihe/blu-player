import{a as de}from"./chunk-XHV6DCF3.js";import{d as le,e as ce,g as se}from"./chunk-NROGR6IW.js";import{e as ae,f as G}from"./chunk-N35TVY3C.js";import{$b as v,Bb as m,Cb as N,Db as p,Eb as oe,Ga as O,Ia as $,Ja as o,Kb as re,Lb as z,N as J,Nb as B,R as ee,S as T,Va as b,X as y,Y as k,Z as _,_ as q,da as M,db as s,eb as d,fb as te,gb as A,hb as V,ia as S,ib as h,jb as r,kb as a,la as H,lb as C,mb as u,nb as f,ob as w,pb as E,qb as ne,rb as P,sb as I,tb as c,yb as ie,zb as x}from"./chunk-TWVQ6WYG.js";var F=class t{constructor(n){this.router=n}isOpen=S(!1);position=S({x:0,y:0});items=S([]);openTrackMenu(n,e,i){n.preventDefault(),n.stopPropagation();let l=[];i?.onPlay&&l.push({label:"Jetzt abspielen",icon:"play",action:i.onPlay}),i?.onAddToQueue&&l.push({label:"Zur Warteschlange",icon:"queue",action:i.onAddToQueue}),l.length>0&&(e.album?.id||e.performer?.id)&&l.push({label:"",action:()=>{},divider:!0}),e.album?.id&&l.push({label:"Zum Album",icon:"album",action:()=>this.router.navigate(["/qobuz/album",e.album.id])}),e.performer?.id&&l.push({label:"Zur K\xFCnstlerseite",icon:"artist",action:()=>this.router.navigate(["/qobuz/artist",e.performer.id])}),i?.onAddToFavorites&&(l.push({label:"",action:()=>{},divider:!0}),l.push({label:"Zu Favoriten",icon:"favorite",action:i.onAddToFavorites})),this.openAt(n.clientX,n.clientY,l)}openAlbumMenu(n,e){n.preventDefault(),n.stopPropagation();let i=[];e.id&&i.push({label:"Zum Album",icon:"album",action:()=>this.router.navigate(["/qobuz/album",e.id])}),e.artist?.id&&i.push({label:"Zur K\xFCnstlerseite",icon:"artist",action:()=>this.router.navigate(["/qobuz/artist",e.artist.id])}),this.openAt(n.clientX,n.clientY,i)}openPlaylistMenu(n,e,i){n.preventDefault(),n.stopPropagation();let l=[];i?.onPlay&&l.push({label:"Abspielen",icon:"play",action:i.onPlay}),e.id&&l.push({label:"Zur Playlist",icon:"album",action:()=>this.router.navigate(["/qobuz/playlist",e.id])}),this.openAt(n.clientX,n.clientY,l)}openAt(n,e,i){let g=i.filter(Q=>!Q.divider).length*44+i.filter(Q=>Q.divider).length*9,L=10,me=100;n+200>window.innerWidth-L&&(n=window.innerWidth-200-L),n<L&&(n=L),e+g>window.innerHeight-me&&(e=e-g-8),e<L&&(e=L),this.position.set({x:n,y:e}),this.items.set(i),this.isOpen.set(!0)}close(){this.isOpen.set(!1),this.items.set([])}static \u0275fac=function(e){return new(e||t)(ee(ae))};static \u0275prov=J({token:t,factory:t.\u0275fac,providedIn:"root"})};var ue=t=>["/qobuz/album",t];function pe(t,n){if(t&1&&C(0,"img",2),t&2){let e=c();h("src",(e.album.image==null?null:e.album.image.large)||(e.album.image==null?null:e.album.image.small),O)("alt",e.album.title)}}function fe(t,n){t&1&&(r(0,"div",3),_(),r(1,"svg",16),C(2,"path",17),a()())}function _e(t,n){t&1&&(r(0,"span",10),m(1," Hi-Res "),a())}function ge(t,n){if(t&1&&(r(0,"span",11),m(1),a()),t&2){let e=c();o(),p(" #",e.rank," ")}}function xe(t,n){if(t&1&&(r(0,"div",18)(1,"span",19),m(2),a(),r(3,"span",20),m(4),a()()),t&2){let e=c();o(2),p(" ",e.userScore??"-"," "),o(2),p(" ",e.criticsScore??"-"," ")}}function Ce(t,n){if(t&1&&s(0,xe,5,2,"div",18),t&2){let e=n;d(e.userScore!==null||e.criticsScore!==null?0:-1)}}function be(t,n){if(t&1&&(r(0,"p",14),m(1),a()),t&2){let e=c();o(),p(" ",e.album.artist==null?null:e.album.artist.name," ")}}function ve(t,n){if(t&1&&(r(0,"p",15),m(1),a()),t&2){let e=c();o(),p(" ",e.getYear(e.album.released_at)," ")}}var R=class t{contextMenu=T(F);ratingService=T(de);album;compact=!1;showRank=!1;rank;showYear=!1;play=new M;rating=B(()=>(this.ratingService.ratingsUpdated(),this.ratingService.getRating(this.album?.id?.toString()??"")));onPlayClick(n){n.preventDefault(),n.stopPropagation(),this.play.emit(this.album)}onMenuClick(n){n.preventDefault(),n.stopPropagation(),this.contextMenu.openAlbumMenu(n,this.album)}getYear(n){return new Date(n*1e3).getFullYear().toString()}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=b({type:t,selectors:[["app-album-card"]],inputs:{album:"album",compact:"compact",showRank:"showRank",rank:"rank",showYear:"showYear"},outputs:{play:"play"},decls:18,vars:16,consts:[[1,"album-card","group","block","bg-bg-card","border","border-border-subtle","overflow-hidden","transition-all","hover:border-border-accent","hover:-translate-y-0.5","hover:shadow-lg",3,"routerLink"],[1,"album-cover","relative","aspect-square","bg-bg-secondary","overflow-hidden"],["loading","lazy",1,"w-full","h-full","object-cover","transition-transform","group-hover:scale-105",3,"src","alt"],[1,"w-full","h-full","flex","items-center","justify-center","text-text-muted"],["type","button","title","Mehr Optionen",1,"context-menu-btn","absolute","top-2","right-2","w-8","h-8","rounded-full","bg-black/60","text-white","flex","items-center","justify-center","z-10",3,"click"],["viewBox","0 0 24 24","fill","currentColor",1,"w-5","h-5"],["cx","12","cy","5","r","2"],["cx","12","cy","12","r","2"],["cx","12","cy","19","r","2"],[1,"absolute","top-2","left-2","flex","flex-col","gap-1"],[1,"px-1.5","py-0.5","bg-accent-qobuz/90","text-white","text-[10px]","font-bold","rounded"],[1,"px-1.5","py-0.5","bg-black/70","text-white","text-[10px]","font-bold","rounded"],[1,"p-3"],[1,"text-sm","font-semibold","truncate"],[1,"text-xs","text-text-muted","truncate","mt-0.5"],[1,"text-[10px]","text-text-muted","mt-1"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"w-12","h-12","opacity-30"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","1","d","M9 19V6l12-3v13M9 19c0 1.105-1.343 2-3 2s-3-.895-3-2 1.343-2 3-2 3 .895 3 2zm12-3c0 1.105-1.343 2-3 2s-3-.895-3-2 1.343-2 3-2 3 .895 3 2zM9 10l12-3"],[1,"absolute","bottom-2","right-2","flex","gap-1","z-[2]"],[1,"min-w-[24px]","h-6","px-1.5","rounded-md","text-xs","font-bold","flex","items-center","justify-center","backdrop-blur-sm","bg-green-500/90","text-white","shadow-sm"],[1,"min-w-[24px]","h-6","px-1.5","rounded-md","text-xs","font-bold","flex","items-center","justify-center","backdrop-blur-sm","bg-yellow-500/90","text-gray-900","shadow-sm"]],template:function(e,i){if(e&1&&(r(0,"a",0)(1,"div",1),s(2,pe,1,2,"img",2)(3,fe,3,0,"div",3),r(4,"button",4),P("click",function(g){return i.onMenuClick(g)}),_(),r(5,"svg",5),C(6,"circle",6)(7,"circle",7)(8,"circle",8),a()(),q(),r(9,"div",9),s(10,_e,2,0,"span",10),s(11,ge,2,1,"span",11),a(),s(12,Ce,1,1),a(),r(13,"div",12)(14,"h3",13),m(15),a(),s(16,be,2,1,"p",14),s(17,ve,2,1,"p",15),a()()),e&2){let l;x("compact",i.compact),h("routerLink",z(14,ue,i.album.id)),o(2),d(i.album.image!=null&&i.album.image.large||i.album.image!=null&&i.album.image.small?2:3),o(8),d(i.album.hires_streamable||i.album.hires||i.album.maximum_bit_depth&&i.album.maximum_bit_depth>16?10:-1),o(),d(i.showRank&&i.rank?11:-1),o(),d((l=i.rating())?12:-1,l),o(),x("p-2",i.compact),o(),x("text-xs",i.compact),o(),p(" ",i.album.title," "),o(),d(i.album.artist!=null&&i.album.artist.name?16:-1),o(),d(i.showYear&&i.album.released_at?17:-1)}},dependencies:[v,G],styles:[".context-menu-btn[_ngcontent-%COMP%]:hover{background:#000c}"]})};var he=t=>["/qobuz/playlist",t];function we(t,n){if(t&1&&C(0,"img",2),t&2){let e=c();h("src",e.getCoverImage(),O)("alt",e.playlist.name)}}function ye(t,n){t&1&&(r(0,"div",3),_(),r(1,"svg",14),C(2,"path",15),a()())}function ke(t,n){if(t&1&&(r(0,"div",9),m(1),a()),t&2){let e=c();o(),p(" ",e.formatDuration(e.playlist.duration)," ")}}function Ee(t,n){if(t&1&&(r(0,"p",13),m(1),a()),t&2){let e=c();o(),p(" von ",e.playlist.owner==null?null:e.playlist.owner.name," ")}}var Y=class t{contextMenu=T(F);playlist;showOwner=!1;play=new M;getCoverImage(){return this.playlist.images300?.[0]||this.playlist.images150?.[0]||this.playlist.images?.[0]}onMenuClick(n){n.preventDefault(),n.stopPropagation(),this.contextMenu.openPlaylistMenu(n,this.playlist)}formatDuration(n){let e=Math.floor(n/3600),i=Math.floor(n%3600/60);return e>0?`${e}h ${i}m`:`${i} Min`}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=b({type:t,selectors:[["app-playlist-card"]],inputs:{playlist:"playlist",showOwner:"showOwner"},outputs:{play:"play"},decls:16,vars:8,consts:[[1,"playlist-card","group","block","bg-bg-card","border","border-border-subtle","overflow-hidden","transition-all","hover:border-border-accent","hover:-translate-y-0.5","hover:shadow-lg",3,"routerLink"],[1,"playlist-cover","relative","aspect-square","bg-bg-secondary","overflow-hidden"],["loading","lazy",1,"w-full","h-full","object-cover","transition-transform","group-hover:scale-105",3,"src","alt"],[1,"w-full","h-full","flex","items-center","justify-center","text-text-muted","bg-gradient-to-br","from-bg-secondary","to-bg-card"],["type","button","title","Mehr Optionen",1,"absolute","top-2","right-2","w-8","h-8","rounded-full","bg-black/60","text-white","flex","items-center","justify-center","z-10","hover:bg-black/80",3,"click"],["viewBox","0 0 24 24","fill","currentColor",1,"w-5","h-5"],["cx","12","cy","5","r","2"],["cx","12","cy","12","r","2"],["cx","12","cy","19","r","2"],[1,"absolute","bottom-2","right-2","px-1.5","py-0.5","bg-black/70","text-white","text-[10px]","font-medium","rounded"],[1,"p-3"],[1,"text-sm","font-semibold","truncate"],[1,"text-xs","text-text-muted","mt-0.5"],[1,"text-[10px]","text-text-muted","mt-1","truncate"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"w-12","h-12","opacity-30"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","1","d","M4 6h16M4 10h16M4 14h16M4 18h16"]],template:function(e,i){e&1&&(r(0,"a",0)(1,"div",1),s(2,we,1,2,"img",2)(3,ye,3,0,"div",3),r(4,"button",4),P("click",function(g){return i.onMenuClick(g)}),_(),r(5,"svg",5),C(6,"circle",6)(7,"circle",7)(8,"circle",8),a()(),s(9,ke,2,1,"div",9),a(),q(),r(10,"div",10)(11,"h3",11),m(12),a(),r(13,"p",12),m(14),a(),s(15,Ee,2,1,"p",13),a()()),e&2&&(h("routerLink",z(6,he,i.playlist.id)),o(2),d(i.getCoverImage()?2:3),o(7),d(i.playlist.duration?9:-1),o(3),p(" ",i.playlist.name," "),o(2),p(" ",i.playlist.tracks_count," Tracks "),o(),d(i.playlist.owner!=null&&i.playlist.owner.name&&i.showOwner?15:-1))},dependencies:[v,G],encapsulation:2})};var Me=t=>["/qobuz/artist",t],Se=t=>["/qobuz/album",t];function Pe(t,n){t&1&&(r(0,"div",11),C(1,"span")(2,"span")(3,"span"),a())}function Te(t,n){if(t&1&&(r(0,"span",12),m(1),a()),t&2){let e=c(2);o(),N(e.trackNumber)}}function Ie(t,n){if(t&1&&(r(0,"div",1),s(1,Pe,4,0,"div",11)(2,Te,2,1,"span",12),a()),t&2){let e=c();o(),d(e.isPlaying?1:2)}}function ze(t,n){if(t&1&&C(0,"img",13),t&2){let e=c(2);h("src",(e.track.album==null||e.track.album.image==null?null:e.track.album.image.small)||(e.track.album==null||e.track.album.image==null?null:e.track.album.image.thumbnail),O)("alt",e.track.album==null?null:e.track.album.title)}}function Oe(t,n){if(t&1&&(r(0,"div",2),s(1,ze,1,2,"img",13),a()),t&2){let e=c();o(),d(!(e.track.album==null||e.track.album.image==null)&&e.track.album.image.small||!(e.track.album==null||e.track.album.image==null)&&e.track.album.image.thumbnail?1:-1)}}function Ge(t,n){if(t&1&&(r(0,"span",5),m(1),a()),t&2){let e=c();o(),p(" (",e.track.version,")")}}function Fe(t,n){if(t&1){let e=E();r(0,"a",14),P("click",function(l){return y(e),k(l.stopPropagation())}),m(1),a()}if(t&2){let e=c();h("routerLink",z(2,Me,e.track.performer==null?null:e.track.performer.id)),o(),p(" ",e.track.performer==null?null:e.track.performer.name," ")}}function Ae(t,n){t&1&&(r(0,"span"),m(1," \xB7 "),a())}function Ve(t,n){if(t&1){let e=E();r(0,"a",14),P("click",function(l){return y(e),k(l.stopPropagation())}),m(1),a()}if(t&2){let e=c();h("routerLink",z(2,Se,e.track.album==null?null:e.track.album.id)),o(),p(" ",e.track.album==null?null:e.track.album.title," ")}}function De(t,n){t&1&&(r(0,"span",8),m(1," Hi-Res "),a())}function Le(t,n){if(t&1){let e=E();r(0,"button",15),P("click",function(l){y(e);let g=c();return k(g.onMenuClick(l))}),_(),r(1,"svg",16),C(2,"path",17),a()()}}var W=class t{track;trackNumber;showNumber=!0;showArt=!0;showArtist=!0;showAlbum=!1;showQuality=!1;showMenu=!0;isPlaying=!1;play=new M;menu=new M;formatDuration=ce;onTrackClick(){this.play.emit(this.track)}onMenuClick(n){n.stopPropagation(),this.menu.emit({track:this.track,event:n})}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=b({type:t,selectors:[["app-track-item"]],inputs:{track:"track",trackNumber:"trackNumber",showNumber:"showNumber",showArt:"showArt",showArtist:"showArtist",showAlbum:"showAlbum",showQuality:"showQuality",showMenu:"showMenu",isPlaying:"isPlaying"},outputs:{play:"play",menu:"menu"},decls:15,vars:16,consts:[[1,"track-item","flex","items-center","gap-3","p-3","rounded-lg","transition-colors","cursor-pointer",3,"click"],[1,"w-6","flex-shrink-0","text-center"],[1,"w-10","h-10","rounded","bg-bg-secondary","overflow-hidden","flex-shrink-0"],[1,"flex-1","min-w-0"],[1,"text-sm","font-medium","truncate"],[1,"text-text-muted","font-normal"],[1,"text-xs","text-text-muted","truncate"],[1,"hover:text-accent-qobuz","hover:underline",3,"routerLink"],[1,"hidden","md:inline-block","px-1.5","py-0.5","bg-accent-qobuz/10","text-accent-qobuz","text-[10px]","font-semibold","rounded"],[1,"text-sm","text-text-muted","tabular-nums"],[1,"w-8","h-8","rounded-full","text-text-muted","hover:text-text-primary","hover:bg-bg-secondary","flex","items-center","justify-center","transition-colors"],[1,"playing-indicator"],[1,"text-sm","text-text-muted"],[1,"w-full","h-full","object-cover",3,"src","alt"],[1,"hover:text-accent-qobuz","hover:underline",3,"click","routerLink"],[1,"w-8","h-8","rounded-full","text-text-muted","hover:text-text-primary","hover:bg-bg-secondary","flex","items-center","justify-center","transition-colors",3,"click"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"w-4","h-4"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 5v.01M12 12v.01M12 19v.01M12 6a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2z"]],template:function(e,i){e&1&&(r(0,"div",0),P("click",function(){return i.onTrackClick()}),s(1,Ie,3,1,"div",1),s(2,Oe,2,1,"div",2),r(3,"div",3)(4,"p",4),m(5),s(6,Ge,2,1,"span",5),a(),r(7,"p",6),s(8,Fe,2,4,"a",7),s(9,Ae,2,0,"span"),s(10,Ve,2,4,"a",7),a()(),s(11,De,2,0,"span",8),r(12,"span",9),m(13),a(),s(14,Le,3,0,"button",10),a()),e&2&&(x("hover:bg-bg-card",!i.isPlaying)("bg-accent-qobuz/10",i.isPlaying),o(),d(i.showNumber?1:-1),o(),d(i.showArt?2:-1),o(2),x("text-accent-qobuz",i.isPlaying),o(),p(" ",i.track.title," "),o(),d(i.track.version?6:-1),o(2),d(i.showArtist&&(i.track.performer!=null&&i.track.performer.name)?8:-1),o(),d(i.showArtist&&i.showAlbum&&(i.track.performer!=null&&i.track.performer.name)&&(i.track.album!=null&&i.track.album.title)?9:-1),o(),d(i.showAlbum&&(i.track.album!=null&&i.track.album.title)?10:-1),o(),d(i.showQuality&&(i.track.hires_streamable||i.track.hires||i.track.maximum_bit_depth&&i.track.maximum_bit_depth>16)?11:-1),o(2),p(" ",i.formatDuration(i.track.duration)," "),o(),d(i.showMenu?14:-1))},dependencies:[v,G],styles:[".playing-indicator[_ngcontent-%COMP%]{display:flex;align-items:flex-end;justify-content:center;gap:2px;height:14px}.playing-indicator[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{width:3px;background:var(--color-accent-qobuz);border-radius:1px;animation:_ngcontent-%COMP%_equalizer .8s ease-in-out infinite}.playing-indicator[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(1){height:60%;animation-delay:0s}.playing-indicator[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(2){height:100%;animation-delay:.2s}.playing-indicator[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(3){height:40%;animation-delay:.4s}@keyframes _ngcontent-%COMP%_equalizer{0%,to{transform:scaleY(.5)}50%{transform:scaleY(1)}}"]})};var qe=t=>["/qobuz/artist",t];function Ne(t,n){if(t&1&&C(0,"img",2),t&2){let e=c();h("src",e.getArtistImage(),O)("alt",e.artist.name)}}function je(t,n){t&1&&(r(0,"div",3),_(),r(1,"svg",6),C(2,"path",7),a()())}function He(t,n){if(t&1&&(r(0,"p",5),m(1),a()),t&2){let e=c();o(),oe(" ",e.artist.albums_count," ",e.artist.albums_count===1?"Album":"Alben"," ")}}var Z=class t{artist;getArtistImage(){return le(this.artist)}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=b({type:t,selectors:[["app-artist-card"]],inputs:{artist:"artist"},decls:7,vars:6,consts:[[1,"artist-card","group","block","text-center","p-4","rounded-xl","bg-bg-card","border","border-border-subtle","transition-all","hover:border-border-accent","hover:-translate-y-0.5","hover:shadow-lg",3,"routerLink"],[1,"w-24","h-24","mx-auto","mb-3","rounded-full","overflow-hidden","bg-bg-secondary","ring-2","ring-transparent","group-hover:ring-accent-qobuz/30","transition-all"],["loading","lazy",1,"w-full","h-full","object-cover",3,"src","alt"],[1,"w-full","h-full","flex","items-center","justify-center","text-text-muted","bg-gradient-to-br","from-bg-secondary","to-bg-card"],[1,"text-sm","font-semibold","truncate"],[1,"text-xs","text-text-muted","mt-1"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"w-10","h-10","opacity-30"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","1.5","d","M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"]],template:function(e,i){e&1&&(r(0,"a",0)(1,"div",1),s(2,Ne,1,2,"img",2)(3,je,3,0,"div",3),a(),r(4,"h3",4),m(5),a(),s(6,He,2,2,"p",5),a()),e&2&&(h("routerLink",z(4,qe,i.artist.id)),o(2),d(i.getArtistImage()?2:3),o(3),p(" ",i.artist.name," "),o(),d(i.artist.albums_count?6:-1))},dependencies:[v,G],encapsulation:2})};var Be=()=>[1,2,3],Qe=(t,n)=>n.id;function $e(t,n){if(t&1&&(u(0,"span",5),m(1),f()),t&2){let e=c();o(),N(e.selectedCount())}}function Re(t,n){if(t&1){let e=E();u(0,"button",10),I("click",function(l){y(e);let g=c();return k(g.clearAll(l))}),_(),u(1,"svg",11),w(2,"path",12),f()()}}function Ye(t,n){t&1&&(_(),u(0,"svg",15),w(1,"path",16),f())}function We(t,n){if(t&1){let e=E();u(0,"button",14),I("click",function(){let l=y(e).$implicit,g=c(2);return k(g.toggleGenre(l))}),s(1,Ye,2,0,":svg:svg",15),m(2),f()}if(t&2){let e=n.$implicit,i=c(2);x("selected",i.isSelected(e.id)),o(),d(i.isSelected(e.id)?1:-1),o(),p(" ",e.name," ")}}function Ze(t,n){t&1&&w(0,"div",17)}function Ke(t,n){t&1&&A(0,Ze,1,0,"div",17,te),t&2&&V(re(0,Be))}function Ue(t,n){if(t&1&&(u(0,"div",9),A(1,We,3,4,"button",13,Qe),s(3,Ke,2,1),f()),t&2){let e=c();o(),V(e.genres()),o(2),d(e.loading()?3:-1)}}var K=class t{qobuzApi=T(se);initialGenres=[];genreChange=new M;genres=S([]);selectedGenres=S([]);loading=S(!0);expanded=S(!1);selectedCount=B(()=>this.selectedGenres().length);ngOnInit(){this.applyInitialGenres(),this.loadGenres()}ngOnChanges(n){n.initialGenres&&!n.initialGenres.firstChange&&this.applyInitialGenres()}applyInitialGenres(){if(this.initialGenres&&this.initialGenres.length>0){let n=this.initialGenres.map(e=>parseInt(e,10)).filter(e=>!isNaN(e));this.selectedGenres.set(n),n.length>0&&this.expanded.set(!0)}}loadGenres(){this.qobuzApi.getGenres().subscribe({next:n=>{this.genres.set(n),this.loading.set(!1)},error:()=>this.loading.set(!1)})}toggleExpanded(){this.expanded.update(n=>!n)}isSelected(n){return this.selectedGenres().includes(n)}toggleGenre(n){let e=this.selectedGenres();e.includes(n.id)?this.selectedGenres.set(e.filter(i=>i!==n.id)):this.selectedGenres.set([...e,n.id]),this.emitChange()}clearAll(n){n.stopPropagation(),this.selectedGenres.set([]),this.emitChange()}emitChange(){let n=this.selectedGenres().map(e=>e.toString());this.genreChange.emit(n)}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=b({type:t,selectors:[["app-genre-filter"]],inputs:{initialGenres:"initialGenres"},outputs:{genreChange:"genreChange"},features:[H],decls:12,vars:7,consts:[[1,"genre-filter"],[1,"genre-filter-header"],[1,"genre-toggle",3,"click"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"music-icon"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 19V6l12-3v13M9 19c0 1.105-1.343 2-3 2s-3-.895-3-2 1.343-2 3-2 3 .895 3 2zm12-3c0 1.105-1.343 2-3 2s-3-.895-3-2 1.343-2 3-2 3 .895 3 2zM9 10l12-3"],[1,"genre-badge"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"arrow-icon"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M19 9l-7 7-7-7"],["title","Alle Filter l\xF6schen",1,"genre-clear-btn"],[1,"genre-chips"],["title","Alle Filter l\xF6schen",1,"genre-clear-btn",3,"click"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M6 18L18 6M6 6l12 12"],[1,"genre-chip",3,"selected"],[1,"genre-chip",3,"click"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"check-icon"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","3","d","M5 13l4 4L19 7"],[1,"genre-chip-skeleton"]],template:function(e,i){e&1&&(u(0,"div",0)(1,"div",1)(2,"button",2),I("click",function(){return i.toggleExpanded()}),_(),u(3,"svg",3),w(4,"path",4),f(),q(),u(5,"span"),m(6,"Genre"),f(),s(7,$e,2,1,"span",5),_(),u(8,"svg",6),w(9,"path",7),f()(),s(10,Re,3,0,"button",8),f(),s(11,Ue,4,1,"div",9),f()),e&2&&(o(2),x("has-selection",i.selectedCount()>0),o(5),d(i.selectedCount()>0?7:-1),o(),x("rotated",i.expanded()),o(2),d(i.selectedCount()>0?10:-1),o(),d(i.expanded()?11:-1))},dependencies:[v],styles:[".genre-filter[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:12px}.genre-filter-header[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px}.genre-toggle[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;padding:8px 14px;background:var(--color-bg-card);border:1px solid var(--color-border-subtle);border-radius:20px;color:var(--color-text-secondary);font-size:.875rem;font-weight:500;cursor:pointer;transition:all .15s ease}.genre-toggle[_ngcontent-%COMP%]:hover{background:var(--color-bg-secondary);border-color:var(--color-border-accent);color:var(--color-text-primary)}.genre-toggle.has-selection[_ngcontent-%COMP%]{border-color:var(--color-accent-qobuz);color:var(--color-text-primary)}.music-icon[_ngcontent-%COMP%]{width:16px;height:16px}.arrow-icon[_ngcontent-%COMP%]{width:16px;height:16px;transition:transform .2s ease}.arrow-icon.rotated[_ngcontent-%COMP%]{transform:rotate(180deg)}.genre-badge[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;min-width:18px;height:18px;padding:0 5px;background:var(--color-accent-qobuz);border-radius:9px;color:#fff;font-size:11px;font-weight:600}.genre-clear-btn[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;width:32px;height:32px;background:#ef444426;border:1px solid rgba(239,68,68,.3);border-radius:50%;color:#ef4444;cursor:pointer;transition:all .15s ease}.genre-clear-btn[_ngcontent-%COMP%]:hover{background:#ef444440;border-color:#ef444480}.genre-clear-btn[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:16px;height:16px}.genre-chips[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:8px;padding-top:4px}.genre-chip[_ngcontent-%COMP%]{display:flex;align-items:center;gap:6px;padding:8px 14px;background:var(--color-bg-card);border:1px solid var(--color-border-subtle);border-radius:20px;color:var(--color-text-secondary);font-size:.875rem;font-weight:500;cursor:pointer;transition:all .15s ease}.genre-chip[_ngcontent-%COMP%]:hover{background:var(--color-bg-secondary);border-color:var(--color-border-accent);color:var(--color-text-primary)}.genre-chip.selected[_ngcontent-%COMP%]{background:#00d4aa1f;border-color:var(--color-accent-qobuz);color:var(--color-accent-qobuz)}.check-icon[_ngcontent-%COMP%]{width:14px;height:14px;flex-shrink:0}.genre-chip-skeleton[_ngcontent-%COMP%]{width:80px;height:36px;background:var(--color-bg-secondary);border-radius:20px;animation:_ngcontent-%COMP%_pulse 1.5s ease-in-out infinite}@keyframes _ngcontent-%COMP%_pulse{0%,to{opacity:1}50%{opacity:.5}}"]})};var Xe=(t,n)=>n.value;function Je(t,n){if(t&1){let e=E();u(0,"button",3),I("click",function(){let l=y(e).$implicit,g=c();return k(g.selectTag(l.value))}),m(1),f()}if(t&2){let e=n.$implicit,i=c();x("active",i.selectedTag()===e.value),o(),p(" ",e.label," ")}}var U=class t{initialTag="";tagChange=new M;selectedTag=S("all");tags=[{value:"all",label:"Alle"},{value:"popular",label:"Top-Playlists"},{value:"new",label:"Neuheiten"},{value:"hi-res",label:"Hi-Res"},{value:"bestof2025",label:"Best of 2025"},{value:"focus",label:"Fokus"},{value:"mood",label:"Moods"},{value:"artist",label:"K\xFCnstlerInnen"},{value:"danslecasque",label:"Geh\xF6rt von..."},{value:"label",label:"Label-Geschichten"},{value:"qobuzdigs",label:"Geheimtipps"},{value:"event",label:"Events & Medien"},{value:"partner",label:"Hi-Fi Partners"}];ngOnInit(){this.applyInitialTag()}ngOnChanges(n){n.initialTag&&!n.initialTag.firstChange&&this.applyInitialTag()}applyInitialTag(){let n=this.initialTag||"all";this.selectedTag.set(n)}selectTag(n){this.selectedTag.set(n),this.tagChange.emit(n==="all"?"":n)}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=b({type:t,selectors:[["app-playlist-tags-filter"]],inputs:{initialTag:"initialTag"},outputs:{tagChange:"tagChange"},features:[H],decls:4,vars:0,consts:[[1,"playlist-tags-filter"],[1,"flex","gap-2","overflow-x-auto","pb-2","scrollbar-hide"],[1,"tag-chip","flex-shrink-0","px-4","py-2","rounded-full","text-sm","font-medium","transition-all","whitespace-nowrap",3,"active"],[1,"tag-chip","flex-shrink-0","px-4","py-2","rounded-full","text-sm","font-medium","transition-all","whitespace-nowrap",3,"click"]],template:function(e,i){e&1&&(u(0,"div",0)(1,"div",1),A(2,Je,2,3,"button",2,Xe),f()()),e&2&&(o(2),V(i.tags))},dependencies:[v],styles:[".scrollbar-hide[_ngcontent-%COMP%]{scrollbar-width:none;-ms-overflow-style:none}.scrollbar-hide[_ngcontent-%COMP%]::-webkit-scrollbar{display:none}.tag-chip[_ngcontent-%COMP%]{background:var(--color-bg-card);border:1px solid var(--color-border-subtle);color:var(--color-text-secondary)}.tag-chip[_ngcontent-%COMP%]:hover{background:var(--color-bg-secondary);border-color:var(--color-border-accent);color:var(--color-text-primary)}.tag-chip.active[_ngcontent-%COMP%]{background:var(--color-accent-qobuz);border-color:var(--color-accent-qobuz);color:#fff}"]})};var et=(t,n)=>n.label;function tt(t,n){t&1&&w(0,"div",2)}function nt(t,n){t&1&&(_(),u(0,"svg",5),w(1,"circle",7)(2,"circle",8),f())}function it(t,n){t&1&&(_(),u(0,"svg",5),w(1,"path",9)(2,"circle",10),f())}function ot(t,n){t&1&&(_(),u(0,"svg",6),w(1,"path",11),f())}function rt(t,n){t&1&&(_(),u(0,"svg",5),w(1,"path",12),f())}function at(t,n){t&1&&(_(),u(0,"svg",5),w(1,"path",13),f())}function lt(t,n){if(t&1){let e=E();u(0,"button",4),I("click",function(){y(e);let l=c().$implicit,g=c(2);return k(g.onItemClick(l))}),s(1,nt,3,0,":svg:svg",5)(2,it,3,0,":svg:svg",5)(3,ot,2,0,":svg:svg",6)(4,rt,2,0,":svg:svg",5)(5,at,2,0,":svg:svg",5),u(6,"span"),m(7),f()()}if(t&2){let e,i=c().$implicit;x("text-text-muted",i.disabled),ne("disabled",i.disabled),o(),d((e=i.icon)==="album"?1:e==="artist"?2:e==="play"?3:e==="queue"?4:e==="favorite"?5:-1),o(6),N(i.label)}}function ct(t,n){if(t&1&&s(0,tt,1,0,"div",2)(1,lt,8,5,"button",3),t&2){let e=n.$implicit;d(e.divider?0:1)}}function st(t,n){if(t&1){let e=E();u(0,"div",0),I("click",function(){y(e);let l=c();return k(l.menuService.close())}),f(),u(1,"div",1),A(2,ct,2,1,null,null,et),f()}if(t&2){let e=c();o(),ie("top",e.menuService.position().y,"px")("left",e.menuService.position().x,"px"),x("animate-in",e.menuService.isOpen()),o(),V(e.menuService.items())}}var X=class t{menuService=T(F);onEscape(){this.menuService.close()}onScroll(){this.menuService.close()}onItemClick(n){n.disabled||(n.action(),this.menuService.close())}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=b({type:t,selectors:[["app-global-context-menu"]],hostBindings:function(e,i){e&1&&P("keydown.escape",function(){return i.onEscape()},$)("scroll",function(){return i.onScroll()},$)},decls:1,vars:1,consts:[[1,"fixed","inset-0","z-[1000]",3,"click"],[1,"context-menu","fixed","bg-bg-card","border","border-border-subtle","rounded-lg","shadow-xl","overflow-hidden","z-[1001]","min-w-[180px]"],[1,"h-px","bg-border-subtle","my-1"],[1,"context-menu-item","w-full","flex","items-center","gap-3","px-4","py-2.5","text-left","text-sm","transition-colors","hover:bg-bg-secondary","disabled:opacity-50","disabled:cursor-not-allowed",3,"text-text-muted","disabled"],[1,"context-menu-item","w-full","flex","items-center","gap-3","px-4","py-2.5","text-left","text-sm","transition-colors","hover:bg-bg-secondary","disabled:opacity-50","disabled:cursor-not-allowed",3,"click","disabled"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor","stroke-width","2",1,"w-4","h-4","text-text-muted"],["xmlns","http://www.w3.org/2000/svg","fill","currentColor","viewBox","0 0 24 24",1,"w-4","h-4","text-text-muted"],["cx","12","cy","12","r","10"],["cx","12","cy","12","r","3"],["d","M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"],["cx","12","cy","7","r","4"],["d","M8 5v14l11-7z"],["stroke-linecap","round","stroke-linejoin","round","d","M4 6h16M4 10h16M4 14h16M4 18h16"],["stroke-linecap","round","stroke-linejoin","round","d","M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"]],template:function(e,i){e&1&&s(0,st,4,6),e&2&&d(i.menuService.isOpen()?0:-1)},dependencies:[v],styles:[".context-menu[_ngcontent-%COMP%]{transform-origin:top left}.animate-in[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_menu-appear .15s ease-out}@keyframes _ngcontent-%COMP%_menu-appear{0%{opacity:0;transform:scale(.95)}to{opacity:1;transform:scale(1)}}"]})};export{F as a,R as b,Y as c,W as d,Z as e,K as f,U as g,X as h};
