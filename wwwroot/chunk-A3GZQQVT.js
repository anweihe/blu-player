import{d as G,e as N,j as H}from"./chunk-F3JCDRW3.js";import{Ja as R,M as V,Mb as j,R as u,Rb as A,Sa as g,Ta as y,Ua as F,Va as f,W as M,Wa as x,X as z,Xa as E,Y as d,Ya as o,Z as v,Za as r,_a as s,cb as L,eb as C,gb as l,ha as P,j as T,lb as D,nb as _,o as U,ob as m,pb as q,qb as h,ua as O,x as B,xa as a,xb as $}from"./chunk-F7VV2WDX.js";var w=class t{http=u(A);auth=u(H);getHistory(){let e=this.auth.getProfileId();return e?this.http.get(`/Qobuz?handler=History&profileId=${encodeURIComponent(e)}`).pipe(U(i=>this.transformToSections(i)),B(()=>T([]))):T([])}transformToSections(e){let i=[];return e.qobuzPlaylists?.length>0&&i.push({title:"Zuletzt geh\xF6rt - Playlists",iconType:"qobuz",items:e.qobuzPlaylists.map(n=>this.transformPlaylist(n))}),e.qobuzAlbums?.length>0&&i.push({title:"Zuletzt geh\xF6rt - Alben",iconType:"qobuz",items:e.qobuzAlbums.map(n=>this.transformAlbum(n))}),e.tuneIn?.length>0&&i.push({title:"Zuletzt geh\xF6rt - Radio",iconType:"tunein",items:e.tuneIn.map(n=>this.transformTuneIn(n))}),e.radioParadise?.length>0&&i.push({title:"Zuletzt geh\xF6rt - Radio Paradise",iconType:"radioparadise",items:e.radioParadise.map(n=>this.transformRadioParadise(n))}),i}transformPlaylist(e){return{id:e.id,title:e.playlistName,imageUrl:e.coverUrl,type:"playlist",actionId:e.playlistId}}transformAlbum(e){return{id:e.id,title:e.albumName,subtitle:e.artist,imageUrl:e.coverUrl,type:"album",actionId:e.albumId}}transformTuneIn(e){return{id:e.id,title:e.title,imageUrl:e.imageUrl,type:"tunein",actionUrl:e.actionUrl}}transformRadioParadise(e){return{id:e.id,title:e.title,subtitle:e.quality,imageUrl:e.imageUrl,type:"radioparadise",actionUrl:e.actionUrl}}addAlbumToHistory(e,i,n,c){let p=this.auth.getProfileId();if(!p)return;let S=`history_albums_${p}`,b=this.getLocalHistory(S).filter(J=>J.albumId!==e);b.unshift({id:`album_${e}_${Date.now()}`,albumId:e,albumName:i,artist:n,coverUrl:c,type:"album"});let k=b.slice(0,20);localStorage.setItem(S,JSON.stringify(k))}addPlaylistToHistory(e,i,n){let c=this.auth.getProfileId();if(!c)return;let p=`history_playlists_${c}`,I=this.getLocalHistory(p).filter(k=>k.playlistId!==e);I.unshift({id:`playlist_${e}_${Date.now()}`,playlistId:e,playlistName:i,coverUrl:n,type:"playlist"});let b=I.slice(0,20);localStorage.setItem(p,JSON.stringify(b))}getLocalHistory(e){try{let i=localStorage.getItem(e);return i?JSON.parse(i):[]}catch{return[]}}static \u0275fac=function(i){return new(i||t)};static \u0275prov=V({token:t,factory:t.\u0275fac,providedIn:"root"})};var W=()=>[1,2],K=()=>[1,2,3,4],Z=(t,e)=>e.id,X=(t,e)=>e.title;function ee(t,e){if(t&1){let i=L();o(0,"button",27),C("click",function(){M(i);let c=l();return z(c.toggleMenu())}),m(1),r()}if(t&2){let i=l();a(),h(" ",i.profileInitial()," ")}}function te(t,e){if(t&1&&(d(),o(0,"svg",34),s(1,"circle",35)(2,"circle",36),r()),t&2){let i=l().$implicit;_(i.colorClass)}}function ie(t,e){if(t&1&&(d(),o(0,"svg",37),s(1,"circle",38)(2,"path",39)(3,"path",40)(4,"circle",41),r()),t&2){let i=l().$implicit;_(i.colorClass)}}function ne(t,e){if(t&1&&(d(),o(0,"svg",37),s(1,"path",42)(2,"path",43)(3,"path",44),r()),t&2){let i=l().$implicit;_(i.colorClass)}}function oe(t,e){if(t&1&&(o(0,"a",28)(1,"div",29),g(2,te,3,2,":svg:svg",30)(3,ie,5,2,":svg:svg",31)(4,ne,4,2,":svg:svg",31),r(),o(5,"span",32),m(6),r(),o(7,"span",33),m(8),r()()),t&2){let i,n=e.$implicit;_("hover:border-"+n.hoverBorderClass),E("routerLink",n.route),a(),_(n.bgClass),a(),y((i=n.id)==="qobuz"?2:i==="tunein"?3:i==="radioparadise"?4:-1),a(4),q(n.name),a(2),q(n.description)}}function re(t,e){t&1&&(o(0,"div",48),s(1,"div",49)(2,"div",50),r())}function ae(t,e){t&1&&(o(0,"div",45),s(1,"div",46),o(2,"div",47),f(3,re,3,0,"div",48,F),r()()),t&2&&(a(3),x($(0,K)))}function se(t,e){t&1&&(o(0,"div",22),f(1,ae,5,1,"div",45,F),r()),t&2&&(a(),x($(0,W)))}function le(t,e){if(t&1&&s(0,"img",57),t&2){let i=l().$implicit;E("src",i.imageUrl,O)("alt",i.title)}}function ce(t,e){t&1&&(d(),s(0,"circle",11)(1,"path",63)(2,"circle",64))}function de(t,e){t&1&&(d(),s(0,"path",65)(1,"path",66)(2,"path",67))}function me(t,e){t&1&&(d(),s(0,"path",68)(1,"circle",69)(2,"circle",70))}function pe(t,e){if(t&1&&(o(0,"div",61),d(),o(1,"svg",62),g(2,ce,3,0)(3,de,3,0)(4,me,3,0),r()()),t&2){let i,n=l(2).$implicit,c=l(2);_(c.getPlaceholderClass(n.iconType)),a(2),y((i=n.iconType)==="tunein"?2:i==="radioparadise"?3:4)}}function ue(t,e){if(t&1&&(o(0,"span",60),m(1),r()),t&2){let i=l().$implicit;a(),h(" ",i.subtitle," ")}}function ge(t,e){if(t&1){let i=L();o(0,"button",56),C("click",function(){let c=M(i).$implicit,p=l(3);return z(p.playFromHistory(c))}),g(1,le,1,2,"img",57)(2,pe,5,3,"div",58),o(3,"span",59),m(4),r(),g(5,ue,2,1,"span",60),r()}if(t&2){let i=e.$implicit;a(),y(i.imageUrl?1:2),a(3),h(" ",i.title," "),a(),y(i.subtitle?5:-1)}}function ye(t,e){if(t&1&&(o(0,"section",52)(1,"h3",53),m(2),s(3,"span",54),r(),o(4,"div",47),f(5,ge,6,3,"button",55,Z),r()()),t&2){let i=e.$implicit,n=e.$index;D("animation-delay",n*50,"ms"),a(2),h(" ",i.title," "),a(3),x(i.items)}}function _e(t,e){if(t&1&&(o(0,"div",22),f(1,ye,7,3,"section",51,X),r()),t&2){let i=l();a(),x(i.historySections())}}var Q=class t{auth=u(H);historyService=u(w);router=u(G);isLoading=P(!0);historySections=P([]);sources=[{id:"qobuz",name:"Qobuz",description:"Hi-Res Streaming",route:"/qobuz",colorClass:"text-accent-qobuz",bgClass:"bg-accent-qobuz/15",hoverBorderClass:"accent-qobuz"},{id:"tunein",name:"TuneIn",description:"Internet Radio",route:"/tunein",colorClass:"text-orange-500",bgClass:"bg-orange-500/15",hoverBorderClass:"orange-500"},{id:"radioparadise",name:"Radio Paradise",description:"Eclectic Mix",route:"/radioparadise",colorClass:"text-emerald-500",bgClass:"bg-emerald-500/15",hoverBorderClass:"emerald-500"}];profileInitial=()=>"?";ngOnInit(){this.loadHistory()}loadHistory(){this.isLoading.set(!0),this.historyService.getHistory().subscribe({next:e=>{this.historySections.set(e),this.isLoading.set(!1)},error:()=>{this.isLoading.set(!1)}})}toggleMenu(){}getPlaceholderClass(e){switch(e){case"tunein":return"bg-gradient-to-br from-orange-500/15 to-orange-500/5 text-orange-500";case"radioparadise":return"bg-gradient-to-br from-emerald-500/15 to-emerald-500/5 text-emerald-500";default:return"bg-gradient-to-br from-accent-qobuz/15 to-accent-qobuz/5 text-accent-qobuz"}}playFromHistory(e){switch(e.type){case"album":this.router.navigate(["/qobuz/album",e.actionId]);break;case"playlist":this.router.navigate(["/qobuz/playlist",e.actionId]);break;case"tunein":this.router.navigate(["/tunein"]);break;case"radioparadise":this.router.navigate(["/radioparadise"]);break}}static \u0275fac=function(i){return new(i||t)};static \u0275cmp=R({type:t,selectors:[["app-home"]],decls:35,vars:2,consts:[[1,"min-h-screen","bg-bg-primary"],[1,"sticky","top-0","z-50","bg-bg-secondary","border-b","border-border-subtle","safe-area-top"],[1,"flex","items-center","justify-between","px-4","py-3.5","max-w-5xl","mx-auto"],[1,"flex","items-center","gap-3"],[1,"w-9","h-9","rounded-lg","hover:bg-bg-card","flex","items-center","justify-center","text-text-secondary","hover:text-text-primary","transition-colors",3,"click"],["fill","none","viewBox","0 0 24 24","stroke","currentColor","stroke-width","2",1,"w-5","h-5"],["x1","3","y1","6","x2","21","y2","6"],["x1","3","y1","12","x2","21","y2","12"],["x1","3","y1","18","x2","21","y2","18"],[1,"flex","items-center","gap-2.5"],["viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2",1,"w-7","h-7","text-accent-qobuz"],["cx","12","cy","12","r","10"],["cx","12","cy","12","r","3"],["d","M12 2v4M12 18v4M2 12h4M18 12h4"],[1,"text-xl","font-semibold","tracking-tight"],[1,"w-9","h-9","rounded-full","bg-accent-qobuz","text-white","flex","items-center","justify-center","text-sm","font-semibold","hover:scale-105","transition-transform"],[1,"px-4","py-8","max-w-xl","mx-auto","pb-28"],[1,"text-center","mb-6"],[1,"text-2xl","font-bold","tracking-tight","mb-1.5"],[1,"text-sm","text-text-secondary"],[1,"grid","grid-cols-3","gap-2","mb-8"],[1,"source-card","flex","flex-col","items-center","gap-1.5","p-3","bg-bg-card","border","border-border-accent","rounded-xl","cursor-pointer","transition-all","hover:bg-bg-card-hover","hover:-translate-y-0.5",3,"routerLink","class"],[1,"space-y-6"],["routerLink","/players",1,"flex","items-center","justify-center","gap-2.5","mt-8","px-5","py-3","bg-bg-card","border","border-border-accent","rounded-xl","text-text-secondary","text-sm","hover:bg-bg-card-hover","hover:text-text-primary","hover:border-white/20","transition-all"],["viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2",1,"w-4.5","h-4.5"],["x","4","y","4","width","16","height","16","rx","2"],["d","M12 9v-2M12 17v-2M9 12H7M17 12h-2"],[1,"w-9","h-9","rounded-full","bg-accent-qobuz","text-white","flex","items-center","justify-center","text-sm","font-semibold","hover:scale-105","transition-transform",3,"click"],[1,"source-card","flex","flex-col","items-center","gap-1.5","p-3","bg-bg-card","border","border-border-accent","rounded-xl","cursor-pointer","transition-all","hover:bg-bg-card-hover","hover:-translate-y-0.5",3,"routerLink"],[1,"w-10","h-10","rounded-full","flex","items-center","justify-center"],["viewBox","0 0 100 100","fill","currentColor",1,"w-5","h-5",3,"class"],["viewBox","0 0 100 100","fill","none","stroke","currentColor","stroke-width","5",1,"w-5","h-5",3,"class"],[1,"text-xs","font-semibold","text-text-primary"],[1,"text-[10px]","text-text-muted","hidden","sm:block"],["viewBox","0 0 100 100","fill","currentColor",1,"w-5","h-5"],["cx","50","cy","50","r","45","fill","none","stroke","currentColor","stroke-width","6"],["cx","50","cy","50","r","20"],["viewBox","0 0 100 100","fill","none","stroke","currentColor","stroke-width","5",1,"w-5","h-5"],["cx","50","cy","50","r","45"],["d","M30 50a20 20 0 0140 0","stroke-width","4"],["d","M20 50a30 30 0 0160 0","stroke-width","4"],["cx","50","cy","50","r","5","fill","currentColor"],["d","M50 10L10 35l40 25 40-25-40-25z"],["d","M10 65l40 25 40-25"],["d","M10 50l40 25 40-25"],[1,"animate-pulse"],[1,"h-4","w-40","bg-bg-secondary","rounded","mb-3"],[1,"grid","grid-cols-4","sm:grid-cols-5","gap-2.5"],[1,"flex","flex-col","items-center","gap-2"],[1,"w-14","h-14","sm:w-16","sm:h-16","bg-bg-secondary","rounded-lg"],[1,"h-3","w-12","bg-bg-secondary","rounded"],[1,"history-section",3,"animation-delay"],[1,"history-section"],[1,"flex","items-center","gap-2","text-xs","font-semibold","text-text-muted","uppercase","tracking-wide","mb-3"],[1,"flex-1","h-px","bg-border-subtle"],[1,"history-item","flex","flex-col","items-center","p-2.5","bg-bg-card","rounded-lg","hover:bg-bg-card-hover","transition-all","hover:scale-102","active:scale-98"],[1,"history-item","flex","flex-col","items-center","p-2.5","bg-bg-card","rounded-lg","hover:bg-bg-card-hover","transition-all","hover:scale-102","active:scale-98",3,"click"],["loading","lazy",1,"w-14","h-14","sm:w-16","sm:h-16","rounded-md","object-cover","bg-bg-secondary","shadow-sm","mb-2",3,"src","alt"],[1,"w-14","h-14","sm:w-16","sm:h-16","rounded-md","flex","items-center","justify-center","mb-2",3,"class"],[1,"text-xs","font-medium","text-text-primary","text-center","line-clamp-2","leading-tight"],[1,"text-[10px]","text-text-muted","text-center","truncate","w-full","mt-0.5"],[1,"w-14","h-14","sm:w-16","sm:h-16","rounded-md","flex","items-center","justify-center","mb-2"],["viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","1.5",1,"w-6","h-6"],["d","M8 12a4 4 0 018 0"],["cx","12","cy","12","r","1","fill","currentColor"],["d","M12 3L2 9l10 6 10-6-10-6z"],["d","M2 17l10 6 10-6"],["d","M2 13l10 6 10-6"],["d","M9 18V5l12-2v13"],["cx","6","cy","18","r","3"],["cx","18","cy","16","r","3"]],template:function(i,n){i&1&&(o(0,"div",0)(1,"header",1)(2,"div",2)(3,"div",3)(4,"button",4),C("click",function(){return n.toggleMenu()}),d(),o(5,"svg",5),s(6,"line",6)(7,"line",7)(8,"line",8),r()(),v(),o(9,"div",9),d(),o(10,"svg",10),s(11,"circle",11)(12,"circle",12)(13,"path",13),r(),v(),o(14,"h1",14),m(15,"Bluesound"),r()()(),g(16,ee,2,1,"button",15),r()(),o(17,"main",16)(18,"div",17)(19,"h2",18),m(20,"Musik streamen"),r(),o(21,"p",19),m(22,"W\xE4hle eine Quelle um loszulegen"),r()(),o(23,"div",20),f(24,oe,9,8,"a",21,Z),r(),g(26,se,3,1,"div",22)(27,_e,3,0,"div",22),o(28,"a",23),d(),o(29,"svg",24),s(30,"rect",25)(31,"circle",12)(32,"path",26),r(),v(),o(33,"span"),m(34,"Bluesound Players verwalten"),r()()()()),i&2&&(a(16),y(n.auth.isLoggedIn()?16:-1),a(8),x(n.sources),a(2),y(n.isLoading()?26:n.historySections().length>0?27:-1))},dependencies:[j,N],styles:[".safe-area-top[_ngcontent-%COMP%]{padding-top:env(safe-area-inset-top,0)}.history-section[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeInUp .4s ease forwards;opacity:0}@keyframes _ngcontent-%COMP%_fadeInUp{0%{opacity:0;transform:translateY(12px)}to{opacity:1;transform:translateY(0)}}.line-clamp-2[_ngcontent-%COMP%]{display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical;overflow:hidden}.hover\\:scale-102[_ngcontent-%COMP%]:hover{transform:scale(1.02)}.active\\:scale-98[_ngcontent-%COMP%]:active{transform:scale(.98)}"]})};export{Q as HomeComponent};
