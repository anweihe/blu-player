import{e as ce,g as me}from"./chunk-DFEYJVTO.js";import{d as se,e as F,j as U}from"./chunk-F3JCDRW3.js";import{$a as g,Ja as C,M as j,Mb as y,Q as ee,Qb as ae,R as k,Rb as le,Sa as s,Ta as c,Ua as te,Va as H,W as E,Wa as L,X as S,Xa as _,Y as f,Ya as r,Z as D,Za as l,_a as b,ab as h,bb as P,ca as M,cb as T,db as ne,eb as v,fb as G,gb as m,ha as z,lb as ie,mb as x,o as w,ob as d,pb as q,qb as u,rb as oe,ua as I,wa as $,xa as o,xb as re,yb as A}from"./chunk-F7VV2WDX.js";var R=class i{http=k(le);auth=k(U);apiBaseUrl="/Qobuz";getNewReleases(t=0,e=50){return this.http.get(`${this.apiBaseUrl}?handler=NewReleases`,{params:{offset:t.toString(),limit:e.toString()},headers:this.auth.getAuthHeaders()}).pipe(w(n=>n.albums??{items:[],total:0,offset:0,limit:e}))}getAlbumCharts(t=0,e=50){return this.http.get(`${this.apiBaseUrl}?handler=AlbumCharts`,{params:{offset:t.toString(),limit:e.toString()},headers:this.auth.getAuthHeaders()}).pipe(w(n=>n.albums??{items:[],total:0,offset:0,limit:e}))}getAlbum(t){return this.http.get(`${this.apiBaseUrl}?handler=Album`,{params:{albumId:t},headers:this.auth.getAuthHeaders()})}getFeaturedPlaylists(t,e=0,n=50){let a=new ae().set("offset",e.toString()).set("limit",n.toString());return t?.length&&(a=a.set("genreIds",t.join(","))),this.http.get(`${this.apiBaseUrl}?handler=FeaturedPlaylists`,{params:a,headers:this.auth.getAuthHeaders()}).pipe(w(p=>p.playlists??{items:[],total:0,offset:0,limit:n}))}getUserPlaylists(t=0,e=50){return this.http.get(`${this.apiBaseUrl}?handler=UserPlaylists`,{params:{offset:t.toString(),limit:e.toString()},headers:this.auth.getAuthHeaders()}).pipe(w(n=>n.playlists??{items:[],total:0,offset:0,limit:e}))}getPlaylist(t){return this.http.get(`${this.apiBaseUrl}?handler=Playlist`,{params:{playlistId:t.toString()},headers:this.auth.getAuthHeaders()})}getArtistPage(t){return this.http.get(`${this.apiBaseUrl}?handler=ArtistPage`,{params:{artistId:t.toString()},headers:this.auth.getAuthHeaders()})}getArtistDiscography(t,e="all",n=0,a=50,p="release_date"){return this.http.get(`${this.apiBaseUrl}?handler=ArtistDiscography`,{params:{artistId:t.toString(),releaseType:e,offset:n.toString(),limit:a.toString(),sort:p},headers:this.auth.getAuthHeaders()})}getFavoriteAlbums(t=0,e=50){return this.http.get(`${this.apiBaseUrl}?handler=FavoriteAlbums`,{params:{offset:t.toString(),limit:e.toString()},headers:this.auth.getAuthHeaders()}).pipe(w(n=>n.albums??{items:[],total:0,offset:0,limit:e}))}getFavoriteTracks(t=0,e=50){return this.http.get(`${this.apiBaseUrl}?handler=FavoriteTracks`,{params:{offset:t.toString(),limit:e.toString()},headers:this.auth.getAuthHeaders()}).pipe(w(n=>n.tracks?.items??[]))}getFavoriteArtists(t=0,e=50){return this.http.get(`${this.apiBaseUrl}?handler=FavoriteArtists`,{params:{offset:t.toString(),limit:e.toString()},headers:this.auth.getAuthHeaders()})}search(t,e=20){return this.http.get(`${this.apiBaseUrl}?handler=Search`,{params:{query:t,limit:e.toString()},headers:this.auth.getAuthHeaders()}).pipe(w(n=>({albums:n.albums?.items??[],artists:n.artists?.items??[],playlists:n.playlists?.items??[],tracks:n.tracks?.items??[]})))}getTrackStreamUrl(t,e=27){return this.http.get(`${this.apiBaseUrl}?handler=TrackStreamUrl`,{params:{trackId:t.toString(),formatId:e.toString()},headers:this.auth.getAuthHeaders()}).pipe(w(n=>n.url))}getAlbumInfo(t,e,n){return this.http.get(`${this.apiBaseUrl}?handler=AlbumInfo`,{params:{albumId:t,albumTitle:e,artistName:n},headers:this.auth.getAuthHeaders()}).pipe(w(a=>{if(!a.success)throw new Error(a.error||"Album-Info nicht verf\xFCgbar");return{style:a.style||"",summary:a.summary||""}}))}getGenres(){return this.http.get(`${this.apiBaseUrl}?handler=Genres`,{headers:this.auth.getAuthHeaders()}).pipe(w(t=>t.genres??[]))}static \u0275fac=function(e){return new(e||i)};static \u0275prov=j({token:i,factory:i.\u0275fac,providedIn:"root"})};var Q=class i{constructor(t){this.router=t}isOpen=z(!1);position=z({x:0,y:0});items=z([]);openTrackMenu(t,e,n){t.preventDefault(),t.stopPropagation();let a=[];n?.onPlay&&a.push({label:"Jetzt abspielen",icon:"play",action:n.onPlay}),n?.onAddToQueue&&a.push({label:"Zur Warteschlange",icon:"queue",action:n.onAddToQueue}),a.length>0&&(e.album?.id||e.performer?.id)&&a.push({label:"",action:()=>{},divider:!0}),e.album?.id&&a.push({label:"Zum Album",icon:"album",action:()=>this.router.navigate(["/qobuz/album",e.album.id])}),e.performer?.id&&a.push({label:"Zur K\xFCnstlerseite",icon:"artist",action:()=>this.router.navigate(["/qobuz/artist",e.performer.id])}),n?.onAddToFavorites&&(a.push({label:"",action:()=>{},divider:!0}),a.push({label:"Zu Favoriten",icon:"favorite",action:n.onAddToFavorites})),this.openAt(t.clientX,t.clientY,a)}openAlbumMenu(t,e){t.preventDefault(),t.stopPropagation();let n=[];e.id&&n.push({label:"Zum Album",icon:"album",action:()=>this.router.navigate(["/qobuz/album",e.id])}),e.artist?.id&&n.push({label:"Zur K\xFCnstlerseite",icon:"artist",action:()=>this.router.navigate(["/qobuz/artist",e.artist.id])}),this.openAt(t.clientX,t.clientY,n)}openAt(t,e,n){let p=n.filter(N=>!N.divider).length*44+n.filter(N=>N.divider).length*9,V=10,de=100;t+200>window.innerWidth-V&&(t=window.innerWidth-200-V),t<V&&(t=V),e+p>window.innerHeight-de&&(e=e-p-8),e<V&&(e=V),this.position.set({x:t,y:e}),this.items.set(n),this.isOpen.set(!0)}close(){this.isOpen.set(!1),this.items.set([])}static \u0275fac=function(e){return new(e||i)(ee(se))};static \u0275prov=j({token:i,factory:i.\u0275fac,providedIn:"root"})};var ue=i=>["/qobuz/album",i];function pe(i,t){if(i&1&&b(0,"img",2),i&2){let e=m();_("src",(e.album.image==null?null:e.album.image.large)||(e.album.image==null?null:e.album.image.small),I)("alt",e.album.title)}}function fe(i,t){i&1&&(r(0,"div",3),f(),r(1,"svg",20),b(2,"path",21),l()())}function be(i,t){i&1&&(r(0,"span",10),d(1," Hi-Res "),l())}function _e(i,t){if(i&1&&(r(0,"span",11),d(1),l()),i&2){let e=m();o(),u(" #",e.rank," ")}}function ge(i,t){if(i&1&&(r(0,"p",18),d(1),l()),i&2){let e=m();o(),u(" ",e.album.artist==null?null:e.album.artist.name," ")}}function he(i,t){if(i&1&&(r(0,"p",19),d(1),l()),i&2){let e=m();o(),u(" ",e.getYear(e.album.released_at)," ")}}var W=class i{contextMenu=k(Q);album;compact=!1;showRank=!1;rank;showYear=!1;play=new M;onPlayClick(t){t.preventDefault(),t.stopPropagation(),this.play.emit(this.album)}onMenuClick(t){t.preventDefault(),t.stopPropagation(),this.contextMenu.openAlbumMenu(t,this.album)}getYear(t){return new Date(t*1e3).getFullYear().toString()}static \u0275fac=function(e){return new(e||i)};static \u0275cmp=C({type:i,selectors:[["app-album-card"]],inputs:{album:"album",compact:"compact",showRank:"showRank",rank:"rank",showYear:"showYear"},outputs:{play:"play"},decls:21,vars:15,consts:[[1,"album-card","group","block","bg-bg-card","border","border-border-subtle","rounded-lg","overflow-hidden","transition-all","hover:border-border-accent","hover:-translate-y-0.5","hover:shadow-lg",3,"routerLink"],[1,"album-cover","relative","aspect-square","bg-bg-secondary","overflow-hidden"],["loading","lazy",1,"w-full","h-full","object-cover","transition-transform","group-hover:scale-105",3,"src","alt"],[1,"w-full","h-full","flex","items-center","justify-center","text-text-muted"],["type","button","title","Mehr Optionen",1,"context-menu-btn","absolute","top-2","right-2","w-8","h-8","rounded-full","bg-black/60","text-white","flex","items-center","justify-center","opacity-0","group-hover:opacity-100","transition-opacity","z-10",3,"click"],["viewBox","0 0 24 24","fill","currentColor",1,"w-5","h-5"],["cx","12","cy","5","r","2"],["cx","12","cy","12","r","2"],["cx","12","cy","19","r","2"],[1,"absolute","top-2","left-2","flex","flex-col","gap-1"],[1,"px-1.5","py-0.5","bg-accent-qobuz/90","text-white","text-[10px]","font-bold","rounded"],[1,"px-1.5","py-0.5","bg-black/70","text-white","text-[10px]","font-bold","rounded"],[1,"absolute","inset-0","bg-black/40","opacity-0","group-hover:opacity-100","transition-opacity","flex","items-center","justify-center","pointer-events-none"],[1,"w-12","h-12","rounded-full","bg-accent-qobuz","text-white","flex","items-center","justify-center","shadow-lg","transform","scale-90","group-hover:scale-100","transition-transform","pointer-events-auto",3,"click"],["xmlns","http://www.w3.org/2000/svg","fill","currentColor","viewBox","0 0 24 24",1,"w-6","h-6","ml-0.5"],["d","M8 5v14l11-7z"],[1,"p-3"],[1,"text-sm","font-semibold","truncate"],[1,"text-xs","text-text-muted","truncate","mt-0.5"],[1,"text-[10px]","text-text-muted","mt-1"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"w-12","h-12","opacity-30"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","1","d","M9 19V6l12-3v13M9 19c0 1.105-1.343 2-3 2s-3-.895-3-2 1.343-2 3-2 3 .895 3 2zm12-3c0 1.105-1.343 2-3 2s-3-.895-3-2 1.343-2 3-2 3 .895 3 2zM9 10l12-3"]],template:function(e,n){e&1&&(r(0,"a",0)(1,"div",1),s(2,pe,1,2,"img",2)(3,fe,3,0,"div",3),r(4,"button",4),v("click",function(p){return n.onMenuClick(p)}),f(),r(5,"svg",5),b(6,"circle",6)(7,"circle",7)(8,"circle",8),l()(),D(),r(9,"div",9),s(10,be,2,0,"span",10),s(11,_e,2,1,"span",11),l(),r(12,"div",12)(13,"button",13),v("click",function(p){return n.onPlayClick(p)}),f(),r(14,"svg",14),b(15,"path",15),l()()()(),D(),r(16,"div",16)(17,"h3",17),d(18),l(),s(19,ge,2,1,"p",18),s(20,he,2,1,"p",19),l()()),e&2&&(x("compact",n.compact),_("routerLink",A(13,ue,n.album.id)),o(2),c(n.album.image!=null&&n.album.image.large||n.album.image!=null&&n.album.image.small?2:3),o(8),c(n.album.hires_streamable||n.album.hires||n.album.maximum_bit_depth&&n.album.maximum_bit_depth>16?10:-1),o(),c(n.showRank&&n.rank?11:-1),o(5),x("p-2",n.compact),o(),x("text-xs",n.compact),o(),u(" ",n.album.title," "),o(),c(n.album.artist!=null&&n.album.artist.name?19:-1),o(),c(n.showYear&&n.album.released_at?20:-1))},dependencies:[y,F],styles:[".album-card.compact[_ngcontent-%COMP%]   .album-cover[_ngcontent-%COMP%]{border-radius:6px}.context-menu-btn[_ngcontent-%COMP%]:hover{background:#000c}"]})};var xe=i=>["/qobuz/playlist",i];function Ce(i,t){if(i&1&&b(0,"img",2),i&2){let e=m();_("src",e.getCoverImage(),I)("alt",e.playlist.name)}}function ve(i,t){i&1&&(r(0,"div",3),f(),r(1,"svg",13),b(2,"path",14),l()())}function ye(i,t){if(i&1&&(r(0,"div",4),d(1),l()),i&2){let e=m();o(),u(" ",e.formatDuration(e.playlist.duration)," ")}}function we(i,t){if(i&1&&(r(0,"p",12),d(1),l()),i&2){let e=m();o(),u(" von ",e.playlist.owner==null?null:e.playlist.owner.name," ")}}var Y=class i{playlist;showOwner=!1;play=new M;getCoverImage(){return this.playlist.images300?.[0]||this.playlist.images150?.[0]||this.playlist.images?.[0]}onPlayClick(t){t.preventDefault(),t.stopPropagation(),this.play.emit(this.playlist)}formatDuration(t){let e=Math.floor(t/3600),n=Math.floor(t%3600/60);return e>0?`${e}h ${n}m`:`${n} Min`}static \u0275fac=function(e){return new(e||i)};static \u0275cmp=C({type:i,selectors:[["app-playlist-card"]],inputs:{playlist:"playlist",showOwner:"showOwner"},outputs:{play:"play"},decls:15,vars:8,consts:[[1,"playlist-card","group","block","bg-bg-card","border","border-border-subtle","rounded-lg","overflow-hidden","transition-all","hover:border-border-accent","hover:-translate-y-0.5","hover:shadow-lg",3,"routerLink"],[1,"playlist-cover","relative","aspect-square","bg-bg-secondary","overflow-hidden"],["loading","lazy",1,"w-full","h-full","object-cover","transition-transform","group-hover:scale-105",3,"src","alt"],[1,"w-full","h-full","flex","items-center","justify-center","text-text-muted","bg-gradient-to-br","from-bg-secondary","to-bg-card"],[1,"absolute","bottom-2","right-2","px-1.5","py-0.5","bg-black/70","text-white","text-[10px]","font-medium","rounded"],[1,"absolute","inset-0","bg-black/40","opacity-0","group-hover:opacity-100","transition-opacity","flex","items-center","justify-center"],[1,"w-12","h-12","rounded-full","bg-accent-qobuz","text-white","flex","items-center","justify-center","shadow-lg","transform","scale-90","group-hover:scale-100","transition-transform",3,"click"],["xmlns","http://www.w3.org/2000/svg","fill","currentColor","viewBox","0 0 24 24",1,"w-6","h-6","ml-0.5"],["d","M8 5v14l11-7z"],[1,"p-3"],[1,"text-sm","font-semibold","truncate"],[1,"text-xs","text-text-muted","mt-0.5"],[1,"text-[10px]","text-text-muted","mt-1","truncate"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"w-12","h-12","opacity-30"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","1","d","M4 6h16M4 10h16M4 14h16M4 18h16"]],template:function(e,n){e&1&&(r(0,"a",0)(1,"div",1),s(2,Ce,1,2,"img",2)(3,ve,3,0,"div",3),s(4,ye,2,1,"div",4),r(5,"div",5)(6,"button",6),v("click",function(p){return n.onPlayClick(p)}),f(),r(7,"svg",7),b(8,"path",8),l()()()(),D(),r(9,"div",9)(10,"h3",10),d(11),l(),r(12,"p",11),d(13),l(),s(14,we,2,1,"p",12),l()()),e&2&&(_("routerLink",A(6,xe,n.playlist.id)),o(2),c(n.getCoverImage()?2:3),o(2),c(n.playlist.duration?4:-1),o(7),u(" ",n.playlist.name," "),o(2),u(" ",n.playlist.tracks_count," Tracks "),o(),c(n.playlist.owner!=null&&n.playlist.owner.name&&n.showOwner?14:-1))},dependencies:[y,F],encapsulation:2})};var ke=i=>["/qobuz/artist",i],Ee=i=>["/qobuz/album",i];function Se(i,t){i&1&&(r(0,"div",11),b(1,"span")(2,"span")(3,"span"),l())}function Me(i,t){if(i&1&&(r(0,"span",12),d(1),l()),i&2){let e=m(2);o(),q(e.trackNumber)}}function Pe(i,t){if(i&1&&(r(0,"div",1),s(1,Se,4,0,"div",11)(2,Me,2,1,"span",12),l()),i&2){let e=m();o(),c(e.isPlaying?1:2)}}function Te(i,t){if(i&1&&b(0,"img",13),i&2){let e=m(2);_("src",(e.track.album==null||e.track.album.image==null?null:e.track.album.image.small)||(e.track.album==null||e.track.album.image==null?null:e.track.album.image.thumbnail),I)("alt",e.track.album==null?null:e.track.album.title)}}function Ae(i,t){if(i&1&&(r(0,"div",2),s(1,Te,1,2,"img",13),l()),i&2){let e=m();o(),c(!(e.track.album==null||e.track.album.image==null)&&e.track.album.image.small||!(e.track.album==null||e.track.album.image==null)&&e.track.album.image.thumbnail?1:-1)}}function ze(i,t){if(i&1&&(r(0,"span",5),d(1),l()),i&2){let e=m();o(),u(" (",e.track.version,")")}}function Ie(i,t){if(i&1){let e=T();r(0,"a",14),v("click",function(a){return E(e),S(a.stopPropagation())}),d(1),l()}if(i&2){let e=m();_("routerLink",A(2,ke,e.track.performer==null?null:e.track.performer.id)),o(),u(" ",e.track.performer==null?null:e.track.performer.name," ")}}function Fe(i,t){i&1&&(r(0,"span"),d(1," \xB7 "),l())}function Oe(i,t){if(i&1){let e=T();r(0,"a",14),v("click",function(a){return E(e),S(a.stopPropagation())}),d(1),l()}if(i&2){let e=m();_("routerLink",A(2,Ee,e.track.album==null?null:e.track.album.id)),o(),u(" ",e.track.album==null?null:e.track.album.title," ")}}function Ve(i,t){i&1&&(r(0,"span",8),d(1," Hi-Res "),l())}function Ge(i,t){if(i&1){let e=T();r(0,"button",15),v("click",function(a){E(e);let p=m();return S(p.onMenuClick(a))}),f(),r(1,"svg",16),b(2,"path",17),l()()}}var Z=class i{track;trackNumber;showNumber=!0;showArt=!0;showArtist=!0;showAlbum=!1;showQuality=!1;showMenu=!0;isPlaying=!1;play=new M;menu=new M;formatDuration=me;onTrackClick(){this.play.emit(this.track)}onMenuClick(t){t.stopPropagation(),this.menu.emit({track:this.track,event:t})}static \u0275fac=function(e){return new(e||i)};static \u0275cmp=C({type:i,selectors:[["app-track-item"]],inputs:{track:"track",trackNumber:"trackNumber",showNumber:"showNumber",showArt:"showArt",showArtist:"showArtist",showAlbum:"showAlbum",showQuality:"showQuality",showMenu:"showMenu",isPlaying:"isPlaying"},outputs:{play:"play",menu:"menu"},decls:15,vars:16,consts:[[1,"track-item","flex","items-center","gap-3","p-3","rounded-lg","transition-colors","cursor-pointer",3,"click"],[1,"w-6","flex-shrink-0","text-center"],[1,"w-10","h-10","rounded","bg-bg-secondary","overflow-hidden","flex-shrink-0"],[1,"flex-1","min-w-0"],[1,"text-sm","font-medium","truncate"],[1,"text-text-muted","font-normal"],[1,"text-xs","text-text-muted","truncate"],[1,"hover:text-accent-qobuz","hover:underline",3,"routerLink"],[1,"px-1.5","py-0.5","bg-accent-qobuz/10","text-accent-qobuz","text-[10px]","font-semibold","rounded"],[1,"text-sm","text-text-muted","tabular-nums"],[1,"w-8","h-8","rounded-full","text-text-muted","hover:text-text-primary","hover:bg-bg-secondary","flex","items-center","justify-center","transition-colors"],[1,"playing-indicator"],[1,"text-sm","text-text-muted"],[1,"w-full","h-full","object-cover",3,"src","alt"],[1,"hover:text-accent-qobuz","hover:underline",3,"click","routerLink"],[1,"w-8","h-8","rounded-full","text-text-muted","hover:text-text-primary","hover:bg-bg-secondary","flex","items-center","justify-center","transition-colors",3,"click"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"w-4","h-4"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 5v.01M12 12v.01M12 19v.01M12 6a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2z"]],template:function(e,n){e&1&&(r(0,"div",0),v("click",function(){return n.onTrackClick()}),s(1,Pe,3,1,"div",1),s(2,Ae,2,1,"div",2),r(3,"div",3)(4,"p",4),d(5),s(6,ze,2,1,"span",5),l(),r(7,"p",6),s(8,Ie,2,4,"a",7),s(9,Fe,2,0,"span"),s(10,Oe,2,4,"a",7),l()(),s(11,Ve,2,0,"span",8),r(12,"span",9),d(13),l(),s(14,Ge,3,0,"button",10),l()),e&2&&(x("hover:bg-bg-card",!n.isPlaying)("bg-accent-qobuz/10",n.isPlaying),o(),c(n.showNumber?1:-1),o(),c(n.showArt?2:-1),o(2),x("text-accent-qobuz",n.isPlaying),o(),u(" ",n.track.title," "),o(),c(n.track.version?6:-1),o(2),c(n.showArtist&&(n.track.performer!=null&&n.track.performer.name)?8:-1),o(),c(n.showArtist&&n.showAlbum&&(n.track.performer!=null&&n.track.performer.name)&&(n.track.album!=null&&n.track.album.title)?9:-1),o(),c(n.showAlbum&&(n.track.album!=null&&n.track.album.title)?10:-1),o(),c(n.showQuality&&(n.track.hires_streamable||n.track.hires||n.track.maximum_bit_depth&&n.track.maximum_bit_depth>16)?11:-1),o(2),u(" ",n.formatDuration(n.track.duration)," "),o(),c(n.showMenu?14:-1))},dependencies:[y,F],styles:[".playing-indicator[_ngcontent-%COMP%]{display:flex;align-items:flex-end;justify-content:center;gap:2px;height:14px}.playing-indicator[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{width:3px;background:var(--color-accent-qobuz);border-radius:1px;animation:_ngcontent-%COMP%_equalizer .8s ease-in-out infinite}.playing-indicator[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(1){height:60%;animation-delay:0s}.playing-indicator[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(2){height:100%;animation-delay:.2s}.playing-indicator[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(3){height:40%;animation-delay:.4s}@keyframes _ngcontent-%COMP%_equalizer{0%,to{transform:scaleY(.5)}50%{transform:scaleY(1)}}"]})};var Qe=i=>["/qobuz/artist",i];function De(i,t){if(i&1&&b(0,"img",2),i&2){let e=m();_("src",e.getArtistImage(),I)("alt",e.artist.name)}}function He(i,t){i&1&&(r(0,"div",3),f(),r(1,"svg",6),b(2,"path",7),l()())}function Le(i,t){if(i&1&&(r(0,"p",5),d(1),l()),i&2){let e=m();o(),oe(" ",e.artist.albums_count," ",e.artist.albums_count===1?"Album":"Alben"," ")}}var K=class i{artist;getArtistImage(){return ce(this.artist)}static \u0275fac=function(e){return new(e||i)};static \u0275cmp=C({type:i,selectors:[["app-artist-card"]],inputs:{artist:"artist"},decls:7,vars:6,consts:[[1,"artist-card","group","block","text-center","p-4","rounded-xl","bg-bg-card","border","border-border-subtle","transition-all","hover:border-border-accent","hover:-translate-y-0.5","hover:shadow-lg",3,"routerLink"],[1,"w-24","h-24","mx-auto","mb-3","rounded-full","overflow-hidden","bg-bg-secondary","ring-2","ring-transparent","group-hover:ring-accent-qobuz/30","transition-all"],["loading","lazy",1,"w-full","h-full","object-cover",3,"src","alt"],[1,"w-full","h-full","flex","items-center","justify-center","text-text-muted","bg-gradient-to-br","from-bg-secondary","to-bg-card"],[1,"text-sm","font-semibold","truncate"],[1,"text-xs","text-text-muted","mt-1"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"w-10","h-10","opacity-30"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","1.5","d","M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"]],template:function(e,n){e&1&&(r(0,"a",0)(1,"div",1),s(2,De,1,2,"img",2)(3,He,3,0,"div",3),l(),r(4,"h3",4),d(5),l(),s(6,Le,2,2,"p",5),l()),e&2&&(_("routerLink",A(4,Qe,n.artist.id)),o(2),c(n.getArtistImage()?2:3),o(3),u(" ",n.artist.name," "),o(),c(n.artist.albums_count?6:-1))},dependencies:[y,F],encapsulation:2})};var Be=()=>[1,2,3],je=(i,t)=>t.id;function qe(i,t){if(i&1){let e=T();g(0,"button",2),G("click",function(){let a=E(e).$implicit,p=m();return S(p.toggleGenre(a))}),d(1),h()}if(i&2){let e=t.$implicit,n=m();x("active",n.isSelected(e.id)),o(),u(" ",e.name," ")}}function Re(i,t){i&1&&P(0,"div",4)}function Ne(i,t){i&1&&H(0,Re,1,0,"div",4,te),i&2&&L(re(0,Be))}var X=class i{qobuzApi=k(R);multiSelect=!1;genreChange=new M;genres=z([]);selectedGenres=z([]);loading=z(!0);ngOnInit(){this.loadGenres()}loadGenres(){this.qobuzApi.getGenres().subscribe({next:t=>{this.genres.set(t),this.loading.set(!1)},error:()=>this.loading.set(!1)})}isSelected(t){return this.selectedGenres().includes(t)}toggleGenre(t){let e=this.selectedGenres();this.multiSelect?e.includes(t.id)?this.selectedGenres.set(e.filter(n=>n!==t.id)):this.selectedGenres.set([...e,t.id]):e.includes(t.id)?this.selectedGenres.set([]):this.selectedGenres.set([t.id]),this.emitChange()}clearSelection(){this.selectedGenres.set([]),this.emitChange()}emitChange(){let t=this.selectedGenres().map(e=>e.toString());this.genreChange.emit(t)}static \u0275fac=function(e){return new(e||i)};static \u0275cmp=C({type:i,selectors:[["app-genre-filter"]],inputs:{multiSelect:"multiSelect"},outputs:{genreChange:"genreChange"},decls:7,vars:3,consts:[[1,"genre-filter"],[1,"flex","gap-2","overflow-x-auto","pb-2","scrollbar-hide"],[1,"genre-chip","flex-shrink-0","px-4","py-2","rounded-full","text-sm","font-medium","transition-all",3,"click"],[1,"genre-chip","flex-shrink-0","px-4","py-2","rounded-full","text-sm","font-medium","transition-all",3,"active"],[1,"flex-shrink-0","w-20","h-9","bg-bg-secondary","rounded-full","animate-pulse"]],template:function(e,n){e&1&&(g(0,"div",0)(1,"div",1)(2,"button",2),G("click",function(){return n.clearSelection()}),d(3," Alle "),h(),H(4,qe,2,3,"button",3,je),s(6,Ne,2,1),h()()),e&2&&(o(2),x("active",n.selectedGenres().length===0),o(2),L(n.genres()),o(2),c(n.loading()?6:-1))},dependencies:[y],styles:[".scrollbar-hide[_ngcontent-%COMP%]{scrollbar-width:none;-ms-overflow-style:none}.scrollbar-hide[_ngcontent-%COMP%]::-webkit-scrollbar{display:none}.genre-chip[_ngcontent-%COMP%]{background:var(--color-bg-card);border:1px solid var(--color-border-subtle);color:var(--color-text-secondary)}.genre-chip[_ngcontent-%COMP%]:hover{background:var(--color-bg-secondary);border-color:var(--color-border-accent);color:var(--color-text-primary)}.genre-chip.active[_ngcontent-%COMP%]{background:var(--color-accent-qobuz);border-color:var(--color-accent-qobuz);color:#fff}"]})};var $e=(i,t)=>t.label;function Ue(i,t){i&1&&P(0,"div",2)}function We(i,t){i&1&&(f(),g(0,"svg",5),P(1,"circle",7)(2,"circle",8),h())}function Ye(i,t){i&1&&(f(),g(0,"svg",5),P(1,"path",9)(2,"circle",10),h())}function Ze(i,t){i&1&&(f(),g(0,"svg",6),P(1,"path",11),h())}function Ke(i,t){i&1&&(f(),g(0,"svg",5),P(1,"path",12),h())}function Xe(i,t){i&1&&(f(),g(0,"svg",5),P(1,"path",13),h())}function Je(i,t){if(i&1){let e=T();g(0,"button",4),G("click",function(){E(e);let a=m().$implicit,p=m(2);return S(p.onItemClick(a))}),s(1,We,3,0,":svg:svg",5)(2,Ye,3,0,":svg:svg",5)(3,Ze,2,0,":svg:svg",6)(4,Ke,2,0,":svg:svg",5)(5,Xe,2,0,":svg:svg",5),g(6,"span"),d(7),h()()}if(i&2){let e,n=m().$implicit;x("text-text-muted",n.disabled),ne("disabled",n.disabled),o(),c((e=n.icon)==="album"?1:e==="artist"?2:e==="play"?3:e==="queue"?4:e==="favorite"?5:-1),o(6),q(n.label)}}function et(i,t){if(i&1&&s(0,Ue,1,0,"div",2)(1,Je,8,5,"button",3),i&2){let e=t.$implicit;c(e.divider?0:1)}}function tt(i,t){if(i&1){let e=T();g(0,"div",0),G("click",function(){E(e);let a=m();return S(a.menuService.close())}),h(),g(1,"div",1),H(2,et,2,1,null,null,$e),h()}if(i&2){let e=m();o(),ie("top",e.menuService.position().y,"px")("left",e.menuService.position().x,"px"),x("animate-in",e.menuService.isOpen()),o(),L(e.menuService.items())}}var J=class i{menuService=k(Q);onEscape(){this.menuService.close()}onScroll(){this.menuService.close()}onItemClick(t){t.disabled||(t.action(),this.menuService.close())}static \u0275fac=function(e){return new(e||i)};static \u0275cmp=C({type:i,selectors:[["app-global-context-menu"]],hostBindings:function(e,n){e&1&&v("keydown.escape",function(){return n.onEscape()},$)("scroll",function(){return n.onScroll()},$)},decls:1,vars:1,consts:[[1,"fixed","inset-0","z-[1000]",3,"click"],[1,"context-menu","fixed","bg-bg-card","border","border-border-subtle","rounded-lg","shadow-xl","overflow-hidden","z-[1001]","min-w-[180px]"],[1,"h-px","bg-border-subtle","my-1"],[1,"context-menu-item","w-full","flex","items-center","gap-3","px-4","py-2.5","text-left","text-sm","transition-colors","hover:bg-bg-secondary","disabled:opacity-50","disabled:cursor-not-allowed",3,"text-text-muted","disabled"],[1,"context-menu-item","w-full","flex","items-center","gap-3","px-4","py-2.5","text-left","text-sm","transition-colors","hover:bg-bg-secondary","disabled:opacity-50","disabled:cursor-not-allowed",3,"click","disabled"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor","stroke-width","2",1,"w-4","h-4","text-text-muted"],["xmlns","http://www.w3.org/2000/svg","fill","currentColor","viewBox","0 0 24 24",1,"w-4","h-4","text-text-muted"],["cx","12","cy","12","r","10"],["cx","12","cy","12","r","3"],["d","M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"],["cx","12","cy","7","r","4"],["d","M8 5v14l11-7z"],["stroke-linecap","round","stroke-linejoin","round","d","M4 6h16M4 10h16M4 14h16M4 18h16"],["stroke-linecap","round","stroke-linejoin","round","d","M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"]],template:function(e,n){e&1&&s(0,tt,4,6),e&2&&c(n.menuService.isOpen()?0:-1)},dependencies:[y],styles:[".context-menu[_ngcontent-%COMP%]{transform-origin:top left}.animate-in[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_menu-appear .15s ease-out}@keyframes _ngcontent-%COMP%_menu-appear{0%{opacity:0;transform:scale(.95)}to{opacity:1;transform:scale(1)}}"]})};export{R as a,Q as b,W as c,Y as d,Z as e,K as f,X as g,J as h};
