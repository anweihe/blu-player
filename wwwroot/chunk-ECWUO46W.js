import{e as Y}from"./chunk-ORHIZ2KN.js";import"./chunk-5GC77CUC.js";import"./chunk-QC44KA67.js";import"./chunk-O66JSED4.js";import"./chunk-NROGR6IW.js";import{e as G,f as Q,k as Z,l as k}from"./chunk-N35TVY3C.js";import{a as J}from"./chunk-GT7YEPYQ.js";import{$b as A,Ab as h,Bb as m,Cb as V,Db as C,Ga as O,Ja as a,Kb as $,N as D,Nb as j,S as u,Va as R,X as y,Y as x,Z as d,_ as w,db as f,eb as g,ec as N,fb as E,gb as _,hb as b,ia as H,ib as L,j as F,jb as r,kb as n,lb as s,o as U,pb as I,rb as v,tb as c,y as B,yb as q}from"./chunk-TWVQ6WYG.js";var P=class i{http=u(N);auth=u(k);getHistory(){let e=this.auth.getProfileId();return e?this.http.get(`/Qobuz?handler=History&profileId=${encodeURIComponent(e)}`).pipe(U(t=>this.transformToSections(t)),B(()=>F([]))):F([])}transformToSections(e){let t=[];return e.qobuzPlaylists?.length>0&&t.push({title:"Zuletzt geh\xF6rt - Playlists",iconType:"qobuz",items:e.qobuzPlaylists.map(o=>this.transformPlaylist(o))}),e.qobuzAlbums?.length>0&&t.push({title:"Zuletzt geh\xF6rt - Alben",iconType:"qobuz",items:e.qobuzAlbums.map(o=>this.transformAlbum(o))}),e.tuneIn?.length>0&&t.push({title:"Zuletzt geh\xF6rt - Radio",iconType:"tunein",items:e.tuneIn.map(o=>this.transformTuneIn(o))}),e.radioParadise?.length>0&&t.push({title:"Zuletzt geh\xF6rt - Radio Paradise",iconType:"radioparadise",items:e.radioParadise.map(o=>this.transformRadioParadise(o))}),t}transformPlaylist(e){return{id:e.id,title:e.playlistName,imageUrl:e.coverUrl,type:"playlist",actionId:e.playlistId}}transformAlbum(e){return{id:e.id,title:e.albumName,subtitle:e.artist,imageUrl:e.coverUrl,type:"album",actionId:e.albumId}}transformTuneIn(e){return{id:e.id,title:e.title,imageUrl:e.imageUrl,type:"tunein",actionUrl:e.actionUrl}}transformRadioParadise(e){return{id:e.id,title:e.title,subtitle:e.quality,imageUrl:e.imageUrl,type:"radioparadise",actionUrl:e.actionUrl}}addAlbumToHistory(e,t,o,l){let p=this.auth.getProfileId();if(!p)return;let M=`history_albums_${p}`,S=this.getLocalHistory(M).filter(X=>X.albumId!==e);S.unshift({id:`album_${e}_${Date.now()}`,albumId:e,albumName:t,artist:o,coverUrl:l,type:"album"});let z=S.slice(0,20);localStorage.setItem(M,JSON.stringify(z))}addPlaylistToHistory(e,t,o){let l=this.auth.getProfileId();if(!l)return;let p=`history_playlists_${l}`,T=this.getLocalHistory(p).filter(z=>z.playlistId!==e);T.unshift({id:`playlist_${e}_${Date.now()}`,playlistId:e,playlistName:t,coverUrl:o,type:"playlist"});let S=T.slice(0,20);localStorage.setItem(p,JSON.stringify(S))}getLocalHistory(e){try{let t=localStorage.getItem(e);return t?JSON.parse(t):[]}catch{return[]}}static \u0275fac=function(t){return new(t||i)};static \u0275prov=D({token:i,factory:i.\u0275fac,providedIn:"root"})};var te=()=>[1,2],ie=()=>[1,2,3,4],K=(i,e)=>e.id,oe=(i,e)=>e.title;function re(i,e){if(i&1){let t=I();r(0,"button",26),v("click",function(){y(t);let l=c();return x(l.openProfileSwitcher())}),m(1),n()}if(i&2){let t=c();q("background-color",t.profileService.activeProfile()?t.profileService.getProfileColor(t.profileService.activeProfile().id):"var(--color-accent-qobuz)"),a(),C(" ",t.profileInitial()," ")}}function ne(i,e){if(i&1){let t=I();r(0,"app-profile-switcher",27),v("closed",function(){y(t);let l=c();return x(l.closeProfileSwitcher())})("profileSelected",function(l){y(t);let p=c();return x(p.onProfileSelected(l))}),n()}}function ae(i,e){if(i&1&&(d(),r(0,"svg",34),s(1,"circle",35)(2,"circle",36),n()),i&2){let t=c().$implicit;h(t.colorClass)}}function le(i,e){if(i&1&&(d(),r(0,"svg",37),s(1,"circle",38)(2,"path",39)(3,"path",40)(4,"circle",41),n()),i&2){let t=c().$implicit;h(t.colorClass)}}function se(i,e){if(i&1&&(d(),r(0,"svg",37),s(1,"path",42)(2,"path",43)(3,"path",44),n()),i&2){let t=c().$implicit;h(t.colorClass)}}function ce(i,e){if(i&1&&(r(0,"a",28)(1,"div",29),f(2,ae,3,2,":svg:svg",30)(3,le,5,2,":svg:svg",31)(4,se,4,2,":svg:svg",31),n(),r(5,"span",32),m(6),n(),r(7,"span",33),m(8),n()()),i&2){let t,o=e.$implicit;h("hover:border-"+o.hoverBorderClass),L("routerLink",o.route),a(),h(o.bgClass),a(),g((t=o.id)==="qobuz"?2:t==="tunein"?3:t==="radioparadise"?4:-1),a(4),V(o.name),a(2),V(o.description)}}function de(i,e){i&1&&(r(0,"div",48),s(1,"div",49)(2,"div",50),n())}function me(i,e){i&1&&(r(0,"div",45),s(1,"div",46),r(2,"div",47),_(3,de,3,0,"div",48,E),n()()),i&2&&(a(3),b($(0,ie)))}function pe(i,e){i&1&&(r(0,"div",20),_(1,me,5,1,"div",45,E),n()),i&2&&(a(),b($(0,te)))}function ue(i,e){if(i&1&&s(0,"img",57),i&2){let t=c().$implicit;L("src",t.imageUrl,O)("alt",t.title)}}function fe(i,e){i&1&&(d(),s(0,"circle",9)(1,"path",63)(2,"circle",64))}function ge(i,e){i&1&&(d(),s(0,"path",65)(1,"path",66)(2,"path",67))}function he(i,e){i&1&&(d(),s(0,"path",68)(1,"circle",69)(2,"circle",70))}function _e(i,e){if(i&1&&(r(0,"div",61),d(),r(1,"svg",62),f(2,fe,3,0)(3,ge,3,0)(4,he,3,0),n()()),i&2){let t,o=c(2).$implicit,l=c(2);h(l.getPlaceholderClass(o.iconType)),a(2),g((t=o.iconType)==="tunein"?2:t==="radioparadise"?3:4)}}function be(i,e){if(i&1&&(r(0,"span",60),m(1),n()),i&2){let t=c().$implicit;a(),C(" ",t.subtitle," ")}}function ye(i,e){if(i&1){let t=I();r(0,"button",56),v("click",function(){let l=y(t).$implicit,p=c(3);return x(p.playFromHistory(l))}),f(1,ue,1,2,"img",57)(2,_e,5,3,"div",58),r(3,"span",59),m(4),n(),f(5,be,2,1,"span",60),n()}if(i&2){let t=e.$implicit;a(),g(t.imageUrl?1:2),a(3),C(" ",t.title," "),a(),g(t.subtitle?5:-1)}}function xe(i,e){if(i&1&&(r(0,"section",52)(1,"h3",53),m(2),s(3,"span",54),n(),r(4,"div",47),_(5,ye,6,3,"button",55,K),n()()),i&2){let t=e.$implicit,o=e.$index;q("animation-delay",o*50,"ms"),a(2),C(" ",t.title," "),a(3),b(t.items)}}function ve(i,e){if(i&1&&(r(0,"div",20),_(1,xe,7,3,"section",51,oe),n()),i&2){let t=c();a(),b(t.historySections())}}var W=class i{auth=u(k);historyService=u(P);router=u(G);navState=u(J);isLoading=H(!0);historySections=H([]);sources=[{id:"qobuz",name:"Qobuz",description:"Hi-Res Streaming",route:"/qobuz",colorClass:"text-accent-qobuz",bgClass:"bg-accent-qobuz/15",hoverBorderClass:"accent-qobuz"},{id:"tunein",name:"TuneIn",description:"Internet Radio",route:"/tunein",colorClass:"text-orange-500",bgClass:"bg-orange-500/15",hoverBorderClass:"orange-500"},{id:"radioparadise",name:"Radio Paradise",description:"Eclectic Mix",route:"/radioparadise",colorClass:"text-emerald-500",bgClass:"bg-emerald-500/15",hoverBorderClass:"emerald-500"}];profileService=u(Z);showProfileSwitcher=H(!1);profileInitial=j(()=>{let e=this.profileService.activeProfile();return e?this.profileService.getProfileInitial(e.name):this.auth.userInitial()});openProfileSwitcher(){this.showProfileSwitcher.set(!0)}closeProfileSwitcher(){this.showProfileSwitcher.set(!1)}onProfileSelected(e){this.profileService.setActiveProfileId(e.id),this.closeProfileSwitcher(),this.loadHistory()}ngOnInit(){this.navState.usePreset("hidden"),this.loadHistory()}loadHistory(){this.isLoading.set(!0),this.historyService.getHistory().subscribe({next:e=>{this.historySections.set(e),this.isLoading.set(!1)},error:()=>{this.isLoading.set(!1)}})}toggleMenu(){this.navState.toggleHamburger()}getPlaceholderClass(e){switch(e){case"tunein":return"bg-gradient-to-br from-orange-500/15 to-orange-500/5 text-orange-500";case"radioparadise":return"bg-gradient-to-br from-emerald-500/15 to-emerald-500/5 text-emerald-500";default:return"bg-gradient-to-br from-accent-qobuz/15 to-accent-qobuz/5 text-accent-qobuz"}}playFromHistory(e){switch(e.type){case"album":this.router.navigate(["/qobuz/album",e.actionId]);break;case"playlist":this.router.navigate(["/qobuz/playlist",e.actionId]);break;case"tunein":this.router.navigate(["/tunein"]);break;case"radioparadise":this.router.navigate(["/radioparadise"]);break}}static \u0275fac=function(t){return new(t||i)};static \u0275cmp=R({type:i,selectors:[["app-home"]],decls:35,vars:3,consts:[[1,"min-h-screen","bg-bg-primary"],[1,"sticky","top-0","z-[60]","bg-bg-secondary","border-b","border-border-subtle","safe-area-top"],[1,"flex","items-center","justify-between","px-4","py-3.5","max-w-5xl","mx-auto"],[1,"flex","items-center","gap-3"],["aria-label","Men\xFC",1,"w-10","h-10","rounded-lg","bg-bg-card","border","border-border-subtle","flex","items-center","justify-center","hover:bg-bg-card-hover","transition-colors",3,"click"],["viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2",1,"w-5","h-5","text-text-primary"],["d","M4 6h16M4 12h16M4 18h16","stroke-linecap","round"],[1,"flex","items-center","gap-2.5"],["viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2",1,"w-7","h-7","text-accent-qobuz"],["cx","12","cy","12","r","10"],["cx","12","cy","12","r","3"],["d","M12 2v4M12 18v4M2 12h4M18 12h4"],[1,"text-xl","font-semibold","tracking-tight"],[1,"w-9","h-9","rounded-full","text-white","flex","items-center","justify-center","text-sm","font-semibold","cursor-pointer","hover:ring-2","hover:ring-accent-qobuz/50","transition-all",3,"background-color"],[1,"px-4","py-8","max-w-xl","mx-auto","pb-28"],[1,"text-center","mb-6"],[1,"text-2xl","font-bold","tracking-tight","mb-1.5"],[1,"text-sm","text-text-secondary"],[1,"grid","grid-cols-2","sm:grid-cols-3","gap-2","mb-8"],[1,"source-card","flex","flex-col","items-center","gap-1.5","p-3","bg-bg-card","border","border-border-accent","rounded-xl","cursor-pointer","transition-all","hover:bg-bg-card-hover","hover:-translate-y-0.5",3,"routerLink","class"],[1,"space-y-6"],[1,"flex","justify-center","mt-8"],["routerLink","/players",1,"inline-flex","items-center","justify-center","gap-2","px-4","py-2","bg-bg-card","border","border-border-accent","rounded-full","text-text-secondary","text-xs","hover:bg-bg-card-hover","hover:text-text-primary","hover:border-white/20","transition-all"],["viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2",1,"w-4","h-4"],["x","4","y","4","width","16","height","16","rx","2"],["d","M12 9v-2M12 17v-2M9 12H7M17 12h-2"],[1,"w-9","h-9","rounded-full","text-white","flex","items-center","justify-center","text-sm","font-semibold","cursor-pointer","hover:ring-2","hover:ring-accent-qobuz/50","transition-all",3,"click"],[3,"closed","profileSelected"],[1,"source-card","flex","flex-col","items-center","gap-1.5","p-3","bg-bg-card","border","border-border-accent","rounded-xl","cursor-pointer","transition-all","hover:bg-bg-card-hover","hover:-translate-y-0.5",3,"routerLink"],[1,"w-10","h-10","rounded-full","flex","items-center","justify-center"],["viewBox","0 0 100 100","fill","currentColor",1,"w-5","h-5",3,"class"],["viewBox","0 0 100 100","fill","none","stroke","currentColor","stroke-width","5",1,"w-5","h-5",3,"class"],[1,"text-xs","font-semibold","text-text-primary"],[1,"text-[10px]","text-text-muted","hidden","sm:block"],["viewBox","0 0 100 100","fill","currentColor",1,"w-5","h-5"],["cx","50","cy","50","r","45","fill","none","stroke","currentColor","stroke-width","6"],["cx","50","cy","50","r","20"],["viewBox","0 0 100 100","fill","none","stroke","currentColor","stroke-width","5",1,"w-5","h-5"],["cx","50","cy","50","r","45"],["d","M30 50a20 20 0 0140 0","stroke-width","4"],["d","M20 50a30 30 0 0160 0","stroke-width","4"],["cx","50","cy","50","r","5","fill","currentColor"],["d","M50 10L10 35l40 25 40-25-40-25z"],["d","M10 65l40 25 40-25"],["d","M10 50l40 25 40-25"],[1,"animate-pulse"],[1,"h-4","w-40","bg-bg-secondary","rounded","mb-3"],[1,"grid","grid-cols-3","sm:grid-cols-4","md:grid-cols-5","gap-2.5"],[1,"flex","flex-col","items-center","gap-2"],[1,"w-14","h-14","sm:w-16","sm:h-16","bg-bg-secondary","rounded-lg"],[1,"h-3","w-12","bg-bg-secondary","rounded"],[1,"history-section",3,"animation-delay"],[1,"history-section"],[1,"flex","items-center","gap-2","text-xs","font-semibold","text-text-muted","uppercase","tracking-wide","mb-3"],[1,"flex-1","h-px","bg-border-subtle"],[1,"history-item","flex","flex-col","items-center","p-2.5","bg-bg-card","rounded-lg","hover:bg-bg-card-hover","transition-all","hover:scale-102","active:scale-98"],[1,"history-item","flex","flex-col","items-center","p-2.5","bg-bg-card","rounded-lg","hover:bg-bg-card-hover","transition-all","hover:scale-102","active:scale-98",3,"click"],["loading","lazy",1,"w-14","h-14","sm:w-16","sm:h-16","rounded-md","object-cover","bg-bg-secondary","shadow-sm","mb-2",3,"src","alt"],[1,"w-14","h-14","sm:w-16","sm:h-16","rounded-md","flex","items-center","justify-center","mb-2",3,"class"],[1,"text-xs","font-medium","text-text-primary","text-center","line-clamp-2","leading-tight"],[1,"text-[10px]","text-text-muted","text-center","truncate","w-full","mt-0.5"],[1,"w-14","h-14","sm:w-16","sm:h-16","rounded-md","flex","items-center","justify-center","mb-2"],["viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","1.5",1,"w-6","h-6"],["d","M8 12a4 4 0 018 0"],["cx","12","cy","12","r","1","fill","currentColor"],["d","M12 3L2 9l10 6 10-6-10-6z"],["d","M2 17l10 6 10-6"],["d","M2 13l10 6 10-6"],["d","M9 18V5l12-2v13"],["cx","6","cy","18","r","3"],["cx","18","cy","16","r","3"]],template:function(t,o){t&1&&(r(0,"div",0)(1,"header",1)(2,"div",2)(3,"div",3)(4,"button",4),v("click",function(){return o.toggleMenu()}),d(),r(5,"svg",5),s(6,"path",6),n()(),w(),r(7,"div",7),d(),r(8,"svg",8),s(9,"circle",9)(10,"circle",10)(11,"path",11),n(),w(),r(12,"h1",12),m(13,"Bluesound"),n()()(),f(14,re,2,3,"button",13),n()(),f(15,ne,1,0,"app-profile-switcher"),r(16,"main",14)(17,"div",15)(18,"h2",16),m(19,"Musik streamen"),n(),r(20,"p",17),m(21,"W\xE4hle eine Quelle um loszulegen"),n()(),r(22,"div",18),_(23,ce,9,8,"a",19,K),n(),f(25,pe,3,1,"div",20)(26,ve,3,0,"div",20),r(27,"div",21)(28,"a",22),d(),r(29,"svg",23),s(30,"rect",24)(31,"circle",10)(32,"path",25),n(),w(),r(33,"span"),m(34,"Bluesound Players verwalten"),n()()()()()),t&2&&(a(14),g(o.auth.isLoggedIn()?14:-1),a(),g(o.showProfileSwitcher()?15:-1),a(8),b(o.sources),a(2),g(o.isLoading()?25:o.historySections().length>0?26:-1))},dependencies:[A,Q,Y],styles:[".safe-area-top[_ngcontent-%COMP%]{padding-top:env(safe-area-inset-top,0)}.history-section[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeInUp .4s ease forwards;opacity:0}@keyframes _ngcontent-%COMP%_fadeInUp{0%{opacity:0;transform:translateY(12px)}to{opacity:1;transform:translateY(0)}}.line-clamp-2[_ngcontent-%COMP%]{display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical;overflow:hidden}.hover\\:scale-102[_ngcontent-%COMP%]:hover{transform:scale(1.02)}.active\\:scale-98[_ngcontent-%COMP%]:active{transform:scale(.98)}"]})};export{W as HomeComponent};
