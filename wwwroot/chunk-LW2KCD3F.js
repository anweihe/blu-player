import{k as g}from"./chunk-3IHUMDY3.js";import{M as u,Qb as b,R as h,Rb as p,o as r}from"./chunk-NJ7QWJ2J.js";var m=class n{http=h(p);auth=h(g);apiBaseUrl="/Qobuz";getNewReleases(t=0,e=50){return this.http.get(`${this.apiBaseUrl}?handler=NewReleases`,{params:{offset:t.toString(),limit:e.toString()},headers:this.auth.getAuthHeaders()}).pipe(r(s=>s.albums??{items:[],total:0,offset:0,limit:e}))}getAlbumCharts(t=0,e=50){return this.http.get(`${this.apiBaseUrl}?handler=AlbumCharts`,{params:{offset:t.toString(),limit:e.toString()},headers:this.auth.getAuthHeaders()}).pipe(r(s=>s.albums??{items:[],total:0,offset:0,limit:e}))}getAlbum(t){return this.http.get(`${this.apiBaseUrl}?handler=Album`,{params:{albumId:t},headers:this.auth.getAuthHeaders()})}getFeaturedPlaylists(t,e,s=0,a=50){let o=new b().set("offset",s.toString()).set("limit",a.toString());return t&&(o=o.set("tags",t)),e?.length&&(o=o.set("genreIds",e.join(","))),this.http.get(`${this.apiBaseUrl}?handler=FeaturedPlaylists`,{params:o,headers:this.auth.getAuthHeaders()}).pipe(r(l=>l.playlists??{items:[],total:0,offset:0,limit:a}))}getUserPlaylists(t=0,e=50){return this.http.get(`${this.apiBaseUrl}?handler=UserPlaylists`,{params:{offset:t.toString(),limit:e.toString()},headers:this.auth.getAuthHeaders()}).pipe(r(s=>s.playlists??{items:[],total:0,offset:0,limit:e}))}getPlaylist(t){return this.http.get(`${this.apiBaseUrl}?handler=Playlist`,{params:{playlistId:t.toString()},headers:this.auth.getAuthHeaders()})}getArtistPage(t){return this.http.get(`${this.apiBaseUrl}?handler=ArtistPage`,{params:{artistId:t.toString()},headers:this.auth.getAuthHeaders()})}getArtistDiscography(t,e="all",s=0,a=50,o="release_date"){return this.http.get(`${this.apiBaseUrl}?handler=ArtistDiscography`,{params:{artistId:t.toString(),releaseType:e,offset:s.toString(),limit:a.toString(),sort:o},headers:this.auth.getAuthHeaders()}).pipe(r(l=>({items:l.albums?.map(i=>({id:i.id,title:i.title,artist:{id:0,name:i.artistName},image:{large:i.coverUrl,small:i.coverUrl},duration:0,tracks_count:i.tracksCount??0,released_at:i.releasedAt,release_type:i.typeLabel}))??[],total:l.albums?.length??0,offset:l.offset,limit:a,hasMore:l.hasMore})))}getFavoriteAlbums(t=0,e=50){return this.http.get(`${this.apiBaseUrl}?handler=FavoriteAlbums`,{params:{offset:t.toString(),limit:e.toString()},headers:this.auth.getAuthHeaders()}).pipe(r(s=>s.albums??{items:[],total:0,offset:0,limit:e}))}getFavoriteTracks(t=0,e=50){return this.http.get(`${this.apiBaseUrl}?handler=FavoriteTracks`,{params:{offset:t.toString(),limit:e.toString()},headers:this.auth.getAuthHeaders()}).pipe(r(s=>s.tracks?.items??[]))}getFavoriteArtists(t=0,e=50){return this.http.get(`${this.apiBaseUrl}?handler=FavoriteArtists`,{params:{offset:t.toString(),limit:e.toString()},headers:this.auth.getAuthHeaders()})}search(t,e=20,s=0){return this.http.get(`${this.apiBaseUrl}?handler=Search`,{params:{query:t,limit:e.toString(),offset:s.toString()},headers:this.auth.getAuthHeaders()})}getTrackStreamUrl(t,e=27){return this.http.get(`${this.apiBaseUrl}?handler=TrackStreamUrl`,{params:{trackId:t.toString(),formatId:e.toString()},headers:this.auth.getAuthHeaders()}).pipe(r(s=>s.url))}getAlbumInfo(t,e,s){return this.http.get(`${this.apiBaseUrl}?handler=AlbumInfo`,{params:{albumId:t,albumTitle:e,artistName:s},headers:this.auth.getAuthHeaders()}).pipe(r(a=>{if(!a.success)throw new Error(a.error||"Album-Info nicht verf\xFCgbar");return{style:a.style||"",summary:a.summary||""}}))}getGenres(){return this.http.get(`${this.apiBaseUrl}?handler=Genres`,{headers:this.auth.getAuthHeaders()}).pipe(r(t=>t.genres??[]))}static \u0275fac=function(e){return new(e||n)};static \u0275prov=u({token:n,factory:n.\u0275fac,providedIn:"root"})};export{m as a};
