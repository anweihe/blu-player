import{a as _e,b as fe,e as xe,h as ge}from"./chunk-4XW53KSD.js";import{a as B}from"./chunk-MUFEIC3E.js";import{a as be}from"./chunk-UWMZ3TVV.js";import{a as D}from"./chunk-GWJHP5PM.js";import{e as ve}from"./chunk-TB3BYDLV.js";import{b as me,e as $,f as Z,g as pe,k as ee,l as ue}from"./chunk-GYSMW3IL.js";import{$a as ae,Ab as E,Cb as se,Da as W,Db as ce,Ea as R,Eb as de,Ga as L,Ha as l,Ib as J,Kb as H,R as C,Ta as V,W as p,Wb as z,X as u,Y as x,Z as k,ab as _,bb as f,ca as te,db as N,eb as q,fb as j,gb as r,ha as M,hb as a,ib as v,jb as d,kb as m,lb as w,mb as y,nb as X,ob as g,pb as P,qb as s,sb as Y,tb as I,ub as O,vb as T,wb as h,yb as c,zb as S}from"./chunk-63K3V35C.js";var he=(i,t)=>t.id;function ye(i,t){i&1&&(r(0,"div",9),c(1," Lade Profile... "),a())}function Ce(i,t){i&1&&(r(0,"div",9),c(1," Keine Profile vorhanden "),a())}function we(i,t){i&1&&(x(),r(0,"svg",19),v(1,"path",23),a())}function Se(i,t){if(i&1&&(r(0,"span",25),c(1,"-"),a(),r(2,"span"),c(3),a()),i&2){let e=s(2).$implicit;l(3),S(e.qobuz.displayName)}}function ke(i,t){if(i&1&&(r(0,"span",24),c(1,"Qobuz verbunden"),a(),_(2,Se,4,1)),i&2){let e=s().$implicit;l(2),f(e.qobuz!=null&&e.qobuz.displayName?2:-1)}}function Pe(i,t){i&1&&(r(0,"span",21),c(1,"Nicht bei Qobuz eingeloggt"),a())}function Ee(i,t){if(i&1){let e=y();r(0,"button",26),g("click",function(o){p(e);let b=s().$implicit,F=s(2);return u(F.confirmDeleteProfile(o,b))}),x(),r(1,"svg",6),v(2,"path",27),a()()}}function Me(i,t){if(i&1){let e=y();r(0,"div",15),g("click",function(){let o=p(e).$implicit,b=s(2);return u(b.selectProfile(o))}),r(1,"div",16),c(2),a(),r(3,"div",17)(4,"div",11)(5,"span",18),c(6),a(),_(7,we,2,0,":svg:svg",19),a(),r(8,"div",20),_(9,ke,3,1)(10,Pe,2,0,"span",21),a()(),_(11,Ee,3,0,"button",22),a()}if(i&2){let e=t.$implicit,n=s(2);h("bg-bg-card",e.id===n.profileService.activeProfileId()),l(),T("background-color",n.profileService.getProfileColor(e.id)),l(),E(" ",n.profileService.getProfileInitial(e.name)," "),l(4),S(e.name),l(),f(e.id===n.profileService.activeProfileId()?7:-1),l(2),f(e.qobuz!=null&&e.qobuz.authToken?9:10),l(2),f(n.profileService.profiles().length>1?11:-1)}}function Ve(i,t){if(i&1&&N(0,Me,12,9,"div",14,he),i&2){let e=s();q(e.profileService.profiles())}}function Te(i,t){if(i&1){let e=y();r(0,"div",11)(1,"input",28,0),de("ngModelChange",function(o){p(e);let b=s();return ce(b.newProfileName,o)||(b.newProfileName=o),u(o)}),g("keydown.enter",function(){p(e);let o=s();return u(o.createProfile())})("keydown.escape",function(){p(e);let o=s();return u(o.cancelCreate())}),a(),r(3,"button",29),g("click",function(){p(e);let o=s();return u(o.createProfile())}),c(4," Erstellen "),a(),r(5,"button",30),g("click",function(){p(e);let o=s();return u(o.cancelCreate())}),c(6," Abbrechen "),a()()}if(i&2){let e=s();l(),se("ngModel",e.newProfileName),l(2),j("disabled",!e.newProfileName.trim())}}function ze(i,t){if(i&1){let e=y();r(0,"button",31),g("click",function(){p(e);let o=s();return u(o.startCreate())}),x(),r(1,"svg",6),v(2,"path",32),a(),k(),r(3,"span",33),c(4,"Neues Profil erstellen"),a()()}}function Le(i,t){i&1&&c(0," Die Qobuz-Verbindung wird dabei ebenfalls entfernt. ")}function He(i,t){if(i&1){let e=y();r(0,"div",34),g("click",function(){p(e);let o=s();return u(o.cancelDelete())}),r(1,"div",35),g("click",function(o){return p(e),u(o.stopPropagation())}),r(2,"h3",36),c(3,"Profil l\xF6schen?"),a(),r(4,"p",37),c(5),_(6,Le,1,0),a(),r(7,"div",38)(8,"button",39),g("click",function(){p(e);let o=s();return u(o.cancelDelete())}),c(9," Abbrechen "),a(),r(10,"button",40),g("click",function(){p(e);let o=s();return u(o.deleteProfile())}),c(11," L\xF6schen "),a()()()()}if(i&2){let e,n,o=s();l(5),E(' M\xF6chtest du das Profil "',(e=o.profileToDelete())==null?null:e.name,'" wirklich l\xF6schen? '),l(),f((n=o.profileToDelete())!=null&&n.qobuz?6:-1)}}var K=class i{profileService=C(ee);closed=new te;profileSelected=new te;isClosing=M(!1);isCreating=M(!1);profileToDelete=M(null);newProfileName="";ngOnInit(){this.profileService.profiles().length===0&&this.profileService.loadProfiles().subscribe()}selectProfile(t){t.id!==this.profileService.activeProfileId()&&(this.profileService.setActiveProfileId(t.id),this.profileSelected.emit(t)),this.close()}startCreate(){this.isCreating.set(!0),this.newProfileName="",setTimeout(()=>{document.querySelector('input[placeholder="Profilname"]')?.focus()})}cancelCreate(){this.isCreating.set(!1),this.newProfileName=""}createProfile(){let t=this.newProfileName.trim();t&&this.profileService.createProfile(t).subscribe(e=>{e&&(this.isCreating.set(!1),this.newProfileName="",this.profileService.setActiveProfileId(e.id),this.profileSelected.emit(e))})}confirmDeleteProfile(t,e){t.stopPropagation(),this.profileToDelete.set(e)}cancelDelete(){this.profileToDelete.set(null)}deleteProfile(){let t=this.profileToDelete();t&&this.profileService.deleteProfile(t.id).subscribe(e=>{e&&this.profileToDelete.set(null)})}close(){this.isClosing.set(!0),setTimeout(()=>{this.closed.emit()},200)}onEscapeKey(){this.profileToDelete()?this.cancelDelete():this.isCreating()?this.cancelCreate():this.close()}static \u0275fac=function(e){return new(e||i)};static \u0275cmp=V({type:i,selectors:[["app-profile-switcher"]],hostBindings:function(e,n){e&1&&g("keydown.escape",function(){return n.onEscapeKey()},L)},outputs:{closed:"closed",profileSelected:"profileSelected"},decls:16,vars:15,consts:[["nameInput",""],[1,"fixed","inset-0","bg-black/60","backdrop-blur-sm","z-[100]","transition-opacity","duration-200",3,"click"],[1,"fixed","inset-x-4","top-1/2","-translate-y-1/2","max-w-md","mx-auto","bg-bg-primary","rounded-2xl","z-[101]","shadow-2xl","overflow-hidden","transition-all","duration-200",3,"click"],[1,"flex","items-center","justify-between","p-4","border-b","border-border-subtle"],[1,"text-lg","font-semibold"],[1,"w-8","h-8","flex","items-center","justify-center","rounded-lg","hover:bg-bg-card","transition-colors",3,"click"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"w-5","h-5"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M6 18L18 6M6 6l12 12"],[1,"max-h-80","overflow-y-auto","p-2"],[1,"p-4","text-center","text-text-muted"],[1,"p-3","border-t","border-border-subtle"],[1,"flex","items-center","gap-2"],[1,"w-full","flex","items-center","justify-center","gap-2","px-4","py-3","rounded-xl","text-accent-qobuz","hover:bg-accent-qobuz/10","transition-colors"],[1,"fixed","inset-0","bg-black/60","z-[102]","flex","items-center","justify-center","p-4"],[1,"flex","items-center","gap-3","p-3","rounded-xl","cursor-pointer","transition-colors","hover:bg-bg-card",3,"bg-bg-card"],[1,"flex","items-center","gap-3","p-3","rounded-xl","cursor-pointer","transition-colors","hover:bg-bg-card",3,"click"],[1,"w-12","h-12","rounded-full","flex","items-center","justify-center","text-white","font-semibold","text-lg","flex-shrink-0"],[1,"flex-1","min-w-0"],[1,"font-medium","truncate"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 20 20","fill","currentColor",1,"w-5","h-5","text-green-500","flex-shrink-0"],[1,"text-sm","text-text-muted"],[1,"text-text-muted"],["title","Profil l\xF6schen",1,"w-8","h-8","flex","items-center","justify-center","rounded-lg","text-text-muted","hover:text-error","hover:bg-error/10","transition-colors","flex-shrink-0"],["fill-rule","evenodd","d","M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z","clip-rule","evenodd"],[1,"text-green-600"],[1,"mx-1"],["title","Profil l\xF6schen",1,"w-8","h-8","flex","items-center","justify-center","rounded-lg","text-text-muted","hover:text-error","hover:bg-error/10","transition-colors","flex-shrink-0",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"],["type","text","placeholder","Profilname",1,"flex-1","px-3","py-2","bg-bg-card","border","border-border-subtle","rounded-lg","text-sm","focus:outline-none","focus:ring-2","focus:ring-accent-qobuz/50",3,"ngModelChange","keydown.enter","keydown.escape","ngModel"],[1,"px-3","py-2","bg-accent-qobuz","text-white","rounded-lg","text-sm","font-medium","hover:opacity-90","transition-opacity","disabled:opacity-50",3,"click","disabled"],[1,"px-3","py-2","text-text-muted","hover:bg-bg-card","rounded-lg","text-sm","transition-colors",3,"click"],[1,"w-full","flex","items-center","justify-center","gap-2","px-4","py-3","rounded-xl","text-accent-qobuz","hover:bg-accent-qobuz/10","transition-colors",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 4v16m8-8H4"],[1,"font-medium"],[1,"fixed","inset-0","bg-black/60","z-[102]","flex","items-center","justify-center","p-4",3,"click"],[1,"bg-bg-primary","rounded-2xl","p-6","max-w-sm","w-full","shadow-2xl",3,"click"],[1,"text-lg","font-semibold","mb-2"],[1,"text-text-muted","mb-4"],[1,"flex","gap-3","justify-end"],[1,"px-4","py-2","rounded-lg","text-text-muted","hover:bg-bg-card","transition-colors",3,"click"],[1,"px-4","py-2","bg-error","text-white","rounded-lg","font-medium","hover:opacity-90","transition-opacity",3,"click"]],template:function(e,n){e&1&&(r(0,"div",1),g("click",function(){return n.close()}),a(),r(1,"div",2),g("click",function(b){return b.stopPropagation()}),r(2,"div",3)(3,"h2",4),c(4,"Profile"),a(),r(5,"button",5),g("click",function(){return n.close()}),x(),r(6,"svg",6),v(7,"path",7),a()()(),k(),r(8,"div",8),_(9,ye,2,0,"div",9)(10,Ce,2,0,"div",9)(11,Ve,2,0),a(),r(12,"div",10),_(13,Te,7,2,"div",11)(14,ze,5,0,"button",12),a()(),_(15,He,12,2,"div",13)),e&2&&(h("opacity-0",n.isClosing())("opacity-100",!n.isClosing()),l(),h("scale-95",n.isClosing())("opacity-0",n.isClosing())("scale-100",!n.isClosing())("opacity-100",!n.isClosing()),l(8),f(n.profileService.isLoading()?9:n.profileService.profiles().length===0?10:11),l(4),f(n.isCreating()?13:14),l(2),f(n.profileToDelete()?15:-1))},dependencies:[z,ge,_e,fe,xe],styles:["[_nghost-%COMP%]{display:contents}"]})};var Ne=(i,t)=>t.id;function qe(i,t){i&1&&(d(0,"div",15),x(),d(1,"svg",21),w(2,"path",23),m()())}function De(i,t){i&1&&(d(0,"div",16),w(1,"div",24),d(2,"span",25),c(3,"Bluesound Player"),m(),w(4,"div",24),m())}function je(i,t){i&1&&(d(0,"div",31),x(),d(1,"svg",21),w(2,"path",23),m()())}function Be(i,t){if(i&1){let e=y();d(0,"button",8),P("click",function(){p(e);let o=s().$implicit,b=s(2);return u(b.selectPlayer(o))}),d(1,"div",9),x(),d(2,"svg",10),w(3,"path",27),m()(),k(),d(4,"div",28)(5,"p",29),c(6),m(),d(7,"p",30),c(8),m()(),_(9,je,3,0,"div",31),m()}if(i&2){let e=s().$implicit,n=s(2);h("bg-accent-qobuz/10",n.isSelected(e))("border-accent-qobuz",n.isSelected(e))("border-2",n.isSelected(e))("bg-bg-card",!n.isSelected(e))("hover:bg-bg-card-hover",!n.isSelected(e)),l(),h("bg-accent-qobuz",n.isSelected(e))("text-white",n.isSelected(e))("bg-bg-secondary",!n.isSelected(e))("text-text-muted",!n.isSelected(e)),l(4),h("text-accent-qobuz",n.isSelected(e)),l(),E(" ",e.name," "),l(2),E(" ",n.getPlayerSubtitle(e)," "),l(),f(n.isSelected(e)?9:-1)}}function Ie(i,t){if(i&1&&_(0,Be,10,23,"button",26),i&2){let e=t.$implicit;f(e.isSecondaryStereoPairSpeaker?-1:0)}}function Oe(i,t){i&1&&(d(0,"div",17),x(),d(1,"svg",32),w(2,"path",33),m(),k(),d(3,"p",34),c(4,"Keine Player gefunden"),m(),d(5,"p",35),c(6,"Stellen Sie sicher, dass Ihre Bluesound Player eingeschaltet sind"),m()())}function Fe(i,t){i&1&&(d(0,"div",18),w(1,"div",36),d(2,"p",37),c(3,"Suche nach Playern..."),m()())}function Ge(i,t){if(i&1){let e=y();d(0,"div",0),P("click",function(){p(e);let o=s();return u(o.close())}),m(),d(1,"div",1)(2,"div",2)(3,"h2",3),c(4,"Wiedergabeger\xE4t"),m(),d(5,"button",4),P("click",function(){p(e);let o=s();return u(o.close())}),x(),d(6,"svg",5),w(7,"path",6),m()()(),k(),d(8,"div",7)(9,"button",8),P("click",function(){p(e);let o=s();return u(o.selectBrowser())}),d(10,"div",9),x(),d(11,"svg",10),w(12,"path",11),m()(),k(),d(13,"div",12)(14,"p",13),c(15," Dieser Browser "),m(),d(16,"p",14),c(17,"Wiedergabe auf diesem Ger\xE4t"),m()(),_(18,qe,3,0,"div",15),m(),_(19,De,5,0,"div",16),N(20,Ie,1,1,null,null,Ne),_(22,Oe,7,0,"div",17),_(23,Fe,4,0,"div",18),m(),d(24,"div",19)(25,"button",20),P("click",function(){p(e);let o=s();return u(o.refreshPlayers())}),x(),d(26,"svg",21),w(27,"path",22),m(),c(28," Player aktualisieren "),m()()()}if(i&2){let e=s();l(9),h("bg-accent-qobuz/10",e.playerState.playerMode()==="browser")("border-accent-qobuz",e.playerState.playerMode()==="browser")("border-2",e.playerState.playerMode()==="browser")("bg-bg-card",e.playerState.playerMode()!=="browser")("hover:bg-bg-card-hover",e.playerState.playerMode()!=="browser"),l(),h("bg-accent-qobuz",e.playerState.playerMode()==="browser")("text-white",e.playerState.playerMode()==="browser")("bg-bg-secondary",e.playerState.playerMode()!=="browser")("text-text-muted",e.playerState.playerMode()!=="browser"),l(4),h("text-accent-qobuz",e.playerState.playerMode()==="browser"),l(4),f(e.playerState.playerMode()==="browser"?18:-1),l(),f(e.players().length>0?19:-1),l(),q(e.players()),l(2),f(e.players().length===0&&!e.isLoading()?22:-1),l(),f(e.isLoading()?23:-1),l(2),X("disabled",e.isLoading()),l(),h("animate-spin",e.isLoading())}}var A=class i{playerState=C(D);playback=C(B);bluesoundApi=C(be);isVisible=M(!1);isLoading=M(!1);players=M([]);ngOnInit(){this.loadPlayers()}open(){this.isVisible.set(!0),this.loadPlayers()}close(){this.isVisible.set(!1)}async selectBrowser(){await this.playback.switchToBrowser(),this.close()}async selectPlayer(t){await this.playback.switchToBluesound(t),this.close()}isSelected(t){return this.playerState.selectedPlayer()?.id===t.id}getPlayerSubtitle(t){return t.isStereoPaired?`${t.modelName} (Stereopaar)`:t.isGrouped?t.isMaster?`${t.groupName} (Master)`:`${t.groupName}`:t.modelName}loadPlayers(){this.isLoading.set(!0),this.bluesoundApi.getPlayers().subscribe({next:t=>{this.players.set(t),this.playerState.players.set(t),this.isLoading.set(!1)},error:()=>{this.isLoading.set(!1)}})}refreshPlayers(){this.isLoading.set(!0),this.bluesoundApi.refreshPlayers().subscribe({next:t=>{this.players.set(t),this.playerState.players.set(t),this.isLoading.set(!1)},error:()=>{this.isLoading.set(!1)}})}onEscapeKey(){this.isVisible()&&this.close()}static \u0275fac=function(e){return new(e||i)};static \u0275cmp=V({type:i,selectors:[["app-player-selector"]],hostBindings:function(e,n){e&1&&g("keydown.escape",function(){return n.onEscapeKey()},L)},decls:1,vars:1,consts:[[1,"fixed","inset-0","bg-black/50","z-[110]",3,"click"],[1,"fixed","bottom-0","left-0","right-0","bg-bg-primary","rounded-t-2xl","z-[111]","max-h-[80vh]","overflow-hidden","flex","flex-col","safe-area-bottom","animate-slide-up"],[1,"flex","items-center","justify-between","px-6","py-4","border-b","border-border-subtle"],[1,"text-lg","font-semibold"],[1,"w-8","h-8","rounded-full","hover:bg-bg-card","flex","items-center","justify-center","text-text-muted","hover:text-text-primary","transition-colors",3,"click"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"w-5","h-5"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M6 18L18 6M6 6l12 12"],[1,"flex-1","overflow-y-auto","p-4","space-y-2"],[1,"w-full","flex","items-center","gap-4","p-4","rounded-xl","transition-colors",3,"click"],[1,"w-12","h-12","rounded-xl","flex","items-center","justify-center"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"w-6","h-6"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9.75 17L9 20l-1 1h8l-1-1-.75-3M3 13h18M5 17h14a2 2 0 002-2V5a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"],[1,"flex-1","text-left"],[1,"font-medium"],[1,"text-sm","text-text-muted"],[1,"w-6","h-6","rounded-full","bg-accent-qobuz","text-white","flex","items-center","justify-center"],[1,"flex","items-center","gap-3","py-3"],[1,"text-center","py-8","text-text-muted"],[1,"text-center","py-8"],[1,"p-4","border-t","border-border-subtle"],[1,"w-full","flex","items-center","justify-center","gap-2","py-3","text-sm","text-text-secondary","hover:text-text-primary","transition-colors",3,"click","disabled"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"w-4","h-4"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M5 13l4 4L19 7"],[1,"flex-1","h-px","bg-border-subtle"],[1,"text-xs","text-text-muted","uppercase","tracking-wide"],[1,"w-full","flex","items-center","gap-4","p-4","rounded-xl","transition-colors",3,"bg-accent-qobuz/10","border-accent-qobuz","border-2","bg-bg-card","hover:bg-bg-card-hover"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M19.428 15.428a2 2 0 00-1.022-.547l-2.387-.477a6 6 0 00-3.86.517l-.318.158a6 6 0 01-3.86.517L6.05 15.21a2 2 0 00-1.806.547M8 4h8l-1 1v5.172a2 2 0 00.586 1.414l5 5c1.26 1.26.367 3.414-1.415 3.414H4.828c-1.782 0-2.674-2.154-1.414-3.414l5-5A2 2 0 009 10.172V5L8 4z"],[1,"flex-1","text-left","min-w-0"],[1,"font-medium","truncate"],[1,"text-sm","text-text-muted","truncate"],[1,"w-6","h-6","rounded-full","bg-accent-qobuz","text-white","flex","items-center","justify-center","flex-shrink-0"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"w-12","h-12","mx-auto","mb-3","opacity-50"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","1.5","d","M19.428 15.428a2 2 0 00-1.022-.547l-2.387-.477a6 6 0 00-3.86.517l-.318.158a6 6 0 01-3.86.517L6.05 15.21a2 2 0 00-1.806.547M8 4h8l-1 1v5.172a2 2 0 00.586 1.414l5 5c1.26 1.26.367 3.414-1.415 3.414H4.828c-1.782 0-2.674-2.154-1.414-3.414l5-5A2 2 0 009 10.172V5L8 4z"],[1,"font-medium","mb-1"],[1,"text-sm"],[1,"w-8","h-8","border-2","border-accent-qobuz","border-t-transparent","rounded-full","animate-spin","mx-auto","mb-3"],[1,"text-text-muted"]],template:function(e,n){e&1&&_(0,Ge,29,27),e&2&&f(n.isVisible()?0:-1)},dependencies:[z],styles:[".safe-area-bottom[_ngcontent-%COMP%]{padding-bottom:env(safe-area-inset-bottom,0)}@keyframes _ngcontent-%COMP%_slide-up{0%{transform:translateY(100%)}to{transform:translateY(0)}}.animate-slide-up[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_slide-up .3s ease-out}"]})};var Qe=["playerSelector"];function Ae(i,t){if(i&1&&v(0,"img",6),i&2){let e=s();j("src",e.coverImage(),R)("alt",e.trackTitle())}}function Ye(i,t){i&1&&(r(0,"div",7),x(),r(1,"svg",28),v(2,"path",27),a()())}function $e(i,t){i&1&&(x(),r(0,"svg",12),v(1,"path",29),a())}function Re(i,t){i&1&&(x(),r(0,"svg",13),v(1,"path",30),a())}function Ke(i,t){i&1&&(x(),r(0,"svg",23),v(1,"path",31)(2,"path",32),a())}function Ue(i,t){i&1&&(x(),r(0,"svg",23),v(1,"path",33)(2,"path",31),a())}function We(i,t){i&1&&(x(),r(0,"svg",23),v(1,"path",34),a())}function Xe(i,t){i&1&&(x(),r(0,"svg",35),v(1,"path",36),a(),k(),r(2,"span",37),c(3,"Browser"),a())}function Je(i,t){if(i&1&&(x(),r(0,"svg",38),v(1,"path",39),a(),k(),r(2,"span",40),c(3),a()),i&2){let e,n=s();l(3),S((e=n.playerState.selectedPlayer())==null?null:e.name)}}var ie=class i{playerSelector;playerState=C(D);playback=C(B);hasContent=H(()=>!0);coverImage=H(()=>{let t=this.playerState.currentTrack(),e=this.playerState.playbackStatus();return t?.album?.image?.large?t.album.image.large:t?.album?.image?.small?t.album.image.small:e?.imageUrl});trackTitle=H(()=>{let t=this.playerState.currentTrack(),e=this.playerState.playbackStatus();return t?.title||e?.title});artistName=H(()=>{let t=this.playerState.currentTrack(),e=this.playerState.playbackStatus();return t?.performer?.name||e?.artist});openNowPlaying(){this.playerState.showNowPlaying()}togglePlayPause(t){t.stopPropagation(),this.playback.togglePlayPause()}skipNext(t){t.stopPropagation(),this.playback.skipNext()}async seekTo(t){let n=t.currentTarget.getBoundingClientRect(),o=(t.clientX-n.left)/n.width*100;await this.playback.seekToPercent(o)}toggleVolumePanel(){this.playerState.isVolumePanelVisible.update(t=>!t)}togglePlayerSelector(){this.playerSelector.open()}static \u0275fac=function(e){return new(e||i)};static \u0275cmp=V({type:i,selectors:[["app-global-player"]],viewQuery:function(e,n){if(e&1&&Y(Qe,5),e&2){let o;I(o=O())&&(n.playerSelector=o.first)}},decls:39,vars:15,consts:[["playerSelector",""],[1,"global-player","fixed","bottom-0","left-0","right-0","bg-bg-card","border-t","border-border-subtle","z-50","safe-area-bottom"],[1,"progress-line","h-0.5","bg-bg-secondary"],[1,"h-full","bg-accent-qobuz","transition-all","duration-200"],[1,"flex","items-center","gap-3","p-3","cursor-pointer",3,"click"],[1,"w-12","h-12","rounded-md","bg-bg-secondary","overflow-hidden","flex-shrink-0"],[1,"w-full","h-full","object-cover",3,"src","alt"],[1,"w-full","h-full","flex","items-center","justify-center","text-text-muted"],[1,"flex-1","min-w-0"],[1,"text-sm","font-medium","truncate","text-text-primary"],[1,"text-xs","text-text-muted","truncate"],[1,"w-10","h-10","rounded-full","bg-accent-qobuz","text-white","flex","items-center","justify-center","hover:opacity-90","transition-opacity",3,"click"],["xmlns","http://www.w3.org/2000/svg","fill","currentColor","viewBox","0 0 24 24",1,"w-5","h-5"],["xmlns","http://www.w3.org/2000/svg","fill","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","ml-0.5"],[1,"w-10","h-10","rounded-full","text-text-secondary","hover:text-text-primary","flex","items-center","justify-center","transition-colors","md:hidden",3,"click"],["d","M6 18l8.5-6L6 6v12zM16 6v12h2V6h-2z"],[1,"hidden","md:flex","items-center","gap-4","px-4","pb-3","-mt-1"],[1,"text-xs","text-text-muted","w-12","text-right"],[1,"flex-1","h-1","bg-bg-secondary","rounded-full","cursor-pointer","group",3,"click"],[1,"h-full","bg-accent-qobuz","rounded-full","relative","group-hover:bg-accent-qobuz-hover","transition-colors"],[1,"absolute","right-0","top-1/2","-translate-y-1/2","w-3","h-3","bg-white","rounded-full","shadow","opacity-0","group-hover:opacity-100","transition-opacity"],[1,"text-xs","text-text-muted","w-12"],[1,"w-8","h-8","text-text-secondary","hover:text-text-primary","flex","items-center","justify-center",3,"click"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"w-5","h-5"],[1,"flex","items-center","gap-2","px-3","py-1.5","rounded-lg","bg-bg-secondary","hover:bg-bg-card-hover","text-sm","transition-colors",3,"click"],[1,"hidden","xl:flex","items-center","gap-1.5","px-2","py-1","bg-accent-qobuz/10","rounded","text-xs","text-accent-qobuz","font-medium"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"w-3.5","h-3.5"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 19V6l12-3v13M9 19c0 1.105-1.343 2-3 2s-3-.895-3-2 1.343-2 3-2 3 .895 3 2zm12-3c0 1.105-1.343 2-3 2s-3-.895-3-2 1.343-2 3-2 3 .895 3 2zM9 10l12-3"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"w-6","h-6"],["d","M6 4h4v16H6V4zm8 0h4v16h-4V4z"],["d","M8 5v14l11-7z"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M5.586 15H4a1 1 0 01-1-1v-4a1 1 0 011-1h1.586l4.707-4.707C10.923 3.663 12 4.109 12 5v14c0 .891-1.077 1.337-1.707.707L5.586 15z"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M17 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M15.536 8.464a5 5 0 010 7.072M12 6.253v11.494m0 0c-.891 0-1.337-1.077-.707-1.707l4.707-4.707a1 1 0 000-1.414l-4.707-4.707c-.63-.63-1.077-.184-1.077.707"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M15.536 8.464a5 5 0 010 7.072m2.828-9.9a9 9 0 010 12.728M5.586 15H4a1 1 0 01-1-1v-4a1 1 0 011-1h1.586l4.707-4.707C10.923 3.663 12 4.109 12 5v14c0 .891-1.077 1.337-1.707.707L5.586 15z"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"w-4","h-4"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9.75 17L9 20l-1 1h8l-1-1-.75-3M3 13h18M5 17h14a2 2 0 002-2V5a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"],[1,"hidden","lg:inline"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"w-4","h-4","text-accent-qobuz"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M19.428 15.428a2 2 0 00-1.022-.547l-2.387-.477a6 6 0 00-3.86.517l-.318.158a6 6 0 01-3.86.517L6.05 15.21a2 2 0 00-1.806.547M8 4h8l-1 1v5.172a2 2 0 00.586 1.414l5 5c1.26 1.26.367 3.414-1.415 3.414H4.828c-1.782 0-2.674-2.154-1.414-3.414l5-5A2 2 0 009 10.172V5L8 4z"],[1,"hidden","lg:inline","truncate","max-w-[100px]"]],template:function(e,n){if(e&1){let o=y();r(0,"div",1)(1,"div",2),v(2,"div",3),a(),r(3,"div",4),g("click",function(){return p(o),u(n.openNowPlaying())}),r(4,"div",5),_(5,Ae,1,2,"img",6)(6,Ye,3,0,"div",7),a(),r(7,"div",8)(8,"p",9),c(9),a(),r(10,"p",10),c(11),a()(),r(12,"button",11),g("click",function(F){return p(o),u(n.togglePlayPause(F))}),_(13,$e,2,0,":svg:svg",12)(14,Re,2,0,":svg:svg",13),a(),r(15,"button",14),g("click",function(F){return p(o),u(n.skipNext(F))}),x(),r(16,"svg",12),v(17,"path",15),a()()(),k(),r(18,"div",16)(19,"span",17),c(20),a(),r(21,"div",18),g("click",function(F){return p(o),u(n.seekTo(F))}),r(22,"div",19),v(23,"div",20),a()(),r(24,"span",21),c(25),a(),r(26,"button",22),g("click",function(){return p(o),u(n.toggleVolumePanel())}),_(27,Ke,3,0,":svg:svg",23)(28,Ue,3,0,":svg:svg",23)(29,We,2,0,":svg:svg",23),a(),r(30,"button",24),g("click",function(){return p(o),u(n.togglePlayerSelector())}),_(31,Xe,4,0)(32,Je,4,1),a(),r(33,"div",25),x(),r(34,"svg",26),v(35,"path",27),a(),c(36),a()()(),k(),v(37,"app-player-selector",null,0)}e&2&&(h("hidden",!n.hasContent()),l(2),T("width",n.playerState.progressPercent(),"%"),l(3),f(n.coverImage()?5:6),l(4),S(n.trackTitle()||"Kein Titel"),l(2),S(n.artistName()||"Unbekannter K\xFCnstler"),l(2),f(n.playerState.isPlaying()?13:14),l(7),S(n.playerState.formattedPosition()),l(2),T("width",n.playerState.progressPercent(),"%"),l(3),S(n.playerState.formattedDuration()),l(2),f(n.playerState.isMuted()||n.playerState.volume()===0?27:n.playerState.volume()<50?28:29),l(4),f(n.playerState.playerMode()==="browser"?31:32),l(5),E(" ",n.playerState.qualityLabel()," "))},dependencies:[z,A],styles:[".safe-area-bottom[_ngcontent-%COMP%]{padding-bottom:env(safe-area-inset-bottom,0)}.global-player[_ngcontent-%COMP%]{box-shadow:0 -4px 20px #00000026}"]})};var Ze=(i,t)=>t.id;function et(i,t){i&1&&(d(0,"span",14),c(1,"MP3"),m())}function tt(i,t){i&1&&(d(0,"span",14),c(1,"CD"),m())}function it(i,t){i&1&&(d(0,"span",15),c(1,"24bit"),m())}function nt(i,t){i&1&&(d(0,"span",15),c(1,"MAX"),m())}function ot(i,t){if(i&1&&(d(0,"span",19),c(1),m()),i&2){let e=s().$implicit;l(),E(" ",e.badge," ")}}function rt(i,t){i&1&&(d(0,"div",20),x(),d(1,"svg",21),w(2,"path",22),m()())}function lt(i,t){if(i&1){let e=y();d(0,"button",12),P("click",function(){let o=p(e).$implicit,b=s(2);return u(b.selectQuality(o.id))}),d(1,"div",13),_(2,et,2,0,"span",14)(3,tt,2,0,"span",14)(4,it,2,0,"span",15)(5,nt,2,0,"span",15),m(),d(6,"div",16)(7,"div",17)(8,"p",18),c(9),m(),_(10,ot,2,1,"span",19),m(),d(11,"p",4),c(12),m()(),_(13,rt,3,0,"div",20),m()}if(i&2){let e,n=t.$implicit,o=s(2);h("bg-accent-qobuz/10",o.isSelected(n.id))("border-accent-qobuz",o.isSelected(n.id))("border-2",o.isSelected(n.id))("bg-bg-card",!o.isSelected(n.id))("hover:bg-bg-card-hover",!o.isSelected(n.id)),l(),h("bg-accent-qobuz",o.isSelected(n.id))("text-white",o.isSelected(n.id))("bg-bg-secondary",!o.isSelected(n.id))("text-text-muted",!o.isSelected(n.id)),l(),f((e=n.id)===5?2:e===6?3:e===7?4:e===27?5:-1),l(6),h("text-accent-qobuz",o.isSelected(n.id)),l(),E(" ",n.label," "),l(),f(n.badge?10:-1),l(2),S(n.description),l(),f(o.isSelected(n.id)?13:-1)}}function at(i,t){if(i&1){let e=y();d(0,"div",0),P("click",function(){p(e);let o=s();return u(o.close())}),m(),d(1,"div",1)(2,"div",2)(3,"div")(4,"h2",3),c(5,"Streaming-Qualit\xE4t"),m(),d(6,"p",4),c(7,"\xC4nderungen gelten ab dem n\xE4chsten Track"),m()(),d(8,"button",5),P("click",function(){p(e);let o=s();return u(o.close())}),x(),d(9,"svg",6),w(10,"path",7),m()()(),k(),d(11,"div",8),N(12,lt,14,25,"button",9,Ze),m(),d(14,"div",10)(15,"p",11),c(16," H\xF6here Qualit\xE4t ben\xF6tigt mehr Bandbreite und Speicher "),m()()()}if(i&2){let e=s();l(12),q(e.qualityOptions)}}var U=class i{playerState=C(D);playback=C(B);isVisible=M(!1);qualityOptions=[{id:27,label:"Hi-Res Max",description:"FLAC 24-Bit bis 192 kHz",badge:"Beste Qualit\xE4t"},{id:7,label:"Hi-Res",description:"FLAC 24-Bit bis 96 kHz"},{id:6,label:"CD-Qualit\xE4t",description:"FLAC 16-Bit / 44.1 kHz"},{id:5,label:"MP3",description:"320 kbps"}];open(){this.isVisible.set(!0)}close(){this.isVisible.set(!1)}isSelected(t){return this.playerState.streamingQuality()===t}selectQuality(t){this.playback.setQuality(t),this.close()}onEscapeKey(){this.isVisible()&&this.close()}static \u0275fac=function(e){return new(e||i)};static \u0275cmp=V({type:i,selectors:[["app-quality-selector"]],hostBindings:function(e,n){e&1&&g("keydown.escape",function(){return n.onEscapeKey()},L)},decls:1,vars:1,consts:[[1,"fixed","inset-0","bg-black/50","z-[110]",3,"click"],[1,"fixed","bottom-0","left-0","right-0","bg-bg-primary","rounded-t-2xl","z-[111]","safe-area-bottom","animate-slide-up"],[1,"flex","items-center","justify-between","px-6","py-4","border-b","border-border-subtle"],[1,"text-lg","font-semibold"],[1,"text-sm","text-text-muted"],[1,"w-8","h-8","rounded-full","hover:bg-bg-card","flex","items-center","justify-center","text-text-muted","hover:text-text-primary","transition-colors",3,"click"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"w-5","h-5"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M6 18L18 6M6 6l12 12"],[1,"p-4","space-y-2"],[1,"w-full","flex","items-center","gap-4","p-4","rounded-xl","transition-colors",3,"bg-accent-qobuz/10","border-accent-qobuz","border-2","bg-bg-card","hover:bg-bg-card-hover"],[1,"px-6","pb-6","text-center"],[1,"text-xs","text-text-muted"],[1,"w-full","flex","items-center","gap-4","p-4","rounded-xl","transition-colors",3,"click"],[1,"w-12","h-12","rounded-xl","flex","items-center","justify-center","text-lg","font-bold"],[1,"text-sm"],[1,"text-xs"],[1,"flex-1","text-left"],[1,"flex","items-center","gap-2"],[1,"font-medium"],[1,"px-1.5","py-0.5","bg-accent-qobuz/20","text-accent-qobuz","text-xs","font-medium","rounded"],[1,"w-6","h-6","rounded-full","bg-accent-qobuz","text-white","flex","items-center","justify-center"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"w-4","h-4"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M5 13l4 4L19 7"]],template:function(e,n){e&1&&_(0,at,17,0),e&2&&f(n.isVisible()?0:-1)},dependencies:[z],styles:[".safe-area-bottom[_ngcontent-%COMP%]{padding-bottom:env(safe-area-inset-bottom,0)}@keyframes _ngcontent-%COMP%_slide-up{0%{transform:translateY(100%)}to{transform:translateY(0)}}.animate-slide-up[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_slide-up .3s ease-out}"]})};var st=["popupPanel"],ct=["qualitySelector"],dt=["playerSelector"],mt=i=>["/qobuz/artist",i],pt=(i,t)=>t.id;function ut(i,t){if(i&1){let e=y();r(0,"div",5),g("click",function(){p(e);let o=s();return u(o.close())}),a()}if(i&2){let e=s();h("opacity-100",!e.isClosing())("opacity-0",e.isClosing())}}function _t(i,t){i&1&&v(0,"div",11)}function ft(i,t){if(i&1&&(r(0,"span",12),c(1),a()),i&2){let e=s(2);l(),E(" ",e.playerState.queue().length," ")}}function xt(i,t){i&1&&v(0,"div",11)}function gt(i,t){if(i&1&&v(0,"img",17),i&2){let e=s(3);j("src",e.coverImage(),R)("alt",e.trackTitle())}}function vt(i,t){i&1&&(r(0,"div",18),x(),r(1,"svg",45),v(2,"path",46),a()())}function bt(i,t){if(i&1){let e=y();r(0,"a",47),g("click",function(){p(e);let o=s(3);return u(o.close())}),c(1),a()}if(i&2){let e=s(3);j("routerLink",J(2,mt,e.artistId())),l(),E(" ",e.artistName()||"Unbekannter K\xFCnstler"," ")}}function ht(i,t){if(i&1&&(r(0,"p",22),c(1),a()),i&2){let e=s(3);l(),S(e.artistName()||"Unbekannter K\xFCnstler")}}function yt(i,t){if(i&1&&(r(0,"p",23),c(1),a()),i&2){let e=s(3);l(),S(e.albumTitle())}}function Ct(i,t){i&1&&(x(),r(0,"svg",37),v(1,"path",48),a())}function wt(i,t){i&1&&(x(),r(0,"svg",38),v(1,"path",49),a())}function St(i,t){i&1&&(x(),r(0,"svg",42),v(1,"path",50),a(),c(2," Browser "))}function kt(i,t){if(i&1&&(x(),r(0,"svg",42),v(1,"path",51),a(),c(2)),i&2){let e,n=s(3);l(2),E(" ",(e=n.playerState.selectedPlayer())==null?null:e.name," ")}}function Pt(i,t){if(i&1){let e=y();r(0,"div",14)(1,"div",16),_(2,gt,1,2,"img",17)(3,vt,3,0,"div",18),a(),r(4,"div",19)(5,"h2",20),c(6),a(),_(7,bt,2,4,"a",21)(8,ht,2,1,"p",22),_(9,yt,2,1,"p",23),a(),r(10,"div",24)(11,"div",25),g("click",function(o){p(e);let b=s(2);return u(b.seekTo(o))}),r(12,"div",26),v(13,"div",27),a()(),r(14,"div",28)(15,"span"),c(16),a(),r(17,"span"),c(18),a()()(),r(19,"div",29)(20,"button",30),x(),r(21,"svg",31),v(22,"path",32),a()(),k(),r(23,"button",33),g("click",function(){p(e);let o=s(2);return u(o.skipPrevious())}),x(),r(24,"svg",34),v(25,"path",35),a()(),k(),r(26,"button",36),g("click",function(){p(e);let o=s(2);return u(o.togglePlayPause())}),_(27,Ct,2,0,":svg:svg",37)(28,wt,2,0,":svg:svg",38),a(),r(29,"button",33),g("click",function(){p(e);let o=s(2);return u(o.skipNext())}),x(),r(30,"svg",34),v(31,"path",39),a()(),k(),r(32,"button",30),x(),r(33,"svg",31),v(34,"path",32),a()()(),k(),r(35,"div",40)(36,"button",41),g("click",function(){p(e);let o=s(2);return u(o.openQualitySelector())}),x(),r(37,"svg",42),v(38,"path",43),a(),c(39),a(),k(),r(40,"button",44),g("click",function(){p(e);let o=s(2);return u(o.openPlayerSelector())}),_(41,St,3,0)(42,kt,3,1),a()()()}if(i&2){let e=s(2);l(2),f(e.coverImage()?2:3),l(4),S(e.trackTitle()||"Kein Titel"),l(),f(e.artistId()?7:8),l(2),f(e.albumTitle()?9:-1),l(3),T("width",e.playerState.progressPercent(),"%"),l(4),S(e.playerState.formattedPosition()),l(2),S(e.playerState.formattedDuration()),l(9),f(e.playerState.isPlaying()?27:28),l(12),E(" ",e.playerState.qualityLabel()," "),l(2),f(e.playerState.playerMode()==="browser"?41:42)}}function Et(i,t){i&1&&(r(0,"div",52),x(),r(1,"svg",54),v(2,"path",55),a(),k(),r(3,"p"),c(4,"Warteschlange ist leer"),a()())}function Mt(i,t){if(i&1&&v(0,"img",17),i&2){let e=s().$implicit;j("src",e.imageUrl,R)("alt",e.title)}}function Vt(i,t){if(i&1&&(r(0,"div",57)(1,"span",58),c(2),a(),r(3,"div",59),_(4,Mt,1,2,"img",17),a(),r(5,"div",60)(6,"p",61),c(7),a(),r(8,"p",62),c(9),a()(),r(10,"span",63),c(11),a()()),i&2){let e=t.$implicit,n=t.$index,o=s(4);h("bg-accent-qobuz/10",n===o.playerState.queueIndex())("hover:bg-bg-card",n!==o.playerState.queueIndex()),l(2),S(n+1),l(2),f(e.imageUrl?4:-1),l(2),h("text-accent-qobuz",n===o.playerState.queueIndex()),l(),E(" ",e.title," "),l(2),S(e.artist),l(2),S(o.formatDuration(e.duration))}}function Tt(i,t){if(i&1&&(r(0,"div",53),N(1,Vt,12,11,"div",56,pt),a()),i&2){let e=s(3);l(),q(e.playerState.queue())}}function zt(i,t){if(i&1&&(r(0,"div",15),_(1,Et,5,0,"div",52)(2,Tt,3,0,"div",53),a()),i&2){let e=s(2);l(),f(e.playerState.queue().length===0?1:2)}}function Lt(i,t){if(i&1){let e=y();r(0,"div",6,2),g("touchstart",function(o){p(e);let b=s();return u(b.onTouchStart(o))})("touchmove",function(o){p(e);let b=s();return u(b.onTouchMove(o))})("touchend",function(){p(e);let o=s();return u(o.onTouchEnd())}),r(2,"div",7),g("mousedown",function(o){p(e);let b=s();return u(b.onDragStart(o))}),v(3,"div",8),a(),r(4,"div",9)(5,"button",10),g("click",function(){p(e);let o=s();return u(o.setTab("player"))}),c(6," Aktueller Titel "),_(7,_t,1,0,"div",11),a(),r(8,"button",10),g("click",function(){p(e);let o=s();return u(o.setTab("queue"))}),c(9," Warteschlange "),_(10,ft,2,1,"span",12),_(11,xt,1,0,"div",11),a()(),r(12,"div",13),_(13,Pt,43,11,"div",14)(14,zt,3,1,"div",15),a()()}if(i&2){let e=s();T("transform",e.popupTransform()),l(5),h("text-accent-qobuz",e.activeTab()==="player")("text-text-muted",e.activeTab()!=="player"),l(2),f(e.activeTab()==="player"?7:-1),l(),h("text-accent-qobuz",e.activeTab()==="queue")("text-text-muted",e.activeTab()!=="queue"),l(2),f(e.playerState.queue().length>0?10:-1),l(),f(e.activeTab()==="queue"?11:-1),l(2),f(e.activeTab()==="player"?13:14)}}var ne=class i{popupPanel;qualitySelector;playerSelector;playerState=C(D);playback=C(B);router=C($);activeTab=M("player");isClosing=M(!1);touchStartY=0;currentDragY=0;dragOffset=M(0);coverImage=H(()=>{let t=this.playerState.playbackStatus(),e=this.playerState.currentTrack();return t?.imageUrl||e?.album?.image?.large});trackTitle=H(()=>{let t=this.playerState.playbackStatus(),e=this.playerState.currentTrack();return t?.title||e?.title});artistName=H(()=>{let t=this.playerState.playbackStatus(),e=this.playerState.currentTrack();return t?.artist||e?.performer?.name});artistId=H(()=>{let t=this.playerState.playbackStatus(),e=this.playerState.currentTrack();return t?.artistId||e?.performer?.id});albumTitle=H(()=>{let t=this.playerState.playbackStatus(),e=this.playerState.currentTrack();return t?.album||e?.album?.title});popupTransform=H(()=>{if(this.isClosing())return"translateY(100%)";let t=this.dragOffset();return t>0?`translateY(${t}px)`:"translateY(0)"});setTab(t){this.activeTab.set(t)}close(){this.isClosing.set(!0),setTimeout(()=>{this.playerState.hideNowPlaying(),this.isClosing.set(!1),this.dragOffset.set(0)},300)}onTouchStart(t){this.touchStartY=t.touches[0].clientY,this.currentDragY=0}onTouchMove(t){let n=t.touches[0].clientY-this.touchStartY;n>0&&(this.currentDragY=n,this.dragOffset.set(n))}onTouchEnd(){this.currentDragY>100?this.close():this.dragOffset.set(0),this.currentDragY=0}onDragStart(t){t.preventDefault(),this.touchStartY=t.clientY;let e=o=>{let b=o.clientY-this.touchStartY;b>0&&(this.currentDragY=b,this.dragOffset.set(b))},n=()=>{this.currentDragY>100?this.close():this.dragOffset.set(0),this.currentDragY=0,document.removeEventListener("mousemove",e),document.removeEventListener("mouseup",n)};document.addEventListener("mousemove",e),document.addEventListener("mouseup",n)}togglePlayPause(){this.playback.togglePlayPause()}skipPrevious(){this.playback.skipPrevious()}skipNext(){this.playback.skipNext()}async seekTo(t){let n=t.currentTarget.getBoundingClientRect(),o=(t.clientX-n.left)/n.width*100;await this.playback.seekToPercent(o)}formatDuration=ve;openQualitySelector(){this.qualitySelector.open()}openPlayerSelector(){this.playerSelector.open()}onEscapeKey(){this.playerState.isNowPlayingVisible()&&this.close()}static \u0275fac=function(e){return new(e||i)};static \u0275cmp=V({type:i,selectors:[["app-now-playing-popup"]],viewQuery:function(e,n){if(e&1&&Y(st,5)(ct,5)(dt,5),e&2){let o;I(o=O())&&(n.popupPanel=o.first),I(o=O())&&(n.qualitySelector=o.first),I(o=O())&&(n.playerSelector=o.first)}},hostBindings:function(e,n){e&1&&g("keydown.escape",function(){return n.onEscapeKey()},L)},decls:6,vars:2,consts:[["qualitySelector",""],["playerSelector",""],["popupPanel",""],[1,"fixed","inset-0","bg-black/60","z-[100]","transition-opacity","duration-300",3,"opacity-100","opacity-0"],[1,"fixed","left-0","right-0","bottom-0","bg-bg-primary","rounded-t-3xl","z-[101]","max-h-[90vh]","overflow-hidden","flex","flex-col","transition-transform","duration-300","ease-out","safe-area-bottom",3,"transform"],[1,"fixed","inset-0","bg-black/60","z-[100]","transition-opacity","duration-300",3,"click"],[1,"fixed","left-0","right-0","bottom-0","bg-bg-primary","rounded-t-3xl","z-[101]","max-h-[90vh]","overflow-hidden","flex","flex-col","transition-transform","duration-300","ease-out","safe-area-bottom",3,"touchstart","touchmove","touchend"],[1,"flex","justify-center","py-3","cursor-grab",3,"mousedown"],[1,"w-10","h-1","bg-text-muted/30","rounded-full"],[1,"flex","border-b","border-border-subtle","px-4"],[1,"flex-1","py-3","text-sm","font-medium","transition-colors","relative",3,"click"],[1,"absolute","bottom-0","left-0","right-0","h-0.5","bg-accent-qobuz"],[1,"ml-1","px-1.5","py-0.5","bg-accent-qobuz/10","text-accent-qobuz","text-xs","rounded"],[1,"flex-1","overflow-y-auto"],[1,"p-6","flex","flex-col","items-center"],[1,"p-4"],[1,"w-64","h-64","md:w-80","md:h-80","rounded-xl","overflow-hidden","bg-bg-secondary","shadow-2xl","mb-6"],[1,"w-full","h-full","object-cover",3,"src","alt"],[1,"w-full","h-full","flex","items-center","justify-center","text-text-muted"],[1,"text-center","mb-6","w-full","max-w-md"],[1,"text-xl","font-bold","truncate","mb-1"],[1,"text-text-secondary","hover:text-accent-qobuz","transition-colors",3,"routerLink"],[1,"text-text-secondary"],[1,"text-sm","text-text-muted","mt-1","truncate"],[1,"w-full","max-w-md","mb-4"],[1,"h-1.5","bg-bg-secondary","rounded-full","cursor-pointer","group",3,"click"],[1,"h-full","bg-accent-qobuz","rounded-full","relative","transition-all"],[1,"absolute","right-0","top-1/2","-translate-y-1/2","w-4","h-4","bg-white","rounded-full","shadow-lg","opacity-0","group-hover:opacity-100","transition-opacity"],[1,"flex","justify-between","mt-2","text-xs","text-text-muted"],[1,"flex","items-center","justify-center","gap-6","mb-6"],[1,"w-10","h-10","text-text-muted","hover:text-text-primary","transition-colors"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"w-5","h-5","mx-auto"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"],[1,"w-12","h-12","text-text-primary","hover:text-accent-qobuz","transition-colors",3,"click"],["xmlns","http://www.w3.org/2000/svg","fill","currentColor","viewBox","0 0 24 24",1,"w-8","h-8","mx-auto"],["d","M6 6h2v12H6V6zm3.5 6l8.5 6V6l-8.5 6z"],[1,"w-16","h-16","rounded-full","bg-accent-qobuz","text-white","flex","items-center","justify-center","hover:opacity-90","transition-opacity","shadow-lg",3,"click"],["xmlns","http://www.w3.org/2000/svg","fill","currentColor","viewBox","0 0 24 24",1,"w-8","h-8"],["xmlns","http://www.w3.org/2000/svg","fill","currentColor","viewBox","0 0 24 24",1,"w-8","h-8","ml-1"],["d","M6 18l8.5-6L6 6v12zM16 6v12h2V6h-2z"],[1,"flex","items-center","gap-4","text-sm"],[1,"flex","items-center","gap-2","px-3","py-1.5","bg-accent-qobuz/10","text-accent-qobuz","rounded-lg","hover:bg-accent-qobuz/20","transition-colors",3,"click"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"w-4","h-4"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 19V6l12-3v13M9 19c0 1.105-1.343 2-3 2s-3-.895-3-2 1.343-2 3-2 3 .895 3 2zm12-3c0 1.105-1.343 2-3 2s-3-.895-3-2 1.343-2 3-2 3 .895 3 2zM9 10l12-3"],[1,"flex","items-center","gap-2","text-text-muted","hover:text-text-primary","transition-colors",3,"click"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"w-24","h-24"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","1","d","M9 19V6l12-3v13M9 19c0 1.105-1.343 2-3 2s-3-.895-3-2 1.343-2 3-2 3 .895 3 2zm12-3c0 1.105-1.343 2-3 2s-3-.895-3-2 1.343-2 3-2 3 .895 3 2zM9 10l12-3"],[1,"text-text-secondary","hover:text-accent-qobuz","transition-colors",3,"click","routerLink"],["d","M6 4h4v16H6V4zm8 0h4v16h-4V4z"],["d","M8 5v14l11-7z"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9.75 17L9 20l-1 1h8l-1-1-.75-3M3 13h18M5 17h14a2 2 0 002-2V5a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M19.428 15.428a2 2 0 00-1.022-.547l-2.387-.477a6 6 0 00-3.86.517l-.318.158a6 6 0 01-3.86.517L6.05 15.21a2 2 0 00-1.806.547M8 4h8l-1 1v5.172a2 2 0 00.586 1.414l5 5c1.26 1.26.367 3.414-1.415 3.414H4.828c-1.782 0-2.674-2.154-1.414-3.414l5-5A2 2 0 009 10.172V5L8 4z"],[1,"text-center","py-12","text-text-muted"],[1,"space-y-1"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"w-12","h-12","mx-auto","mb-4","opacity-50"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","1.5","d","M9 19V6l12-3v13M9 19c0 1.105-1.343 2-3 2s-3-.895-3-2 1.343-2 3-2 3 .895 3 2zm12-3c0 1.105-1.343 2-3 2s-3-.895-3-2 1.343-2 3-2 3 .895 3 2zM9 10l12-3"],[1,"flex","items-center","gap-3","p-3","rounded-lg","transition-colors",3,"bg-accent-qobuz/10","hover:bg-bg-card"],[1,"flex","items-center","gap-3","p-3","rounded-lg","transition-colors"],[1,"w-6","text-center","text-sm","text-text-muted"],[1,"w-10","h-10","rounded","bg-bg-secondary","overflow-hidden","flex-shrink-0"],[1,"flex-1","min-w-0"],[1,"text-sm","font-medium","truncate"],[1,"text-xs","text-text-muted","truncate"],[1,"text-sm","text-text-muted"]],template:function(e,n){e&1&&(_(0,ut,1,4,"div",3),_(1,Lt,15,14,"div",4),v(2,"app-quality-selector",null,0)(4,"app-player-selector",null,1)),e&2&&(f(n.playerState.isNowPlayingVisible()?0:-1),l(),f(n.playerState.isNowPlayingVisible()?1:-1))},dependencies:[z,Z,U,A],styles:[".safe-area-bottom[_ngcontent-%COMP%]{padding-bottom:env(safe-area-inset-bottom,0)}"]})};var Ht=i=>({exact:i}),Nt=(i,t)=>t.route;function qt(i,t){if(i&1){let e=y();r(0,"div",5),g("click",function(){p(e);let o=s();return u(o.close())}),a()}if(i&2){let e=s();h("opacity-100",!e.isClosing())("opacity-0",e.isClosing())}}function Dt(i,t){if(i&1){let e=y();r(0,"a",21),g("click",function(){p(e);let o=s(3);return u(o.close())}),v(1,"span",22),r(2,"span"),c(3),a()()}if(i&2){let e=s().$implicit;j("routerLink",e.route)("routerLinkActiveOptions",J(4,Ht,e.route==="/")),l(),j("innerHTML",e.icon,W),l(2),S(e.label)}}function jt(i,t){if(i&1&&_(0,Dt,4,6,"a",20),i&2){let e=t.$implicit,n=s(2);f(!e.requiresAuth||n.auth.isLoggedIn()?0:-1)}}function Bt(i,t){if(i&1&&(r(0,"p",23),c(1),a(),r(2,"p",24),c(3),a()),i&2){let e,n,o=s(2);l(),S(((e=o.profileService.activeProfile())==null?null:e.name)??((e=o.auth.user())==null?null:e.display_name)??"Profil"),l(2),S((n=o.auth.user())==null?null:n.email)}}function It(i,t){if(i&1&&(r(0,"p",23),c(1),a(),r(2,"p",25),c(3,"Nicht eingeloggt"),a()),i&2){let e,n=s(2);l(),S(((e=n.profileService.activeProfile())==null?null:e.name)??"Kein Profil")}}function Ot(i,t){if(i&1){let e=y();r(0,"button",26),g("click",function(){p(e);let o=s(2);return u(o.logout())}),x(),r(1,"svg",27),v(2,"path",28),a(),c(3," Von Qobuz abmelden "),a()}}function Ft(i,t){if(i&1){let e=y();r(0,"a",29),g("click",function(){p(e);let o=s(2);return u(o.close())}),c(1," Bei Qobuz anmelden "),a()}}function Gt(i,t){if(i&1){let e=y();r(0,"nav",6)(1,"div",7)(2,"h1",8),c(3,"Bluesound"),a(),r(4,"p",9),c(5,"Web Controller"),a()(),r(6,"div",10),N(7,jt,1,1,null,null,Nt),a(),r(9,"div",11)(10,"button",12),g("click",function(){p(e);let o=s();return u(o.openProfileSwitcher())}),r(11,"div",13),c(12),a(),r(13,"div",14),_(14,Bt,4,2)(15,It,4,1),r(16,"p",15),c(17,"Profil wechseln"),a()(),x(),r(18,"svg",16),v(19,"path",17),a()(),_(20,Ot,4,0,"button",18)(21,Ft,2,0,"a",19),a()()}if(i&2){let e=s();h("translate-x-0",!e.isClosing())("-translate-x-full",e.isClosing()),l(7),q(e.menuItems),l(4),T("background-color",e.activeProfileColor()),l(),E(" ",e.activeProfileInitial()," "),l(2),f(e.auth.isLoggedIn()?14:15),l(6),f(e.auth.isLoggedIn()?20:21)}}function Qt(i,t){if(i&1){let e=y();r(0,"app-profile-switcher",30),g("closed",function(){p(e);let o=s();return u(o.closeProfileSwitcher())})("profileSelected",function(o){p(e);let b=s();return u(b.onProfileSelected(o))}),a()}}var oe=class i{auth=C(ue);profileService=C(ee);router=C($);isOpen=M(!1);isClosing=M(!1);showProfileSwitcher=M(!1);menuItems=[{label:"Home",route:"/",icon:'<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6" /></svg>'},{label:"Qobuz",route:"/qobuz/browse",icon:'<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19V6l12-3v13M9 19c0 1.105-1.343 2-3 2s-3-.895-3-2 1.343-2 3-2 3 .895 3 2zm12-3c0 1.105-1.343 2-3 2s-3-.895-3-2 1.343-2 3-2 3 .895 3 2zM9 10l12-3" /></svg>',requiresAuth:!0},{label:"TuneIn",route:"/tunein",icon:'<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5.636 18.364a9 9 0 010-12.728m12.728 0a9 9 0 010 12.728m-9.9-2.829a5 5 0 010-7.07m7.072 0a5 5 0 010 7.07M13 12a1 1 0 11-2 0 1 1 0 012 0z" /></svg>'},{label:"Radio Paradise",route:"/radioparadise",icon:'<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19.428 15.428a2 2 0 00-1.022-.547l-2.387-.477a6 6 0 00-3.86.517l-.318.158a6 6 0 01-3.86.517L6.05 15.21a2 2 0 00-1.806.547M8 4h8l-1 1v5.172a2 2 0 00.586 1.414l5 5c1.26 1.26.367 3.414-1.415 3.414H4.828c-1.782 0-2.674-2.154-1.414-3.414l5-5A2 2 0 009 10.172V5L8 4z" /></svg>'},{label:"Ger\xE4te",route:"/players",icon:'<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.75 17L9 20l-1 1h8l-1-1-.75-3M3 13h18M5 17h14a2 2 0 002-2V5a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z" /></svg>'},{label:"Einstellungen",route:"/settings",icon:'<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"><circle cx="12" cy="12" r="3" stroke-width="2"/><path stroke-width="2" d="M19.4 15a1.65 1.65 0 00.33 1.82l.06.06a2 2 0 010 2.83 2 2 0 01-2.83 0l-.06-.06a1.65 1.65 0 00-1.82-.33 1.65 1.65 0 00-1 1.51V21a2 2 0 01-2 2 2 2 0 01-2-2v-.09A1.65 1.65 0 009 19.4a1.65 1.65 0 00-1.82.33l-.06.06a2 2 0 01-2.83 0 2 2 0 010-2.83l.06-.06a1.65 1.65 0 00.33-1.82 1.65 1.65 0 00-1.51-1H3a2 2 0 01-2-2 2 2 0 012-2h.09A1.65 1.65 0 004.6 9a1.65 1.65 0 00-.33-1.82l-.06-.06a2 2 0 010-2.83 2 2 0 012.83 0l.06.06a1.65 1.65 0 001.82.33H9a1.65 1.65 0 001-1.51V3a2 2 0 012-2 2 2 0 012 2v.09a1.65 1.65 0 001 1.51 1.65 1.65 0 001.82-.33l.06-.06a2 2 0 012.83 0 2 2 0 010 2.83l-.06.06a1.65 1.65 0 00-.33 1.82V9a1.65 1.65 0 001.51 1H21a2 2 0 012 2 2 2 0 01-2 2h-.09a1.65 1.65 0 00-1.51 1z"/></svg>'}];ngOnInit(){this.profileService.loadProfiles().subscribe()}activeProfileColor(){let t=this.profileService.activeProfile();return t?this.profileService.getProfileColor(t.id):"hsl(200, 65%, 45%)"}activeProfileInitial(){let t=this.profileService.activeProfile();if(t)return this.profileService.getProfileInitial(t.name);let e=this.auth.user();return e?.display_name?e.display_name.charAt(0).toUpperCase():"Q"}toggle(){this.isOpen()?this.close():this.isOpen.set(!0)}close(){this.isClosing.set(!0),setTimeout(()=>{this.isOpen.set(!1),this.isClosing.set(!1)},300)}openProfileSwitcher(){this.showProfileSwitcher.set(!0)}closeProfileSwitcher(){this.showProfileSwitcher.set(!1)}onProfileSelected(t){t.qobuz?.authToken?this.auth.loadFromProfileCredentials(t.qobuz):(this.auth.logout(),this.close(),this.router.navigate(["/qobuz/login"]))}logout(){this.auth.logout(),this.close(),this.router.navigate(["/"])}onEscapeKey(){this.showProfileSwitcher()||this.isOpen()&&this.close()}static \u0275fac=function(e){return new(e||i)};static \u0275cmp=V({type:i,selectors:[["app-hamburger-menu"]],hostBindings:function(e,n){e&1&&g("keydown.escape",function(){return n.onEscapeKey()},L)},decls:8,vars:15,consts:[[1,"hamburger-btn","fixed","top-4","left-4","z-[110]","w-10","h-10","rounded-lg","bg-bg-card","border","border-border-subtle","flex","items-center","justify-center","hover:bg-bg-card-hover","transition-colors",3,"click"],[1,"hamburger-lines","w-5","h-4","relative","flex","flex-col","justify-between"],[1,"block","h-0.5","w-full","bg-text-primary","rounded","transition-all","duration-300"],[1,"fixed","inset-0","bg-black/50","z-[55]","transition-opacity","duration-300",3,"opacity-100","opacity-0"],[1,"fixed","top-0","left-0","bottom-0","w-72","max-w-[80vw]","bg-bg-primary","z-[56]","shadow-2xl","transition-transform","duration-300","ease-out","flex","flex-col","safe-area-left",3,"translate-x-0","-translate-x-full"],[1,"fixed","inset-0","bg-black/50","z-[55]","transition-opacity","duration-300",3,"click"],[1,"fixed","top-0","left-0","bottom-0","w-72","max-w-[80vw]","bg-bg-primary","z-[56]","shadow-2xl","transition-transform","duration-300","ease-out","flex","flex-col","safe-area-left"],[1,"p-6","pt-20","border-b","border-border-subtle"],[1,"text-xl","font-bold","text-text-primary"],[1,"text-sm","text-text-muted","mt-1"],[1,"flex-1","overflow-y-auto","py-4"],[1,"border-t","border-border-subtle","p-4"],[1,"w-full","flex","items-center","gap-3","p-2","-m-2","rounded-xl","hover:bg-bg-card","transition-colors","text-left",3,"click"],[1,"w-12","h-12","rounded-full","flex","items-center","justify-center","text-white","font-semibold","text-lg","flex-shrink-0"],[1,"flex-1","min-w-0"],[1,"text-xs","text-accent-qobuz","mt-0.5"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"w-5","h-5","text-text-muted","flex-shrink-0"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 5l7 7-7 7"],[1,"w-full","mt-3","px-4","py-2","text-sm","text-text-muted","hover:text-error","hover:bg-error/10","rounded-lg","transition-colors","flex","items-center","justify-center","gap-2"],["routerLink","/qobuz/login",1,"block","w-full","mt-3","px-4","py-3","bg-accent-qobuz","text-white","text-center","rounded-lg","font-medium","hover:opacity-90","transition-opacity"],["routerLinkActive","bg-accent-qobuz/10 text-accent-qobuz border-r-2 border-accent-qobuz",1,"flex","items-center","gap-4","px-6","py-3","text-text-secondary","hover:bg-bg-card","transition-colors",3,"routerLink","routerLinkActiveOptions"],["routerLinkActive","bg-accent-qobuz/10 text-accent-qobuz border-r-2 border-accent-qobuz",1,"flex","items-center","gap-4","px-6","py-3","text-text-secondary","hover:bg-bg-card","transition-colors",3,"click","routerLink","routerLinkActiveOptions"],[1,"w-6","h-6",3,"innerHTML"],[1,"font-medium","truncate"],[1,"text-xs","text-text-muted","truncate"],[1,"text-xs","text-text-muted"],[1,"w-full","mt-3","px-4","py-2","text-sm","text-text-muted","hover:text-error","hover:bg-error/10","rounded-lg","transition-colors","flex","items-center","justify-center","gap-2",3,"click"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"w-4","h-4"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"],["routerLink","/qobuz/login",1,"block","w-full","mt-3","px-4","py-3","bg-accent-qobuz","text-white","text-center","rounded-lg","font-medium","hover:opacity-90","transition-opacity",3,"click"],[3,"closed","profileSelected"]],template:function(e,n){e&1&&(r(0,"button",0),g("click",function(){return n.toggle()}),r(1,"div",1),v(2,"span",2)(3,"span",2)(4,"span",2),a()(),_(5,qt,1,4,"div",3),_(6,Gt,22,9,"nav",4),_(7,Qt,1,0,"app-profile-switcher")),e&2&&(h("is-open",n.isOpen()),l(2),h("rotate-45",n.isOpen())("translate-y-[7px]",n.isOpen()),l(),h("opacity-0",n.isOpen()),l(),h("-rotate-45",n.isOpen())("-translate-y-[7px]",n.isOpen()),l(),f(n.isOpen()?5:-1),l(),f(n.isOpen()?6:-1),l(),f(n.showProfileSwitcher()?7:-1))},dependencies:[z,Z,pe,K],styles:[".safe-area-left[_ngcontent-%COMP%]{padding-left:env(safe-area-inset-left,0)}"]})};var At=(i,t)=>t.id;function Yt(i,t){if(i&1){let e=y();d(0,"div",8),P("click",function(){p(e);let o=s();return u(o.close())}),m()}}function $t(i,t){if(i&1){let e=y();d(0,"button",9),P("click",function(){let o=p(e).$implicit,b=s();return u(b.executeAction(o))}),w(1,"span",10),d(2,"span",11),c(3),m()()}if(i&2){let e=t.$implicit,n=t.$index,o=s();T("transition-delay",o.getTransitionDelay(n))("--icon-color",e.color),h("fab-mini-visible",o.isOpen()),l(),X("innerHTML",e.iconHtml,W),l(2),S(e.label)}}var re=class i{router=C($);sanitizer=C(me);playerState=C(D);isOpen=M(!1);fabBottomPosition=H(()=>{let t=this.playerState.isVolumePanelVisible();return(window.innerWidth>=768?116:100)+(t?320:0)});colors={tunein:"#f97316",radioparadise:"#f97316",qobuz:"#1db954",player:"#a1a1aa"};icons={tunein:this.sanitizer.bypassSecurityTrustHtml(`
      <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
        <path d="M4.9 19.1C1 15.2 1 8.8 4.9 4.9"/>
        <path d="M7.8 16.2c-2.3-2.3-2.3-6.1 0-8.5"/>
        <circle cx="12" cy="12" r="2"/>
        <path d="M16.2 7.8c2.3 2.3 2.3 6.1 0 8.5"/>
        <path d="M19.1 4.9C23 8.8 23 15.1 19.1 19"/>
      </svg>
    `),radioparadise:this.sanitizer.bypassSecurityTrustHtml(`
      <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
        <circle cx="12" cy="12" r="2"/>
        <path d="M16.24 7.76a6 6 0 0 1 0 8.49"/>
        <path d="M7.76 16.24a6 6 0 0 1 0-8.49"/>
        <path d="M19.07 4.93a10 10 0 0 1 0 14.14"/>
        <path d="M4.93 19.07a10 10 0 0 1 0-14.14"/>
      </svg>
    `),qobuz:this.sanitizer.bypassSecurityTrustHtml(`
      <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
        <path d="M9 18V5l12-2v13"/>
        <circle cx="6" cy="18" r="3"/>
        <circle cx="18" cy="16" r="3"/>
      </svg>
    `),player:this.sanitizer.bypassSecurityTrustHtml(`
      <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
        <rect x="4" y="4" width="16" height="16" rx="2"/>
        <circle cx="12" cy="12" r="3"/>
      </svg>
    `)};actions=[{id:"tunein",label:"TuneIn",iconHtml:this.icons.tunein,route:"/tunein",color:this.colors.tunein},{id:"radio-paradise",label:"Radio Paradise",iconHtml:this.icons.radioparadise,route:"/radioparadise",color:this.colors.radioparadise},{id:"qobuz",label:"Qobuz",iconHtml:this.icons.qobuz,route:"/qobuz/browse",color:this.colors.qobuz},{id:"player",label:"Player",iconHtml:this.icons.player,route:"/players",color:this.colors.player}];getTransitionDelay(t){return this.isOpen()?`${(this.actions.length-1-t)*50}ms`:`${t*30}ms`}toggle(){this.isOpen.update(t=>!t)}close(){this.isOpen.set(!1)}executeAction(t){this.close(),setTimeout(()=>{t.route?this.router.navigate([t.route]):t.action&&t.action()},100)}onEscapeKey(){this.isOpen()&&this.close()}static \u0275fac=function(e){return new(e||i)};static \u0275cmp=V({type:i,selectors:[["app-fab-menu"]],hostBindings:function(e,n){e&1&&g("keydown.escape",function(){return n.onEscapeKey()},L)},decls:9,vars:10,consts:[[1,"fab-overlay","fixed","inset-0","bg-black/40","z-[449]"],[1,"fab-container","fixed","z-[450]","right-4","md:right-6","transition-all","duration-300"],[1,"fab-actions","absolute","bottom-[68px]","right-0","flex","flex-col","items-end","gap-3"],[1,"fab-mini","flex","items-center","gap-3","h-12","px-4","pl-3","rounded-[14px]","bg-bg-secondary","border","border-border-subtle","text-text-primary","text-sm","font-medium","whitespace-nowrap","cursor-pointer","shadow-lg","transition-all",3,"fab-mini-visible","transition-delay","--icon-color"],["aria-haspopup","true","aria-label","Men\xFC \xF6ffnen",1,"fab-main","w-14","h-14","rounded-2xl","bg-accent-qobuz","border-none","cursor-pointer","flex","items-center","justify-center","shadow-xl","transition-all","duration-200","hover:shadow-2xl","active:scale-95","relative","z-[2]",3,"click"],["viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"fab-plus-icon","w-6","h-6","text-white","transition-transform","duration-300"],["x1","12","y1","5","x2","12","y2","19"],["x1","5","y1","12","x2","19","y2","12"],[1,"fab-overlay","fixed","inset-0","bg-black/40","z-[449]",3,"click"],[1,"fab-mini","flex","items-center","gap-3","h-12","px-4","pl-3","rounded-[14px]","bg-bg-secondary","border","border-border-subtle","text-text-primary","text-sm","font-medium","whitespace-nowrap","cursor-pointer","shadow-lg","transition-all",3,"click"],[1,"fab-icon","w-6","h-6","flex-shrink-0",3,"innerHTML"],[1,"fab-label"]],template:function(e,n){e&1&&(_(0,Yt,1,0,"div",0),d(1,"div",1)(2,"div",2),N(3,$t,4,8,"button",3,At),m(),d(5,"button",4),P("click",function(){return n.toggle()}),x(),d(6,"svg",5),w(7,"line",6)(8,"line",7),m()()()),e&2&&(f(n.isOpen()?0:-1),l(),T("bottom",n.fabBottomPosition(),"px"),l(),h("pointer-events-none",!n.isOpen())("pointer-events-auto",n.isOpen()),l(),q(n.actions),l(2),ae("aria-expanded",n.isOpen()),l(),h("rotate-45",n.isOpen()))},dependencies:[z],styles:[".fab-mini[_ngcontent-%COMP%]{opacity:0;transform:scale(.3) translateY(20px);transition:opacity .25s cubic-bezier(.32,.72,0,1),transform .25s cubic-bezier(.32,.72,0,1),background .15s ease,border-color .15s ease}.fab-mini-visible[_ngcontent-%COMP%]{opacity:1;transform:scale(1) translateY(0)}.fab-mini[_ngcontent-%COMP%]:hover{background:var(--color-bg-primary);border-color:var(--icon-color)}.fab-mini[_ngcontent-%COMP%]:active{transform:scale(.97) translateY(0)!important}.fab-icon[_ngcontent-%COMP%]{color:var(--icon-color);display:flex;align-items:center;justify-content:center}.fab-icon[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:deep(svg){width:100%;height:100%}"]})};var Rt=["sliderTrack"];function Kt(i,t){i&1&&(d(0,"div",8),x(),d(1,"svg",11),w(2,"path",12),m(),k(),d(3,"p",13),c(4,"Fixed Volume"),m(),d(5,"p",14),c(6,"Die Lautst\xE4rke wird extern gesteuert"),m()())}function Ut(i,t){i&1&&(x(),d(0,"svg",6),w(1,"path",29)(2,"path",30),m())}function Wt(i,t){i&1&&(x(),d(0,"svg",6),w(1,"path",31),m())}function Xt(i,t){if(i&1){let e=y();d(0,"div",15)(1,"div",16)(2,"button",17),P("click",function(){p(e);let o=s(2);return u(o.toggleMute())}),_(3,Ut,3,0,":svg:svg",6)(4,Wt,2,0,":svg:svg",6),m(),d(5,"span",18),c(6),m(),d(7,"span",19),c(8,"%"),m()(),d(9,"div",20,0),P("mousedown",function(o){p(e);let b=s(2);return u(b.onSliderStart(o))})("touchstart",function(o){p(e);let b=s(2);return u(b.onTouchStart(o))}),w(11,"div",21)(12,"div",22)(13,"div",23),m()(),d(14,"div",24)(15,"button",25),P("click",function(){p(e);let o=s(2);return u(o.decreaseVolume())}),x(),d(16,"svg",26),w(17,"path",27),m()(),k(),d(18,"button",25),P("click",function(){p(e);let o=s(2);return u(o.increaseVolume())}),x(),d(19,"svg",26),w(20,"path",28),m()()()}if(i&2){let e=s(2);l(3),f(e.playerState.isMuted()||e.playerState.volume()===0?3:4),l(3),E(" ",e.playerState.isMuted()?0:e.playerState.volume()," "),l(6),T("width",e.playerState.isMuted()?0:e.playerState.volume(),"%"),l(),T("left",e.playerState.isMuted()?0:e.playerState.volume(),"%")}}function Jt(i,t){i&1&&(d(0,"span",10),x(),d(1,"svg",32),w(2,"path",33),m(),c(3," Browser-Wiedergabe "),m())}function Zt(i,t){if(i&1&&(d(0,"span",10),x(),d(1,"svg",34),w(2,"path",35),m(),c(3),m()),i&2){let e,n=s(2);l(3),E(" ",(e=n.playerState.selectedPlayer())==null?null:e.name," ")}}function ei(i,t){if(i&1){let e=y();d(0,"div",1),P("click",function(){p(e);let o=s();return u(o.close())}),m(),d(1,"div",2),P("click",function(o){return p(e),u(o.stopPropagation())}),d(2,"div",3)(3,"h3",4),c(4,"Lautst\xE4rke"),m(),d(5,"button",5),P("click",function(){p(e);let o=s();return u(o.close())}),x(),d(6,"svg",6),w(7,"path",7),m()()(),_(8,Kt,7,0,"div",8)(9,Xt,21,6),k(),d(10,"div",9),_(11,Jt,4,0,"span",10)(12,Zt,4,1,"span",10),m()()}if(i&2){let e=s();l(8),f(e.playerState.isFixedVolume()?8:9),l(3),f(e.playerState.playerMode()==="browser"?11:e.playerState.selectedPlayer()?12:-1)}}var le=class i{sliderTrack;playerState=C(D);playback=C(B);volumeStep=2;isDragging=!1;close(){this.playerState.isVolumePanelVisible.set(!1)}toggleMute(){this.playback.toggleMute()}setVolume(t){this.playback.setVolume(t)}increaseVolume(){let t=this.playerState.volume(),e=Math.min(100,t+this.volumeStep);this.playback.setVolume(e)}decreaseVolume(){let t=this.playerState.volume(),e=Math.max(0,t-this.volumeStep);this.playback.setVolume(e)}onSliderStart(t){this.isDragging=!0,this.updateVolumeFromEvent(t);let e=o=>{this.isDragging&&this.updateVolumeFromEvent(o)},n=()=>{this.isDragging=!1,document.removeEventListener("mousemove",e),document.removeEventListener("mouseup",n)};document.addEventListener("mousemove",e),document.addEventListener("mouseup",n)}onTouchStart(t){this.isDragging=!0,this.updateVolumeFromTouch(t);let e=o=>{this.isDragging&&(o.preventDefault(),this.updateVolumeFromTouch(o))},n=()=>{this.isDragging=!1,document.removeEventListener("touchmove",e),document.removeEventListener("touchend",n)};document.addEventListener("touchmove",e,{passive:!1}),document.addEventListener("touchend",n)}updateVolumeFromEvent(t){if(!this.sliderTrack)return;let n=this.sliderTrack.nativeElement.getBoundingClientRect(),o=Math.max(0,Math.min(100,(t.clientX-n.left)/n.width*100)),b=Math.round(o);this.playback.setVolume(b)}updateVolumeFromTouch(t){if(!this.sliderTrack||!t.touches[0])return;let n=this.sliderTrack.nativeElement.getBoundingClientRect(),o=Math.max(0,Math.min(100,(t.touches[0].clientX-n.left)/n.width*100)),b=Math.round(o);this.playback.setVolume(b)}onEscapeKey(){this.playerState.isVolumePanelVisible()&&this.close()}static \u0275fac=function(e){return new(e||i)};static \u0275cmp=V({type:i,selectors:[["app-volume-panel"]],viewQuery:function(e,n){if(e&1&&Y(Rt,5),e&2){let o;I(o=O())&&(n.sliderTrack=o.first)}},hostBindings:function(e,n){e&1&&g("keydown.escape",function(){return n.onEscapeKey()},L)},decls:1,vars:1,consts:[["sliderTrack",""],[1,"fixed","inset-0","bg-black/40","z-[80]",3,"click"],[1,"fixed","bottom-0","left-0","right-0","bg-bg-primary","rounded-t-2xl","z-[81]","p-6","safe-area-bottom","animate-slide-up",3,"click"],[1,"flex","items-center","justify-between","mb-6"],[1,"text-lg","font-semibold"],[1,"w-8","h-8","rounded-full","hover:bg-bg-card","flex","items-center","justify-center","text-text-muted","hover:text-text-primary","transition-colors",3,"click"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"w-5","h-5"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M6 18L18 6M6 6l12 12"],[1,"text-center","py-8","text-text-muted"],[1,"mt-6","pt-4","border-t","border-border-subtle","text-center","text-sm","text-text-muted"],[1,"flex","items-center","justify-center","gap-2"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"w-12","h-12","mx-auto","mb-3","opacity-50"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","1.5","d","M15.536 8.464a5 5 0 010 7.072m2.828-9.9a9 9 0 010 12.728M5.586 15H4a1 1 0 01-1-1v-4a1 1 0 011-1h1.586l4.707-4.707C10.923 3.663 12 4.109 12 5v14c0 .891-1.077 1.337-1.707.707L5.586 15z"],[1,"font-medium"],[1,"text-sm","mt-1"],[1,"mb-6"],[1,"flex","items-center","justify-center","gap-4","mb-4"],[1,"w-10","h-10","rounded-full","bg-bg-card","flex","items-center","justify-center","text-text-secondary","hover:text-text-primary","transition-colors",3,"click"],[1,"text-4xl","font-bold","tabular-nums","min-w-[80px]","text-center"],[1,"text-text-muted"],[1,"relative","h-12","flex","items-center","cursor-pointer","touch-none",3,"mousedown","touchstart"],[1,"absolute","inset-x-0","h-2","bg-bg-secondary","rounded-full"],[1,"absolute","left-0","h-2","bg-accent-qobuz","rounded-full","transition-all"],[1,"absolute","w-6","h-6","bg-white","rounded-full","shadow-lg","border-2","border-accent-qobuz","transition-all","-translate-x-1/2"],[1,"flex","items-center","justify-center","gap-6"],[1,"w-16","h-16","rounded-2xl","bg-bg-card","text-text-primary","flex","items-center","justify-center","text-3xl","font-medium","hover:bg-bg-card-hover","active:scale-95","transition-all",3,"click"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor","stroke-width","2",1,"w-8","h-8"],["stroke-linecap","round","stroke-linejoin","round","d","M20 12H4"],["stroke-linecap","round","stroke-linejoin","round","d","M12 4v16m8-8H4"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M5.586 15H4a1 1 0 01-1-1v-4a1 1 0 011-1h1.586l4.707-4.707C10.923 3.663 12 4.109 12 5v14c0 .891-1.077 1.337-1.707.707L5.586 15z"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M17 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M15.536 8.464a5 5 0 010 7.072m2.828-9.9a9 9 0 010 12.728M5.586 15H4a1 1 0 01-1-1v-4a1 1 0 011-1h1.586l4.707-4.707C10.923 3.663 12 4.109 12 5v14c0 .891-1.077 1.337-1.707.707L5.586 15z"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"w-4","h-4"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9.75 17L9 20l-1 1h8l-1-1-.75-3M3 13h18M5 17h14a2 2 0 002-2V5a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"w-4","h-4","text-accent-qobuz"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M19.428 15.428a2 2 0 00-1.022-.547l-2.387-.477a6 6 0 00-3.86.517l-.318.158a6 6 0 01-3.86.517L6.05 15.21a2 2 0 00-1.806.547M8 4h8l-1 1v5.172a2 2 0 00.586 1.414l5 5c1.26 1.26.367 3.414-1.415 3.414H4.828c-1.782 0-2.674-2.154-1.414-3.414l5-5A2 2 0 009 10.172V5L8 4z"]],template:function(e,n){e&1&&_(0,ei,13,2),e&2&&f(n.playerState.isVolumePanelVisible()?0:-1)},dependencies:[z],styles:[".safe-area-bottom[_ngcontent-%COMP%]{padding-bottom:env(safe-area-inset-bottom,0)}@keyframes _ngcontent-%COMP%_slide-up{0%{transform:translateY(100%)}to{transform:translateY(0)}}.animate-slide-up[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_slide-up .3s ease-out}"]})};export{ie as a,ne as b,K as c,oe as d,re as e,le as f};
