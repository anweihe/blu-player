import{e as G,f as N,l as v}from"./chunk-GYSMW3IL.js";import{$b as A,Ab as b,Ea as B,Ha as a,Hb as F,M as $,R as u,Ta as O,W as q,Wb as j,X as U,Y as d,Z as k,ab as g,bb as y,cb as M,db as _,eb as h,fb as z,gb as n,ha as T,hb as r,ib as s,j as w,mb as R,o as E,ob as D,qb as l,vb as V,x as L,xb as f,yb as c,zb as P}from"./chunk-63K3V35C.js";var C=class t{http=u(A);auth=u(v);getHistory(){let e=this.auth.getProfileId();return e?this.http.get(`/Qobuz?handler=History&profileId=${encodeURIComponent(e)}`).pipe(E(i=>this.transformToSections(i)),L(()=>w([]))):w([])}transformToSections(e){let i=[];return e.qobuzPlaylists?.length>0&&i.push({title:"Zuletzt geh\xF6rt - Playlists",iconType:"qobuz",items:e.qobuzPlaylists.map(o=>this.transformPlaylist(o))}),e.qobuzAlbums?.length>0&&i.push({title:"Zuletzt geh\xF6rt - Alben",iconType:"qobuz",items:e.qobuzAlbums.map(o=>this.transformAlbum(o))}),e.tuneIn?.length>0&&i.push({title:"Zuletzt geh\xF6rt - Radio",iconType:"tunein",items:e.tuneIn.map(o=>this.transformTuneIn(o))}),e.radioParadise?.length>0&&i.push({title:"Zuletzt geh\xF6rt - Radio Paradise",iconType:"radioparadise",items:e.radioParadise.map(o=>this.transformRadioParadise(o))}),i}transformPlaylist(e){return{id:e.id,title:e.playlistName,imageUrl:e.coverUrl,type:"playlist",actionId:e.playlistId}}transformAlbum(e){return{id:e.id,title:e.albumName,subtitle:e.artist,imageUrl:e.coverUrl,type:"album",actionId:e.albumId}}transformTuneIn(e){return{id:e.id,title:e.title,imageUrl:e.imageUrl,type:"tunein",actionUrl:e.actionUrl}}transformRadioParadise(e){return{id:e.id,title:e.title,subtitle:e.quality,imageUrl:e.imageUrl,type:"radioparadise",actionUrl:e.actionUrl}}addAlbumToHistory(e,i,o,m){let p=this.auth.getProfileId();if(!p)return;let H=`history_albums_${p}`,x=this.getLocalHistory(H).filter(J=>J.albumId!==e);x.unshift({id:`album_${e}_${Date.now()}`,albumId:e,albumName:i,artist:o,coverUrl:m,type:"album"});let I=x.slice(0,20);localStorage.setItem(H,JSON.stringify(I))}addPlaylistToHistory(e,i,o){let m=this.auth.getProfileId();if(!m)return;let p=`history_playlists_${m}`,S=this.getLocalHistory(p).filter(I=>I.playlistId!==e);S.unshift({id:`playlist_${e}_${Date.now()}`,playlistId:e,playlistName:i,coverUrl:o,type:"playlist"});let x=S.slice(0,20);localStorage.setItem(p,JSON.stringify(x))}getLocalHistory(e){try{let i=localStorage.getItem(e);return i?JSON.parse(i):[]}catch{return[]}}static \u0275fac=function(i){return new(i||t)};static \u0275prov=$({token:t,factory:t.\u0275fac,providedIn:"root"})};var W=()=>[1,2],K=()=>[1,2,3,4],Z=(t,e)=>e.id,X=(t,e)=>e.title;function ee(t,e){if(t&1&&(n(0,"div",9),c(1),r()),t&2){let i=l();a(),b(" ",i.profileInitial()," ")}}function te(t,e){if(t&1&&(d(),n(0,"svg",27),s(1,"circle",28)(2,"circle",29),r()),t&2){let i=l().$implicit;f(i.colorClass)}}function ie(t,e){if(t&1&&(d(),n(0,"svg",30),s(1,"circle",31)(2,"path",32)(3,"path",33)(4,"circle",34),r()),t&2){let i=l().$implicit;f(i.colorClass)}}function oe(t,e){if(t&1&&(d(),n(0,"svg",30),s(1,"path",35)(2,"path",36)(3,"path",37),r()),t&2){let i=l().$implicit;f(i.colorClass)}}function ne(t,e){if(t&1&&(n(0,"a",21)(1,"div",22),g(2,te,3,2,":svg:svg",23)(3,ie,5,2,":svg:svg",24)(4,oe,4,2,":svg:svg",24),r(),n(5,"span",25),c(6),r(),n(7,"span",26),c(8),r()()),t&2){let i,o=e.$implicit;f("hover:border-"+o.hoverBorderClass),z("routerLink",o.route),a(),f(o.bgClass),a(),y((i=o.id)==="qobuz"?2:i==="tunein"?3:i==="radioparadise"?4:-1),a(4),P(o.name),a(2),P(o.description)}}function re(t,e){t&1&&(n(0,"div",41),s(1,"div",42)(2,"div",43),r())}function ae(t,e){t&1&&(n(0,"div",38),s(1,"div",39),n(2,"div",40),_(3,re,3,0,"div",41,M),r()()),t&2&&(a(3),h(F(0,K)))}function se(t,e){t&1&&(n(0,"div",16),_(1,ae,5,1,"div",38,M),r()),t&2&&(a(),h(F(0,W)))}function le(t,e){if(t&1&&s(0,"img",50),t&2){let i=l().$implicit;z("src",i.imageUrl,B)("alt",i.title)}}function ce(t,e){t&1&&(d(),s(0,"circle",5)(1,"path",56)(2,"circle",57))}function de(t,e){t&1&&(d(),s(0,"path",58)(1,"path",59)(2,"path",60))}function me(t,e){t&1&&(d(),s(0,"path",61)(1,"circle",62)(2,"circle",63))}function pe(t,e){if(t&1&&(n(0,"div",54),d(),n(1,"svg",55),g(2,ce,3,0)(3,de,3,0)(4,me,3,0),r()()),t&2){let i,o=l(2).$implicit,m=l(2);f(m.getPlaceholderClass(o.iconType)),a(2),y((i=o.iconType)==="tunein"?2:i==="radioparadise"?3:4)}}function ue(t,e){if(t&1&&(n(0,"span",53),c(1),r()),t&2){let i=l().$implicit;a(),b(" ",i.subtitle," ")}}function ge(t,e){if(t&1){let i=R();n(0,"button",49),D("click",function(){let m=q(i).$implicit,p=l(3);return U(p.playFromHistory(m))}),g(1,le,1,2,"img",50)(2,pe,5,3,"div",51),n(3,"span",52),c(4),r(),g(5,ue,2,1,"span",53),r()}if(t&2){let i=e.$implicit;a(),y(i.imageUrl?1:2),a(3),b(" ",i.title," "),a(),y(i.subtitle?5:-1)}}function ye(t,e){if(t&1&&(n(0,"section",45)(1,"h3",46),c(2),s(3,"span",47),r(),n(4,"div",40),_(5,ge,6,3,"button",48,Z),r()()),t&2){let i=e.$implicit,o=e.$index;V("animation-delay",o*50,"ms"),a(2),b(" ",i.title," "),a(3),h(i.items)}}function fe(t,e){if(t&1&&(n(0,"div",16),_(1,ye,7,3,"section",44,X),r()),t&2){let i=l();a(),h(i.historySections())}}var Q=class t{auth=u(v);historyService=u(C);router=u(G);isLoading=T(!0);historySections=T([]);sources=[{id:"qobuz",name:"Qobuz",description:"Hi-Res Streaming",route:"/qobuz",colorClass:"text-accent-qobuz",bgClass:"bg-accent-qobuz/15",hoverBorderClass:"accent-qobuz"},{id:"tunein",name:"TuneIn",description:"Internet Radio",route:"/tunein",colorClass:"text-orange-500",bgClass:"bg-orange-500/15",hoverBorderClass:"orange-500"},{id:"radioparadise",name:"Radio Paradise",description:"Eclectic Mix",route:"/radioparadise",colorClass:"text-emerald-500",bgClass:"bg-emerald-500/15",hoverBorderClass:"emerald-500"}];profileInitial=()=>"?";ngOnInit(){this.loadHistory()}loadHistory(){this.isLoading.set(!0),this.historyService.getHistory().subscribe({next:e=>{this.historySections.set(e),this.isLoading.set(!1)},error:()=>{this.isLoading.set(!1)}})}toggleMenu(){}getPlaceholderClass(e){switch(e){case"tunein":return"bg-gradient-to-br from-orange-500/15 to-orange-500/5 text-orange-500";case"radioparadise":return"bg-gradient-to-br from-emerald-500/15 to-emerald-500/5 text-emerald-500";default:return"bg-gradient-to-br from-accent-qobuz/15 to-accent-qobuz/5 text-accent-qobuz"}}playFromHistory(e){switch(e.type){case"album":this.router.navigate(["/qobuz/album",e.actionId]);break;case"playlist":this.router.navigate(["/qobuz/playlist",e.actionId]);break;case"tunein":this.router.navigate(["/tunein"]);break;case"radioparadise":this.router.navigate(["/radioparadise"]);break}}static \u0275fac=function(i){return new(i||t)};static \u0275cmp=O({type:t,selectors:[["app-home"]],decls:29,vars:2,consts:[[1,"min-h-screen","bg-bg-primary"],[1,"sticky","top-0","z-40","bg-bg-secondary","border-b","border-border-subtle","safe-area-top"],[1,"flex","items-center","justify-between","pl-16","pr-4","py-3.5","max-w-5xl","mx-auto"],[1,"flex","items-center","gap-2.5"],["viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2",1,"w-7","h-7","text-accent-qobuz"],["cx","12","cy","12","r","10"],["cx","12","cy","12","r","3"],["d","M12 2v4M12 18v4M2 12h4M18 12h4"],[1,"text-xl","font-semibold","tracking-tight"],[1,"w-9","h-9","rounded-full","bg-accent-qobuz","text-white","flex","items-center","justify-center","text-sm","font-semibold"],[1,"px-4","py-8","max-w-xl","mx-auto","pb-28"],[1,"text-center","mb-6"],[1,"text-2xl","font-bold","tracking-tight","mb-1.5"],[1,"text-sm","text-text-secondary"],[1,"grid","grid-cols-3","gap-2","mb-8"],[1,"source-card","flex","flex-col","items-center","gap-1.5","p-3","bg-bg-card","border","border-border-accent","rounded-xl","cursor-pointer","transition-all","hover:bg-bg-card-hover","hover:-translate-y-0.5",3,"routerLink","class"],[1,"space-y-6"],["routerLink","/players",1,"flex","items-center","justify-center","gap-2.5","mt-8","px-5","py-3","bg-bg-card","border","border-border-accent","rounded-xl","text-text-secondary","text-sm","hover:bg-bg-card-hover","hover:text-text-primary","hover:border-white/20","transition-all"],["viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2",1,"w-4.5","h-4.5"],["x","4","y","4","width","16","height","16","rx","2"],["d","M12 9v-2M12 17v-2M9 12H7M17 12h-2"],[1,"source-card","flex","flex-col","items-center","gap-1.5","p-3","bg-bg-card","border","border-border-accent","rounded-xl","cursor-pointer","transition-all","hover:bg-bg-card-hover","hover:-translate-y-0.5",3,"routerLink"],[1,"w-10","h-10","rounded-full","flex","items-center","justify-center"],["viewBox","0 0 100 100","fill","currentColor",1,"w-5","h-5",3,"class"],["viewBox","0 0 100 100","fill","none","stroke","currentColor","stroke-width","5",1,"w-5","h-5",3,"class"],[1,"text-xs","font-semibold","text-text-primary"],[1,"text-[10px]","text-text-muted","hidden","sm:block"],["viewBox","0 0 100 100","fill","currentColor",1,"w-5","h-5"],["cx","50","cy","50","r","45","fill","none","stroke","currentColor","stroke-width","6"],["cx","50","cy","50","r","20"],["viewBox","0 0 100 100","fill","none","stroke","currentColor","stroke-width","5",1,"w-5","h-5"],["cx","50","cy","50","r","45"],["d","M30 50a20 20 0 0140 0","stroke-width","4"],["d","M20 50a30 30 0 0160 0","stroke-width","4"],["cx","50","cy","50","r","5","fill","currentColor"],["d","M50 10L10 35l40 25 40-25-40-25z"],["d","M10 65l40 25 40-25"],["d","M10 50l40 25 40-25"],[1,"animate-pulse"],[1,"h-4","w-40","bg-bg-secondary","rounded","mb-3"],[1,"grid","grid-cols-4","sm:grid-cols-5","gap-2.5"],[1,"flex","flex-col","items-center","gap-2"],[1,"w-14","h-14","sm:w-16","sm:h-16","bg-bg-secondary","rounded-lg"],[1,"h-3","w-12","bg-bg-secondary","rounded"],[1,"history-section",3,"animation-delay"],[1,"history-section"],[1,"flex","items-center","gap-2","text-xs","font-semibold","text-text-muted","uppercase","tracking-wide","mb-3"],[1,"flex-1","h-px","bg-border-subtle"],[1,"history-item","flex","flex-col","items-center","p-2.5","bg-bg-card","rounded-lg","hover:bg-bg-card-hover","transition-all","hover:scale-102","active:scale-98"],[1,"history-item","flex","flex-col","items-center","p-2.5","bg-bg-card","rounded-lg","hover:bg-bg-card-hover","transition-all","hover:scale-102","active:scale-98",3,"click"],["loading","lazy",1,"w-14","h-14","sm:w-16","sm:h-16","rounded-md","object-cover","bg-bg-secondary","shadow-sm","mb-2",3,"src","alt"],[1,"w-14","h-14","sm:w-16","sm:h-16","rounded-md","flex","items-center","justify-center","mb-2",3,"class"],[1,"text-xs","font-medium","text-text-primary","text-center","line-clamp-2","leading-tight"],[1,"text-[10px]","text-text-muted","text-center","truncate","w-full","mt-0.5"],[1,"w-14","h-14","sm:w-16","sm:h-16","rounded-md","flex","items-center","justify-center","mb-2"],["viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","1.5",1,"w-6","h-6"],["d","M8 12a4 4 0 018 0"],["cx","12","cy","12","r","1","fill","currentColor"],["d","M12 3L2 9l10 6 10-6-10-6z"],["d","M2 17l10 6 10-6"],["d","M2 13l10 6 10-6"],["d","M9 18V5l12-2v13"],["cx","6","cy","18","r","3"],["cx","18","cy","16","r","3"]],template:function(i,o){i&1&&(n(0,"div",0)(1,"header",1)(2,"div",2)(3,"div",3),d(),n(4,"svg",4),s(5,"circle",5)(6,"circle",6)(7,"path",7),r(),k(),n(8,"h1",8),c(9,"Bluesound"),r()(),g(10,ee,2,1,"div",9),r()(),n(11,"main",10)(12,"div",11)(13,"h2",12),c(14,"Musik streamen"),r(),n(15,"p",13),c(16,"W\xE4hle eine Quelle um loszulegen"),r()(),n(17,"div",14),_(18,ne,9,8,"a",15,Z),r(),g(20,se,3,1,"div",16)(21,fe,3,0,"div",16),n(22,"a",17),d(),n(23,"svg",18),s(24,"rect",19)(25,"circle",6)(26,"path",20),r(),k(),n(27,"span"),c(28,"Bluesound Players verwalten"),r()()()()),i&2&&(a(10),y(o.auth.isLoggedIn()?10:-1),a(8),h(o.sources),a(2),y(o.isLoading()?20:o.historySections().length>0?21:-1))},dependencies:[j,N],styles:[".safe-area-top[_ngcontent-%COMP%]{padding-top:env(safe-area-inset-top,0)}.history-section[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeInUp .4s ease forwards;opacity:0}@keyframes _ngcontent-%COMP%_fadeInUp{0%{opacity:0;transform:translateY(12px)}to{opacity:1;transform:translateY(0)}}.line-clamp-2[_ngcontent-%COMP%]{display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical;overflow:hidden}.hover\\:scale-102[_ngcontent-%COMP%]:hover{transform:scale(1.02)}.active\\:scale-98[_ngcontent-%COMP%]:active{transform:scale(.98)}"]})};export{Q as HomeComponent};
