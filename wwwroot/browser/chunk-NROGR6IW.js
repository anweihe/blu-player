import{l as h}from"./chunk-N35TVY3C.js";import{N as c,S as m,a as g,b as p,dc as d,ec as f,j as l,o as i,y as b}from"./chunk-TWVQ6WYG.js";function Q(r){if(r)return r.large??r.extralarge??r.mega??r.medium??r.small??r.thumbnail}function x(r){return r.picture??Q(r.image)}function S(r){let t=Math.floor(r),e=Math.floor(t/3600),s=Math.floor(t%3600/60),a=t%60;return e>=1?`${e}:${s.toString().padStart(2,"0")}:${a.toString().padStart(2,"0")}`:`${s}:${a.toString().padStart(2,"0")}`}function P(r){return r.product_type?.toLowerCase()==="single"||r.tracks_count===1?"Single":r.product_type?.toLowerCase()==="ep"||r.tracks_count>=2&&r.tracks_count<=6&&r.duration<1800?"EP":"Album"}function A(r){return r.state==="play"||r.state==="stream"}function y(r){return r.state==="pause"}function k(r){return r.state==="stop"}var z=class r{http=m(f);auth=m(h);apiBaseUrl="/api/qobuz";getNewReleases(t=0,e=50){return this.http.get(`${this.apiBaseUrl}/new-releases`,{params:{offset:t.toString(),limit:e.toString()},headers:this.auth.getAuthHeaders()}).pipe(i(s=>s?.albums??{items:[],total:0,offset:0,limit:e}),b(s=>(console.error("Failed to load new releases:",s),l({items:[],total:0,offset:0,limit:e}))))}getAlbumCharts(t=0,e=50){return this.http.get(`${this.apiBaseUrl}/album-charts`,{params:{offset:t.toString(),limit:e.toString()},headers:this.auth.getAuthHeaders()}).pipe(i(s=>s?.albums??{items:[],total:0,offset:0,limit:e}),b(s=>(console.error("Failed to load album charts:",s),l({items:[],total:0,offset:0,limit:e}))))}getAlbum(t){return this.http.get(`${this.apiBaseUrl}/album/${encodeURIComponent(t)}`,{headers:this.auth.getAuthHeaders()})}getFeaturedPlaylists(t,e,s=0,a=50){let o=new d().set("offset",s.toString()).set("limit",a.toString());return t&&(o=o.set("tags",t)),e?.length&&(o=o.set("genreIds",e.join(","))),this.http.get(`${this.apiBaseUrl}/featured-playlists`,{params:o,headers:this.auth.getAuthHeaders()}).pipe(i(u=>u.playlists??{items:[],total:0,offset:0,limit:a}))}getUserPlaylists(t=0,e=50){return this.http.get(`${this.apiBaseUrl}/user-playlists`,{params:{offset:t.toString(),limit:e.toString()},headers:this.auth.getAuthHeaders()}).pipe(i(s=>s.playlists??{items:[],total:0,offset:0,limit:e}))}getPlaylist(t){return this.http.get(`${this.apiBaseUrl}/playlist/${t}`,{headers:this.auth.getAuthHeaders()}).pipe(i(e=>p(g({},e.playlist),{tracks:{items:e.tracks??[],total:e.tracks?.length??0,offset:0,limit:e.tracks?.length??0}})))}getArtistPage(t){return this.http.get(`${this.apiBaseUrl}/artist/${t}`,{headers:this.auth.getAuthHeaders()})}getArtistDiscography(t,e="all",s=0,a=50,o="release_date"){return this.http.get(`${this.apiBaseUrl}/artist/${t}/discography`,{params:{releaseType:e,offset:s.toString(),limit:a.toString(),sort:o},headers:this.auth.getAuthHeaders()}).pipe(i(u=>({items:u.albums?.map(n=>({id:n.id,title:n.title,artist:{id:0,name:n.artistName},image:{large:n.coverUrl,small:n.coverUrl},duration:0,tracks_count:n.tracksCount??0,released_at:n.releasedAt,release_type:n.typeLabel}))??[],total:u.albums?.length??0,offset:u.offset,limit:a,hasMore:u.hasMore})))}getFavoriteAlbums(t=0,e=50){return this.http.get(`${this.apiBaseUrl}/favorites/albums`,{params:{offset:t.toString(),limit:e.toString()},headers:this.auth.getAuthHeaders()}).pipe(i(s=>s.albums??{items:[],total:0,offset:0,limit:e}))}getFavoriteTracks(t=0,e=50){return this.http.get(`${this.apiBaseUrl}/favorites/tracks`,{params:{offset:t.toString(),limit:e.toString()},headers:this.auth.getAuthHeaders()}).pipe(i(s=>s.tracks?.items??[]))}getFavoriteArtists(t=0,e=50){return this.http.get(`${this.apiBaseUrl}/favorites/artists`,{params:{offset:t.toString(),limit:e.toString()},headers:this.auth.getAuthHeaders()})}search(t,e=20,s=0){return this.http.get(`${this.apiBaseUrl}/search`,{params:{query:t,limit:e.toString(),offset:s.toString()},headers:this.auth.getAuthHeaders()})}getTrackStreamUrl(t,e=27){return this.http.get(`${this.apiBaseUrl}/track-stream-url`,{params:{trackId:t.toString(),formatId:e.toString()},headers:this.auth.getAuthHeaders()}).pipe(i(s=>s.url))}getAlbumInfo(t,e,s){return this.http.get(`${this.apiBaseUrl}/album-info`,{params:{albumId:t,albumTitle:e,artistName:s},headers:this.auth.getAuthHeaders()}).pipe(i(a=>{if(!a.success)throw new Error(a.error||"Album-Info nicht verf\xFCgbar");return{style:a.style||"",summary:a.summary||""}}))}getGenres(){return this.http.get(`${this.apiBaseUrl}/genres`,{headers:this.auth.getAuthHeaders()}).pipe(i(t=>t.genres??[]))}static \u0275fac=function(e){return new(e||r)};static \u0275prov=c({token:r,factory:r.\u0275fac,providedIn:"root"})};export{A as a,y as b,k as c,x as d,S as e,P as f,z as g};
