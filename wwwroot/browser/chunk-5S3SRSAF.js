import{b as R}from"./chunk-QC44KA67.js";import{a as $}from"./chunk-O66JSED4.js";import{a as Y,d as U}from"./chunk-YHMOLQY4.js";import"./chunk-XHV6DCF3.js";import{e as Q,f as B,g as G}from"./chunk-NROGR6IW.js";import{f as F}from"./chunk-N35TVY3C.js";import{a as H}from"./chunk-GT7YEPYQ.js";import{$b as O,Bb as c,Cb as T,Db as h,Fa as V,Ga as E,Ja as r,Lb as N,Nb as S,S as y,Va as P,X as _,Y as x,Z as g,_ as k,db as d,eb as b,gb as j,hb as L,ia as v,ib as C,jb as l,kb as o,lb as p,pb as A,rb as f,tb as m,yb as q}from"./chunk-TWVQ6WYG.js";var Z=n=>["/qobuz/artist",n],J=(n,t)=>t.id;function K(n,t){n&1&&(l(0,"div",1),p(1,"div",4),o())}function X(n,t){if(n&1&&p(0,"div",44),n&2){let e,i=m(2);q("background-image","url("+((e=i.album())==null||e.image==null?null:e.image.large)+")")}}function ee(n,t){if(n&1&&p(0,"img",11),n&2){let e,i,a=m(2);C("src",(e=a.album())==null||e.image==null?null:e.image.large,E)("alt",(i=a.album())==null?null:i.title)}}function te(n,t){n&1&&(l(0,"div",12),g(),l(1,"svg",45),p(2,"path",46),o()())}function ne(n,t){n&1&&(l(0,"span",16),c(1," Hi-Res "),o())}function ie(n,t){if(n&1&&(l(0,"span",17),c(1),o()),n&2){let e=m(2);r(),h(" ",e.qualityLabel()," ")}}function le(n,t){if(n&1&&(l(0,"a",19),c(1),o()),n&2){let e,i,a=m(2);C("routerLink",N(2,Z,(e=a.album())==null||e.artist==null?null:e.artist.id)),r(),h(" ",(i=a.album())==null||i.artist==null?null:i.artist.name," ")}}function oe(n,t){if(n&1&&(l(0,"span"),c(1),o(),l(2,"span",21),c(3,"\u2022"),o()),n&2){let e=m(2);r(),T(e.releaseYear())}}function ae(n,t){if(n&1&&(l(0,"span"),c(1),o()),n&2){let e,i=m(3);r(),T((e=i.album())==null||e.label==null?null:e.label.name)}}function re(n,t){n&1&&(l(0,"span",21),c(1,"\u2022"),o())}function me(n,t){if(n&1&&(l(0,"span"),c(1),o()),n&2){let e,i=m(3);r(),T((e=i.album())==null||e.genre==null?null:e.genre.name)}}function ce(n,t){if(n&1&&(l(0,"div",22),d(1,ae,2,1,"span"),d(2,re,2,0,"span",21),d(3,me,2,1,"span"),o()),n&2){let e,i,a,u=m(2);r(),b(!((e=u.album())==null||e.label==null)&&e.label.name?1:-1),r(),b(!((i=u.album())==null||i.label==null)&&i.label.name&&(!((i=u.album())==null||i.genre==null)&&i.genre.name)?2:-1),r(),b(!((a=u.album())==null||a.genre==null)&&a.genre.name?3:-1)}}function ue(n,t){n&1&&(g(),l(0,"svg",28),p(1,"circle",47)(2,"path",48),o())}function se(n,t){n&1&&(g(),l(0,"svg",29),p(1,"path",49),o())}function de(n,t){n&1&&(l(0,"div",56),p(1,"div",4),o())}function be(n,t){if(n&1&&(l(0,"div",57),c(1),o()),n&2){let e=m(3);r(),h(" ",e.albumInfoError()," ")}}function pe(n,t){if(n&1&&(l(0,"div",58),c(1),o()),n&2){let e=m(4);r(),h(" ",e.albumInfo().style," ")}}function _e(n,t){if(n&1&&(l(0,"div",59),c(1),o()),n&2){let e=m(4);r(),h(" ",e.albumInfo().summary," ")}}function xe(n,t){if(n&1&&(d(0,pe,2,1,"div",58),d(1,_e,2,1,"div",59)),n&2){let e=m(3);b(e.albumInfo().style?0:-1),r(),b(e.albumInfo().summary?1:-1)}}function fe(n,t){if(n&1){let e=A();l(0,"div",35)(1,"div",50)(2,"h3",51),c(3,"Album-Info"),o(),l(4,"button",52),f("click",function(){_(e);let a=m(2);return x(a.closeAlbumInfo())}),g(),l(5,"svg",53),p(6,"path",54),o()()(),k(),l(7,"div",55),d(8,de,2,0,"div",56)(9,be,2,1,"div",57)(10,xe,2,2),o()()}if(n&2){let e=m(2);r(8),b(e.loadingAlbumInfo()?8:e.albumInfoError()?9:e.albumInfo()?10:-1)}}function ge(n,t){if(n&1){let e=A();l(0,"app-track-item",60),f("play",function(){let a=_(e),u=a.$implicit,M=a.$index,I=m(2);return x(I.playTrack(u,M))})("menu",function(a){_(e);let u=m(2);return x(u.openTrackMenu(a))}),o()}if(n&2){let e,i=t.$implicit,a=t.$index,u=m(2);C("track",i)("trackNumber",a+1)("showNumber",!0)("showArt",!1)("showArtist",(i.performer==null?null:i.performer.name)!==((e=u.album())==null||e.artist==null?null:e.artist.name))("showAlbum",!1)("showQuality",u.isTrackHiRes(i))("showMenu",!0)("isPlaying",u.isTrackPlaying(i))}}function he(n,t){if(n&1&&(l(0,"div",43)(1,"h3",61),c(2,"\xDCber das Album"),o(),p(3,"div",62),o()),n&2){let e,i=m(2);r(3),C("innerHTML",(e=i.album())==null?null:e.description,V)}}function ve(n,t){if(n&1){let e=A();l(0,"div",5),d(1,X,1,2,"div",6),p(2,"div",7),l(3,"div",8)(4,"div",9)(5,"div",10),f("click",function(){let a;_(e);let u=m();return x(((a=u.album())==null||a.image==null?null:a.image.large)&&u.openFullCover())}),d(6,ee,1,2,"img",11)(7,te,3,0,"div",12),o(),l(8,"div",13)(9,"div",14)(10,"span",15),c(11),o(),d(12,ne,2,0,"span",16),d(13,ie,2,1,"span",17),o(),l(14,"h1",18),c(15),o(),d(16,le,2,4,"a",19),l(17,"div",20),d(18,oe,4,1),l(19,"span"),c(20),o(),l(21,"span",21),c(22,"\u2022"),o(),l(23,"span"),c(24),o()(),d(25,ce,4,3,"div",22),l(26,"div",23)(27,"button",24),f("click",function(){_(e);let a=m();return x(a.playAll())}),g(),l(28,"svg",25),p(29,"path",26),o()(),k(),l(30,"button",27),f("click",function(){_(e);let a=m();return x(a.fetchAlbumInfo())}),d(31,ue,3,0,":svg:svg",28)(32,se,2,0,":svg:svg",29),o(),l(33,"button",30),f("click",function(a){_(e);let u=m();return x(u.openArtistMenu(a))}),g(),l(34,"svg",31),p(35,"circle",32)(36,"circle",33)(37,"circle",34),o()()()()()()(),d(38,fe,11,1,"div",35),k(),l(39,"div",36)(40,"div",37)(41,"span",38),c(42,"#"),o(),l(43,"span",39),c(44,"Titel"),o(),l(45,"span",40),c(46,"Dauer"),o(),p(47,"span",41),o(),j(48,ge,1,9,"app-track-item",42,J),o(),d(50,he,4,1,"div",43)}if(n&2){let e,i,a,u,M,I,w,D,z,s=m();r(),b(!((e=s.album())==null||e.image==null)&&e.image.large?1:-1),r(5),b(!((i=s.album())==null||i.image==null)&&i.image.large?6:7),r(5),h(" ",s.getAlbumTypeLabel(s.album())," "),r(),b(s.isHiRes()?12:-1),r(),b(s.qualityLabel()?13:-1),r(2),h(" ",(a=s.album())==null?null:a.title," "),r(),b((u=s.album())!=null&&u.artist?16:-1),r(2),b(s.releaseYear()?18:-1),r(2),h("",(M=s.album())==null?null:M.tracks_count," Tracks"),r(4),T(s.formatAlbumDuration(((I=s.album())==null?null:I.duration)??0)),r(),b(!((w=s.album())==null||w.label==null)&&w.label.name||!((w=s.album())==null||w.genre==null)&&w.genre.name?25:-1),r(5),C("disabled",s.loadingAlbumInfo()),r(),b(s.loadingAlbumInfo()?31:32),r(7),b(s.showAlbumInfo()?38:-1),r(10),L((D=s.album())==null||D.tracks==null?null:D.tracks.items),r(2),b((z=s.album())!=null&&z.description?50:-1)}}function Ce(n,t){n&1&&(l(0,"div",2),g(),l(1,"svg",63),p(2,"path",64),o(),k(),l(3,"p"),c(4,"Album konnte nicht geladen werden"),o(),l(5,"button",65),c(6," Zur\xFCck zum Browser "),o()())}function we(n,t){if(n&1){let e=A();l(0,"div",66),f("click",function(){_(e);let a=m();return x(a.closeFullCover())}),l(1,"button",67),f("click",function(){_(e);let a=m();return x(a.closeFullCover())}),g(),l(2,"svg",68),p(3,"path",69),o()(),k(),l(4,"img",70),f("click",function(a){return _(e),x(a.stopPropagation())}),o()()}if(n&2){let e,i,a=m();r(4),C("src",(e=a.album())==null||e.image==null?null:e.image.large,E)("alt",(i=a.album())==null?null:i.title)}}var W=class n{id;qobuzApi=y(G);playerState=y($);playbackService=y(R);navState=y(H);contextMenu=y(Y);loading=v(!0);album=v(null);albumInfo=v(null);showAlbumInfo=v(!1);loadingAlbumInfo=v(!1);albumInfoError=v(null);showFullCover=v(!1);isHiRes=S(()=>{let t=this.album();return t?.hires_streamable||t?.hires||t?.maximum_bit_depth&&t.maximum_bit_depth>16});qualityLabel=S(()=>{let t=this.album();return!t?.maximum_bit_depth||!t?.maximum_sampling_rate?null:t.maximum_bit_depth>16?`${t.maximum_bit_depth}-Bit / ${t.maximum_sampling_rate}kHz`:null});releaseYear=S(()=>{let t=this.album();return t?.released_at?new Date(t.released_at*1e3).getFullYear():null});hasAlbumInfo=S(()=>{let t=this.album();return t?.title&&t?.artist?.name});formatDuration=Q;getAlbumTypeLabel=B;ngOnInit(){document.querySelector("main")?.scrollTo(0,0),this.navState.enterDetailMode("/qobuz/browse","Album",{showPlayButton:!0,onPlayAll:()=>this.playAll()}),this.id&&this.loadAlbum()}ngOnDestroy(){this.navState.exitDetailMode()}loadAlbum(){this.qobuzApi.getAlbum(this.id).subscribe({next:t=>{this.album.set(t),this.loading.set(!1)},error:()=>this.loading.set(!1)})}formatAlbumDuration(t){let e=Math.floor(t/3600),i=Math.floor(t%3600/60);return e>0?`${e} Std. ${i} Min.`:`${i} Min.`}isTrackHiRes(t){return t.hires_streamable||t.hires||t.maximum_bit_depth!==void 0&&t.maximum_bit_depth>16}isTrackPlaying(t){let e=this.playerState.currentPlayingTrackId(),i=this.playerState.currentTrack();return(e===t.id||i?.id===t.id)&&this.playerState.isPlaying()}goBack(){window.history.back()}playAll(){let t=this.album(),e=t?.tracks?.items;t&&e?.length&&this.playbackService.playAlbum(t,e,0)}shufflePlay(){let t=this.album(),e=t?.tracks?.items;if(t&&e?.length){let i=[...e].sort(()=>Math.random()-.5);this.playbackService.playTrack(i[0],{type:"album",id:t.id??"",tracks:i,startIndex:0})}}playTrack(t,e){let i=this.album(),a=i?.tracks?.items;i&&a?.length&&this.playbackService.playAlbum(i,a,e)}openTrackMenu(t){this.contextMenu.openTrackMenu(t.event,t.track,{onPlay:()=>this.playTrack(t.track,0),onAddToQueue:()=>console.log("Add to queue:",t.track.title)})}toggleAlbumInfo(){this.albumInfo()?this.showAlbumInfo.update(t=>!t):this.fetchAlbumInfo()}fetchAlbumInfo(){if(this.showAlbumInfo()){this.showAlbumInfo.set(!1);return}if(this.showAlbumInfo.set(!0),this.albumInfoError.set(null),this.albumInfo())return;let t=this.album();if(!t?.id||!t?.title||!t?.artist?.name){this.albumInfoError.set("Album-Informationen nicht verf\xFCgbar");return}this.loadingAlbumInfo.set(!0),this.qobuzApi.getAlbumInfo(t.id,t.title,t.artist.name).subscribe({next:e=>{this.albumInfo.set(e),this.loadingAlbumInfo.set(!1)},error:e=>{this.albumInfoError.set(e.message||"Fehler beim Laden der Album-Info"),this.loadingAlbumInfo.set(!1)}})}closeAlbumInfo(){this.showAlbumInfo.set(!1)}openArtistMenu(t){let e=this.album();e&&this.contextMenu.openAlbumMenu(t,e)}openFullCover(){this.showFullCover.set(!0)}closeFullCover(){this.showFullCover.set(!1)}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=P({type:n,selectors:[["app-album-detail"]],inputs:{id:"id"},decls:5,vars:2,consts:[[1,"album-detail","bg-bg-primary","min-h-screen","pb-28"],[1,"flex","justify-center","items-center","h-64"],[1,"flex","flex-col","items-center","justify-center","h-64","text-text-muted"],[1,"fixed","inset-0","z-[200]","bg-black/95","flex","items-center","justify-center","cursor-zoom-out"],[1,"loading-spinner"],[1,"album-header","relative"],[1,"absolute","inset-0","bg-cover","bg-center","opacity-20","blur-2xl",3,"background-image"],[1,"absolute","inset-0","bg-gradient-to-b","from-transparent","via-bg-primary/50","to-bg-primary"],[1,"relative","p-4","sm:p-6","pt-4"],[1,"flex","gap-4","sm:gap-6","flex-col","md:flex-row"],[1,"album-cover","w-36","h-36","sm:w-48","sm:h-48","md:w-56","md:h-56","overflow-hidden","bg-bg-secondary","flex-shrink-0","mx-auto","md:mx-0","shadow-2xl","cursor-zoom-in",3,"click"],[1,"w-full","h-full","object-cover",3,"src","alt"],[1,"w-full","h-full","flex","items-center","justify-center","text-text-muted"],[1,"album-meta","flex","flex-col","justify-center","text-center","md:text-left","flex-1","min-w-0"],[1,"flex","items-center","justify-center","md:justify-start","gap-2","mb-2","flex-wrap"],[1,"text-xs","text-text-muted","uppercase","tracking-wider"],[1,"px-2","py-0.5","bg-accent-qobuz","text-white","text-[10px]","font-bold","rounded"],[1,"text-[10px]","text-accent-qobuz"],[1,"text-xl","sm:text-2xl","md:text-3xl","font-bold","mb-2","line-clamp-2"],[1,"text-lg","text-text-secondary","hover:text-accent-qobuz","transition-colors",3,"routerLink"],[1,"flex","items-center","justify-center","md:justify-start","gap-2","mt-3","text-sm","text-text-muted","flex-wrap"],[1,"text-border-subtle"],[1,"flex","items-center","justify-center","md:justify-start","gap-2","mt-2","text-xs","text-text-muted","flex-wrap"],[1,"flex","items-center","justify-center","md:justify-start","gap-3","mt-5"],["title","Alle abspielen",1,"w-12","h-12","flex","items-center","justify-center","bg-accent-qobuz","text-white","rounded-full","hover:bg-[#1ed760]","hover:scale-110","transition-all","shadow-lg",3,"click"],["xmlns","http://www.w3.org/2000/svg","fill","currentColor","viewBox","0 0 24 24",1,"w-6","h-6"],["d","M8 5v14l11-7z"],["title","Album-Info",1,"w-12","h-12","flex","items-center","justify-center","bg-bg-card","border","border-border-accent","rounded-full","text-text-primary","hover:bg-bg-card-hover","hover:border-accent-blue","hover:scale-110","transition-all",3,"click","disabled"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24",1,"w-5","h-5","animate-spin"],["viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2",1,"w-6","h-6"],["title","Mehr Optionen",1,"w-12","h-12","flex","items-center","justify-center","bg-bg-card","border","border-border-accent","rounded-full","text-text-primary","hover:bg-bg-card-hover","hover:border-accent-qobuz","hover:scale-110","transition-all",3,"click"],["viewBox","0 0 24 24","fill","currentColor",1,"w-6","h-6"],["cx","12","cy","5","r","2"],["cx","12","cy","12","r","2"],["cx","12","cy","19","r","2"],[1,"album-info-container","mx-4","md:mx-6","mt-5","mb-6","p-5","bg-bg-card","border","border-border-subtle","rounded-xl"],[1,"tracks-list","px-4","md:px-6"],[1,"hidden","md:flex","items-center","gap-3","px-3","py-2","text-xs","text-text-muted","border-b","border-border-subtle","mb-2"],[1,"w-8","text-center"],[1,"flex-1"],[1,"w-20","text-right"],[1,"w-8"],[3,"track","trackNumber","showNumber","showArt","showArtist","showAlbum","showQuality","showMenu","isPlaying"],[1,"album-description","mx-6","mt-6","p-4","bg-bg-card","border","border-border-subtle","rounded-lg"],[1,"absolute","inset-0","bg-cover","bg-center","opacity-20","blur-2xl"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"w-16","h-16","opacity-30"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","1","d","M9 19V6l12-3v13M9 19c0 1.105-1.343 2-3 2s-3-.895-3-2 1.343-2 3-2 3 .895 3 2zm12-3c0 1.105-1.343 2-3 2s-3-.895-3-2 1.343-2 3-2 3 .895 3 2zM9 10l12-3"],["cx","12","cy","12","r","10","stroke","currentColor","stroke-width","4",1,"opacity-25"],["fill","currentColor","d","M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z",1,"opacity-75"],["d","M15 4V2M15 16v-2M8 9h2M20 9h2M17.8 11.8L19 13M17.8 6.2L19 5M3 21l9-9M12.2 6.2L11 5"],[1,"flex","items-center","justify-between","mb-4"],[1,"text-base","font-semibold"],[1,"w-8","h-8","flex","items-center","justify-center","rounded-md","text-text-muted","hover:text-text-primary","hover:bg-bg-card-hover","transition-colors",3,"click"],["viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2",1,"w-5","h-5"],["d","M18 6L6 18M6 6l12 12"],[1,"album-info-content"],[1,"flex","justify-center","py-10"],[1,"text-center","text-danger","py-6","text-sm"],[1,"album-info-style","relative","p-5","mb-6","rounded-lg","italic","text-base","leading-relaxed"],[1,"album-info-text","text-sm","leading-relaxed","text-text-secondary","whitespace-pre-wrap","text-justify"],[3,"play","menu","track","trackNumber","showNumber","showArt","showArtist","showAlbum","showQuality","showMenu","isPlaying"],[1,"text-sm","font-semibold","mb-2"],[1,"description-content","text-sm","text-text-secondary","leading-relaxed",3,"innerHTML"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"w-12","h-12","mb-4","opacity-50"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","1","d","M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"],["routerLink","/qobuz/browse",1,"mt-4","px-4","py-2","bg-accent-qobuz","text-white","rounded-lg","hover:bg-accent-qobuz/90","transition-colors"],[1,"fixed","inset-0","z-[200]","bg-black/95","flex","items-center","justify-center","cursor-zoom-out",3,"click"],[1,"absolute","top-4","right-4","w-10","h-10","rounded-full","bg-white/10","text-white","flex","items-center","justify-center","hover:bg-white/20","transition-colors","safe-area-top","safe-area-right",3,"click"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor","stroke-width","2",1,"w-6","h-6"],["stroke-linecap","round","stroke-linejoin","round","d","M6 18L18 6M6 6l12 12"],[1,"max-w-[90vw]","max-h-[90vh]","object-contain","shadow-2xl",3,"click","src","alt"]],template:function(e,i){e&1&&(l(0,"div",0),d(1,K,2,0,"div",1)(2,ve,51,15)(3,Ce,7,0,"div",2),d(4,we,5,2,"div",3),o()),e&2&&(r(),b(i.loading()?1:i.album()?2:3),r(3),b(i.showFullCover()?4:-1))},dependencies:[O,F,U],styles:[`.loading-spinner[_ngcontent-%COMP%]{width:40px;height:40px;border:3px solid var(--color-border-accent);border-top-color:var(--color-accent-qobuz);border-radius:50%;animation:_ngcontent-%COMP%_spin .8s linear infinite}@keyframes _ngcontent-%COMP%_spin{to{transform:rotate(360deg)}}.line-clamp-2[_ngcontent-%COMP%]{display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical;overflow:hidden}.description-content[_ngcontent-%COMP%]     p{margin-bottom:.75rem}.description-content[_ngcontent-%COMP%]     p:last-child{margin-bottom:0}.description-content[_ngcontent-%COMP%]     a{color:var(--color-accent-qobuz);text-decoration:none}.description-content[_ngcontent-%COMP%]     a:hover{text-decoration:underline}.album-info-style[_ngcontent-%COMP%]{background:linear-gradient(135deg,#1db95414,#1db95405);color:var(--color-text-primary);border-left:3px solid var(--color-accent-qobuz)}.album-info-style[_ngcontent-%COMP%]:before{content:'"';position:absolute;top:8px;left:12px;font-size:3rem;font-family:Georgia,Times New Roman,serif;color:var(--color-accent-qobuz);opacity:.4;line-height:1}.album-info-text[_ngcontent-%COMP%]:first-letter{font-size:1.8em;font-weight:600;color:var(--color-text-primary);float:left;line-height:1;margin-right:6px;margin-top:4px}@media(max-width:380px){.album-cover[_ngcontent-%COMP%]{width:128px!important;height:128px!important}}.safe-area-top[_ngcontent-%COMP%]{padding-top:env(safe-area-inset-top,0)}`]})};export{W as AlbumDetailComponent};
