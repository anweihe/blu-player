import{a as d}from"./chunk-GWJHP5PM.js";import{l as y}from"./chunk-GYSMW3IL.js";import{$b as c,M as b,R as n,j as r,o,x as a}from"./chunk-63K3V35C.js";var h=class i{http=n(c);auth=n(y);playerState=n(d);apiBaseUrl="/api";qobuzApiUrl="/api/qobuz";getPlayers(){return this.http.get(`${this.apiBaseUrl}/players`).pipe(a(()=>r([])))}refreshPlayers(){return this.http.post(`${this.apiBaseUrl}/players/refresh`,{}).pipe(a(()=>r([])))}getSyncStatus(e){return this.http.get(`${this.apiBaseUrl}/player/${encodeURIComponent(e)}/sync`).pipe(a(()=>r(null)))}getStatus(e){return this.http.get(`${this.apiBaseUrl}/player/${encodeURIComponent(e)}/status`).pipe(a(()=>r(null)))}getQueue(e){return this.http.get(`${this.apiBaseUrl}/player/${encodeURIComponent(e)}/queue`).pipe(a(()=>r([])))}play(e){return this.http.post(`${this.apiBaseUrl}/player/${encodeURIComponent(e)}/play`,{}).pipe(o(()=>!0),a(()=>r(!1)))}pause(e){return this.http.post(`${this.apiBaseUrl}/player/${encodeURIComponent(e)}/pause`,{}).pipe(o(()=>!0),a(()=>r(!1)))}stop(e){return this.http.post(`${this.apiBaseUrl}/player/${encodeURIComponent(e)}/stop`,{}).pipe(o(()=>!0),a(()=>r(!1)))}skip(e){return this.http.post(`${this.apiBaseUrl}/player/${encodeURIComponent(e)}/skip`,{}).pipe(o(()=>!0),a(()=>r(!1)))}back(e){return this.http.post(`${this.apiBaseUrl}/player/${encodeURIComponent(e)}/back`,{}).pipe(o(()=>!0),a(()=>r(!1)))}seek(e,t){return this.http.post(`${this.apiBaseUrl}/player/${encodeURIComponent(e)}/seek`,{seconds:t}).pipe(o(()=>!0),a(()=>r(!1)))}setVolume(e,t){return this.http.post(`${this.apiBaseUrl}/player/${encodeURIComponent(e)}/volume`,{level:t}).pipe(o(()=>!0),a(()=>r(!1)))}setMute(e,t){return this.http.post(`${this.apiBaseUrl}/player/${encodeURIComponent(e)}/mute`,{mute:t}).pipe(o(()=>!0),a(()=>r(!1)))}playQobuzTrackNative(e,t,p,s){let l=s.type==="album"?{ip:e,port:11e3,sourceType:"album",albumId:s.albumId,trackId:t,trackIndex:p}:{ip:e,port:11e3,sourceType:"playlist",playlistId:s.playlistId,trackId:t,trackIndex:p};return this.http.post(`${this.qobuzApiUrl}/play-native-on-bluesound`,l).pipe(o(u=>u.success),a(u=>(console.error("Failed to play track on Bluesound:",u),r(!1))))}playQobuzTrack(e,t,p){return console.warn("playQobuzTrack called without context - native playback requires album/playlist context"),r(!1)}playQobuzAlbum(e,t,p=0,s){return s||console.warn("playQobuzAlbum called without trackId - native playback may not work correctly"),this.http.post(`${this.qobuzApiUrl}/play-native-on-bluesound`,{ip:e,port:11e3,sourceType:"album",albumId:t,trackId:s??0,trackIndex:p}).pipe(o(l=>l.success),a(l=>(console.error("Failed to play album on Bluesound:",l),r(!1))))}playQobuzPlaylist(e,t,p=0,s){return s||console.warn("playQobuzPlaylist called without trackId - native playback may not work correctly"),this.http.post(`${this.qobuzApiUrl}/play-native-on-bluesound`,{ip:e,port:11e3,sourceType:"playlist",playlistId:t,trackId:s??0,trackIndex:p}).pipe(o(l=>l.success),a(l=>(console.error("Failed to play playlist on Bluesound:",l),r(!1))))}addToQueue(e,t){return this.http.post(`${this.apiBaseUrl}/player/${encodeURIComponent(e)}/queue/add`,{trackId:t}).pipe(o(()=>!0),a(()=>r(!1)))}clearQueue(e){return this.http.post(`${this.apiBaseUrl}/player/${encodeURIComponent(e)}/queue/clear`,{}).pipe(o(()=>!0),a(()=>r(!1)))}playQueueItem(e,t){return this.http.post(`${this.apiBaseUrl}/player/${encodeURIComponent(e)}/queue/play`,{index:t}).pipe(o(()=>!0),a(()=>r(!1)))}removeQueueItem(e,t){return this.http.delete(`${this.apiBaseUrl}/player/${encodeURIComponent(e)}/queue/${t}`).pipe(o(()=>!0),a(()=>r(!1)))}createGroup(e,t){return this.http.post(`${this.apiBaseUrl}/player/${encodeURIComponent(e)}/group/create`,{slaveIps:t}).pipe(o(()=>!0),a(()=>r(!1)))}addToGroup(e,t){return this.http.post(`${this.apiBaseUrl}/player/${encodeURIComponent(e)}/group/add`,{slaveIp:t}).pipe(o(()=>!0),a(()=>r(!1)))}removeFromGroup(e,t){return this.http.post(`${this.apiBaseUrl}/player/${encodeURIComponent(e)}/group/remove`,{slaveIp:t}).pipe(o(()=>!0),a(()=>r(!1)))}leaveGroup(e){return this.http.post(`${this.apiBaseUrl}/player/${encodeURIComponent(e)}/group/leave`,{}).pipe(o(()=>!0),a(()=>r(!1)))}static \u0275fac=function(t){return new(t||i)};static \u0275prov=b({token:i,factory:i.\u0275fac,providedIn:"root"})};export{h as a};
