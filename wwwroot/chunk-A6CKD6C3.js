import{a as _e,b as fe,e as xe,h as ge}from"./chunk-65UUZ2JX.js";import{a as B}from"./chunk-D3B5OSRM.js";import{a as he}from"./chunk-HRW6X6ES.js";import{a as D}from"./chunk-3PSR7F6U.js";import{e as ve}from"./chunk-TB3BYDLV.js";import{d as Y,e as Z,f as ue,j as ee,k as te}from"./chunk-3IHUMDY3.js";import{$a as d,Ab as L,Ja as V,Mb as z,R as C,Sa as _,Ta as f,Ua as se,Va as H,W as p,Wa as q,X as u,Xa as j,Y as g,Ya as r,Z as y,Za as a,_a as h,ab as m,bb as S,ca as ie,cb as w,db as X,eb as x,fb as E,gb as s,ha as M,ib as $,jb as I,kb as F,lb as T,mb as b,nb as ce,ob as c,pb as k,qb as P,sb as de,ta as W,tb as me,ua as K,ub as pe,wa as N,xa as l,yb as J}from"./chunk-NJ7QWJ2J.js";var be=(t,i)=>i.id;function we(t,i){t&1&&(r(0,"div",9),c(1," Lade Profile... "),a())}function Ce(t,i){t&1&&(r(0,"div",9),c(1," Keine Profile vorhanden "),a())}function ye(t,i){t&1&&(g(),r(0,"svg",19),h(1,"path",23),a())}function Se(t,i){if(t&1&&(r(0,"span",25),c(1,"-"),a(),r(2,"span"),c(3),a()),t&2){let e=s(2).$implicit;l(3),k(e.qobuz.displayName)}}function ke(t,i){if(t&1&&(r(0,"span",24),c(1,"Qobuz verbunden"),a(),_(2,Se,4,1)),t&2){let e=s().$implicit;l(2),f(e.qobuz!=null&&e.qobuz.displayName?2:-1)}}function Pe(t,i){t&1&&(r(0,"span",21),c(1,"Nicht bei Qobuz eingeloggt"),a())}function Ee(t,i){if(t&1){let e=w();r(0,"button",26),x("click",function(o){p(e);let v=s().$implicit,G=s(2);return u(G.confirmDeleteProfile(o,v))}),g(),r(1,"svg",6),h(2,"path",27),a()()}}function Me(t,i){if(t&1){let e=w();r(0,"div",15),x("click",function(){let o=p(e).$implicit,v=s(2);return u(v.selectProfile(o))}),r(1,"div",16),c(2),a(),r(3,"div",17)(4,"div",11)(5,"span",18),c(6),a(),_(7,ye,2,0,":svg:svg",19),a(),r(8,"div",20),_(9,ke,3,1)(10,Pe,2,0,"span",21),a()(),_(11,Ee,3,0,"button",22),a()}if(t&2){let e=i.$implicit,n=s(2);b("bg-bg-card",e.id===n.profileService.activeProfileId()),l(),T("background-color",n.profileService.getProfileColor(e.id)),l(),P(" ",n.profileService.getProfileInitial(e.name)," "),l(4),k(e.name),l(),f(e.id===n.profileService.activeProfileId()?7:-1),l(2),f(e.qobuz!=null&&e.qobuz.authToken?9:10),l(2),f(n.profileService.profiles().length>1?11:-1)}}function Ve(t,i){if(t&1&&H(0,Me,12,9,"div",14,be),t&2){let e=s();q(e.profileService.profiles())}}function Te(t,i){if(t&1){let e=w();r(0,"div",11)(1,"input",28,0),pe("ngModelChange",function(o){p(e);let v=s();return me(v.newProfileName,o)||(v.newProfileName=o),u(o)}),x("keydown.enter",function(){p(e);let o=s();return u(o.createProfile())})("keydown.escape",function(){p(e);let o=s();return u(o.cancelCreate())}),a(),r(3,"button",29),x("click",function(){p(e);let o=s();return u(o.createProfile())}),c(4," Erstellen "),a(),r(5,"button",30),x("click",function(){p(e);let o=s();return u(o.cancelCreate())}),c(6," Abbrechen "),a()()}if(t&2){let e=s();l(),de("ngModel",e.newProfileName),l(2),j("disabled",!e.newProfileName.trim())}}function ze(t,i){if(t&1){let e=w();r(0,"button",31),x("click",function(){p(e);let o=s();return u(o.startCreate())}),g(),r(1,"svg",6),h(2,"path",32),a(),y(),r(3,"span",33),c(4,"Neues Profil erstellen"),a()()}}function Le(t,i){t&1&&c(0," Die Qobuz-Verbindung wird dabei ebenfalls entfernt. ")}function Ne(t,i){if(t&1){let e=w();r(0,"div",34),x("click",function(){p(e);let o=s();return u(o.cancelDelete())}),r(1,"div",35),x("click",function(o){return p(e),u(o.stopPropagation())}),r(2,"h3",36),c(3,"Profil l\xF6schen?"),a(),r(4,"p",37),c(5),_(6,Le,1,0),a(),r(7,"div",38)(8,"button",39),x("click",function(){p(e);let o=s();return u(o.cancelDelete())}),c(9," Abbrechen "),a(),r(10,"button",40),x("click",function(){p(e);let o=s();return u(o.deleteProfile())}),c(11," L\xF6schen "),a()()()()}if(t&2){let e,n,o=s();l(5),P(' M\xF6chtest du das Profil "',(e=o.profileToDelete())==null?null:e.name,'" wirklich l\xF6schen? '),l(),f((n=o.profileToDelete())!=null&&n.qobuz?6:-1)}}var R=class t{profileService=C(ee);closed=new ie;profileSelected=new ie;isClosing=M(!1);isCreating=M(!1);profileToDelete=M(null);newProfileName="";ngOnInit(){this.profileService.profiles().length===0&&this.profileService.loadProfiles().subscribe()}selectProfile(i){i.id!==this.profileService.activeProfileId()&&(this.profileService.setActiveProfileId(i.id),this.profileSelected.emit(i)),this.close()}startCreate(){this.isCreating.set(!0),this.newProfileName="",setTimeout(()=>{document.querySelector('input[placeholder="Profilname"]')?.focus()})}cancelCreate(){this.isCreating.set(!1),this.newProfileName=""}createProfile(){let i=this.newProfileName.trim();i&&this.profileService.createProfile(i).subscribe(e=>{e&&(this.isCreating.set(!1),this.newProfileName="",this.profileService.setActiveProfileId(e.id),this.profileSelected.emit(e))})}confirmDeleteProfile(i,e){i.stopPropagation(),this.profileToDelete.set(e)}cancelDelete(){this.profileToDelete.set(null)}deleteProfile(){let i=this.profileToDelete();i&&this.profileService.deleteProfile(i.id).subscribe(e=>{e&&this.profileToDelete.set(null)})}close(){this.isClosing.set(!0),setTimeout(()=>{this.closed.emit()},200)}onEscapeKey(){this.profileToDelete()?this.cancelDelete():this.isCreating()?this.cancelCreate():this.close()}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=V({type:t,selectors:[["app-profile-switcher"]],hostBindings:function(e,n){e&1&&x("keydown.escape",function(){return n.onEscapeKey()},N)},outputs:{closed:"closed",profileSelected:"profileSelected"},decls:16,vars:15,consts:[["nameInput",""],[1,"fixed","inset-0","bg-black/60","backdrop-blur-sm","z-[100]","transition-opacity","duration-200",3,"click"],[1,"fixed","inset-x-4","top-1/2","-translate-y-1/2","max-w-md","mx-auto","bg-bg-primary","rounded-2xl","z-[101]","shadow-2xl","overflow-hidden","transition-all","duration-200",3,"click"],[1,"flex","items-center","justify-between","p-4","border-b","border-border-subtle"],[1,"text-lg","font-semibold"],[1,"w-8","h-8","flex","items-center","justify-center","rounded-lg","hover:bg-bg-card","transition-colors",3,"click"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"w-5","h-5"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M6 18L18 6M6 6l12 12"],[1,"max-h-80","overflow-y-auto","p-2"],[1,"p-4","text-center","text-text-muted"],[1,"p-3","border-t","border-border-subtle"],[1,"flex","items-center","gap-2"],[1,"w-full","flex","items-center","justify-center","gap-2","px-4","py-3","rounded-xl","text-accent-qobuz","hover:bg-accent-qobuz/10","transition-colors"],[1,"fixed","inset-0","bg-black/60","z-[102]","flex","items-center","justify-center","p-4"],[1,"flex","items-center","gap-3","p-3","rounded-xl","cursor-pointer","transition-colors","hover:bg-bg-card",3,"bg-bg-card"],[1,"flex","items-center","gap-3","p-3","rounded-xl","cursor-pointer","transition-colors","hover:bg-bg-card",3,"click"],[1,"w-12","h-12","rounded-full","flex","items-center","justify-center","text-white","font-semibold","text-lg","flex-shrink-0"],[1,"flex-1","min-w-0"],[1,"font-medium","truncate"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 20 20","fill","currentColor",1,"w-5","h-5","text-green-500","flex-shrink-0"],[1,"text-sm","text-text-muted"],[1,"text-text-muted"],["title","Profil l\xF6schen",1,"w-8","h-8","flex","items-center","justify-center","rounded-lg","text-text-muted","hover:text-error","hover:bg-error/10","transition-colors","flex-shrink-0"],["fill-rule","evenodd","d","M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z","clip-rule","evenodd"],[1,"text-green-600"],[1,"mx-1"],["title","Profil l\xF6schen",1,"w-8","h-8","flex","items-center","justify-center","rounded-lg","text-text-muted","hover:text-error","hover:bg-error/10","transition-colors","flex-shrink-0",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"],["type","text","placeholder","Profilname",1,"flex-1","px-3","py-2","bg-bg-card","border","border-border-subtle","rounded-lg","text-sm","focus:outline-none","focus:ring-2","focus:ring-accent-qobuz/50",3,"ngModelChange","keydown.enter","keydown.escape","ngModel"],[1,"px-3","py-2","bg-accent-qobuz","text-white","rounded-lg","text-sm","font-medium","hover:opacity-90","transition-opacity","disabled:opacity-50",3,"click","disabled"],[1,"px-3","py-2","text-text-muted","hover:bg-bg-card","rounded-lg","text-sm","transition-colors",3,"click"],[1,"w-full","flex","items-center","justify-center","gap-2","px-4","py-3","rounded-xl","text-accent-qobuz","hover:bg-accent-qobuz/10","transition-colors",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 4v16m8-8H4"],[1,"font-medium"],[1,"fixed","inset-0","bg-black/60","z-[102]","flex","items-center","justify-center","p-4",3,"click"],[1,"bg-bg-primary","rounded-2xl","p-6","max-w-sm","w-full","shadow-2xl",3,"click"],[1,"text-lg","font-semibold","mb-2"],[1,"text-text-muted","mb-4"],[1,"flex","gap-3","justify-end"],[1,"px-4","py-2","rounded-lg","text-text-muted","hover:bg-bg-card","transition-colors",3,"click"],[1,"px-4","py-2","bg-error","text-white","rounded-lg","font-medium","hover:opacity-90","transition-opacity",3,"click"]],template:function(e,n){e&1&&(r(0,"div",1),x("click",function(){return n.close()}),a(),r(1,"div",2),x("click",function(v){return v.stopPropagation()}),r(2,"div",3)(3,"h2",4),c(4,"Profile"),a(),r(5,"button",5),x("click",function(){return n.close()}),g(),r(6,"svg",6),h(7,"path",7),a()()(),y(),r(8,"div",8),_(9,we,2,0,"div",9)(10,Ce,2,0,"div",9)(11,Ve,2,0),a(),r(12,"div",10),_(13,Te,7,2,"div",11)(14,ze,5,0,"button",12),a()(),_(15,Ne,12,2,"div",13)),e&2&&(b("opacity-0",n.isClosing())("opacity-100",!n.isClosing()),l(),b("scale-95",n.isClosing())("opacity-0",n.isClosing())("scale-100",!n.isClosing())("opacity-100",!n.isClosing()),l(8),f(n.profileService.isLoading()?9:n.profileService.profiles().length===0?10:11),l(4),f(n.isCreating()?13:14),l(2),f(n.profileToDelete()?15:-1))},dependencies:[z,ge,_e,fe,xe],styles:["[_nghost-%COMP%]{display:contents}"]})};var He=(t,i)=>i.id;function qe(t,i){t&1&&(d(0,"div",15),g(),d(1,"svg",21),S(2,"path",23),m()())}function De(t,i){t&1&&(d(0,"div",16),S(1,"div",24),d(2,"span",25),c(3,"Bluesound Player"),m(),S(4,"div",24),m())}function je(t,i){t&1&&(d(0,"div",31),g(),d(1,"svg",21),S(2,"path",23),m()())}function Be(t,i){if(t&1){let e=w();d(0,"button",8),E("click",function(){p(e);let o=s().$implicit,v=s(2);return u(v.selectPlayer(o))}),d(1,"div",9),g(),d(2,"svg",10),S(3,"path",27),m()(),y(),d(4,"div",28)(5,"p",29),c(6),m(),d(7,"p",30),c(8),m()(),_(9,je,3,0,"div",31),m()}if(t&2){let e=s().$implicit,n=s(2);b("bg-accent-qobuz/10",n.isSelected(e))("border-accent-qobuz",n.isSelected(e))("border-2",n.isSelected(e))("bg-bg-card",!n.isSelected(e))("hover:bg-bg-card-hover",!n.isSelected(e)),l(),b("bg-accent-qobuz",n.isSelected(e))("text-white",n.isSelected(e))("bg-bg-secondary",!n.isSelected(e))("text-text-muted",!n.isSelected(e)),l(4),b("text-accent-qobuz",n.isSelected(e)),l(),P(" ",e.name," "),l(2),P(" ",n.getPlayerSubtitle(e)," "),l(),f(n.isSelected(e)?9:-1)}}function Ie(t,i){if(t&1&&_(0,Be,10,23,"button",26),t&2){let e=i.$implicit;f(e.isSecondaryStereoPairSpeaker?-1:0)}}function Fe(t,i){t&1&&(d(0,"div",17),g(),d(1,"svg",32),S(2,"path",33),m(),y(),d(3,"p",34),c(4,"Keine Player gefunden"),m(),d(5,"p",35),c(6,"Stellen Sie sicher, dass Ihre Bluesound Player eingeschaltet sind"),m()())}function Ge(t,i){t&1&&(d(0,"div",18),S(1,"div",36),d(2,"p",37),c(3,"Suche nach Playern..."),m()())}function Oe(t,i){if(t&1){let e=w();d(0,"div",0),E("click",function(){p(e);let o=s();return u(o.close())}),m(),d(1,"div",1)(2,"div",2)(3,"h2",3),c(4,"Wiedergabeger\xE4t"),m(),d(5,"button",4),E("click",function(){p(e);let o=s();return u(o.close())}),g(),d(6,"svg",5),S(7,"path",6),m()()(),y(),d(8,"div",7)(9,"button",8),E("click",function(){p(e);let o=s();return u(o.selectBrowser())}),d(10,"div",9),g(),d(11,"svg",10),S(12,"path",11),m()(),y(),d(13,"div",12)(14,"p",13),c(15," Dieser Browser "),m(),d(16,"p",14),c(17,"Wiedergabe auf diesem Ger\xE4t"),m()(),_(18,qe,3,0,"div",15),m(),_(19,De,5,0,"div",16),H(20,Ie,1,1,null,null,He),_(22,Fe,7,0,"div",17),_(23,Ge,4,0,"div",18),m(),d(24,"div",19)(25,"button",20),E("click",function(){p(e);let o=s();return u(o.refreshPlayers())}),g(),d(26,"svg",21),S(27,"path",22),m(),c(28," Player aktualisieren "),m()()()}if(t&2){let e=s();l(9),b("bg-accent-qobuz/10",e.playerState.playerMode()==="browser")("border-accent-qobuz",e.playerState.playerMode()==="browser")("border-2",e.playerState.playerMode()==="browser")("bg-bg-card",e.playerState.playerMode()!=="browser")("hover:bg-bg-card-hover",e.playerState.playerMode()!=="browser"),l(),b("bg-accent-qobuz",e.playerState.playerMode()==="browser")("text-white",e.playerState.playerMode()==="browser")("bg-bg-secondary",e.playerState.playerMode()!=="browser")("text-text-muted",e.playerState.playerMode()!=="browser"),l(4),b("text-accent-qobuz",e.playerState.playerMode()==="browser"),l(4),f(e.playerState.playerMode()==="browser"?18:-1),l(),f(e.players().length>0?19:-1),l(),q(e.players()),l(2),f(e.players().length===0&&!e.isLoading()?22:-1),l(),f(e.isLoading()?23:-1),l(2),X("disabled",e.isLoading()),l(),b("animate-spin",e.isLoading())}}var A=class t{playerState=C(D);playback=C(B);bluesoundApi=C(he);isVisible=M(!1);isLoading=M(!1);players=M([]);ngOnInit(){this.loadPlayers()}open(){this.isVisible.set(!0),this.loadPlayers()}close(){this.isVisible.set(!1)}async selectBrowser(){await this.playback.switchToBrowser(),this.close()}async selectPlayer(i){await this.playback.switchToBluesound(i),this.close()}isSelected(i){return this.playerState.selectedPlayer()?.id===i.id}getPlayerSubtitle(i){return i.isStereoPaired?`${i.modelName} (Stereopaar)`:i.isGrouped?i.isMaster?`${i.groupName} (Master)`:`${i.groupName}`:i.modelName}loadPlayers(){this.isLoading.set(!0),this.bluesoundApi.getPlayers().subscribe({next:i=>{this.players.set(i),this.playerState.players.set(i),this.isLoading.set(!1)},error:()=>{this.isLoading.set(!1)}})}refreshPlayers(){this.isLoading.set(!0),this.bluesoundApi.refreshPlayers().subscribe({next:i=>{this.players.set(i),this.playerState.players.set(i),this.isLoading.set(!1)},error:()=>{this.isLoading.set(!1)}})}onEscapeKey(){this.isVisible()&&this.close()}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=V({type:t,selectors:[["app-player-selector"]],hostBindings:function(e,n){e&1&&x("keydown.escape",function(){return n.onEscapeKey()},N)},decls:1,vars:1,consts:[[1,"fixed","inset-0","bg-black/50","z-[110]",3,"click"],[1,"fixed","bottom-0","left-0","right-0","bg-bg-primary","rounded-t-2xl","z-[111]","max-h-[80vh]","overflow-hidden","flex","flex-col","safe-area-bottom","animate-slide-up"],[1,"flex","items-center","justify-between","px-6","py-4","border-b","border-border-subtle"],[1,"text-lg","font-semibold"],[1,"w-8","h-8","rounded-full","hover:bg-bg-card","flex","items-center","justify-center","text-text-muted","hover:text-text-primary","transition-colors",3,"click"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"w-5","h-5"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M6 18L18 6M6 6l12 12"],[1,"flex-1","overflow-y-auto","p-4","space-y-2"],[1,"w-full","flex","items-center","gap-4","p-4","rounded-xl","transition-colors",3,"click"],[1,"w-12","h-12","rounded-xl","flex","items-center","justify-center"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"w-6","h-6"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9.75 17L9 20l-1 1h8l-1-1-.75-3M3 13h18M5 17h14a2 2 0 002-2V5a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"],[1,"flex-1","text-left"],[1,"font-medium"],[1,"text-sm","text-text-muted"],[1,"w-6","h-6","rounded-full","bg-accent-qobuz","text-white","flex","items-center","justify-center"],[1,"flex","items-center","gap-3","py-3"],[1,"text-center","py-8","text-text-muted"],[1,"text-center","py-8"],[1,"p-4","border-t","border-border-subtle"],[1,"w-full","flex","items-center","justify-center","gap-2","py-3","text-sm","text-text-secondary","hover:text-text-primary","transition-colors",3,"click","disabled"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"w-4","h-4"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M5 13l4 4L19 7"],[1,"flex-1","h-px","bg-border-subtle"],[1,"text-xs","text-text-muted","uppercase","tracking-wide"],[1,"w-full","flex","items-center","gap-4","p-4","rounded-xl","transition-colors",3,"bg-accent-qobuz/10","border-accent-qobuz","border-2","bg-bg-card","hover:bg-bg-card-hover"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M19.428 15.428a2 2 0 00-1.022-.547l-2.387-.477a6 6 0 00-3.86.517l-.318.158a6 6 0 01-3.86.517L6.05 15.21a2 2 0 00-1.806.547M8 4h8l-1 1v5.172a2 2 0 00.586 1.414l5 5c1.26 1.26.367 3.414-1.415 3.414H4.828c-1.782 0-2.674-2.154-1.414-3.414l5-5A2 2 0 009 10.172V5L8 4z"],[1,"flex-1","text-left","min-w-0"],[1,"font-medium","truncate"],[1,"text-sm","text-text-muted","truncate"],[1,"w-6","h-6","rounded-full","bg-accent-qobuz","text-white","flex","items-center","justify-center","flex-shrink-0"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"w-12","h-12","mx-auto","mb-3","opacity-50"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","1.5","d","M19.428 15.428a2 2 0 00-1.022-.547l-2.387-.477a6 6 0 00-3.86.517l-.318.158a6 6 0 01-3.86.517L6.05 15.21a2 2 0 00-1.806.547M8 4h8l-1 1v5.172a2 2 0 00.586 1.414l5 5c1.26 1.26.367 3.414-1.415 3.414H4.828c-1.782 0-2.674-2.154-1.414-3.414l5-5A2 2 0 009 10.172V5L8 4z"],[1,"font-medium","mb-1"],[1,"text-sm"],[1,"w-8","h-8","border-2","border-accent-qobuz","border-t-transparent","rounded-full","animate-spin","mx-auto","mb-3"],[1,"text-text-muted"]],template:function(e,n){e&1&&_(0,Oe,29,27),e&2&&f(n.isVisible()?0:-1)},dependencies:[z],styles:[".safe-area-bottom[_ngcontent-%COMP%]{padding-bottom:env(safe-area-inset-bottom,0)}@keyframes _ngcontent-%COMP%_slide-up{0%{transform:translateY(100%)}to{transform:translateY(0)}}.animate-slide-up[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_slide-up .3s ease-out}"]})};var Qe=["playerSelector"];function Ae(t,i){if(t&1&&h(0,"img",6),t&2){let e=s();j("src",e.coverImage(),K)("alt",e.trackTitle())}}function $e(t,i){t&1&&(r(0,"div",7),g(),r(1,"svg",28),h(2,"path",27),a()())}function Ye(t,i){t&1&&(g(),r(0,"svg",12),h(1,"path",29),a())}function Ke(t,i){t&1&&(g(),r(0,"svg",13),h(1,"path",30),a())}function Re(t,i){t&1&&(g(),r(0,"svg",23),h(1,"path",31)(2,"path",32),a())}function Ue(t,i){t&1&&(g(),r(0,"svg",23),h(1,"path",33)(2,"path",31),a())}function We(t,i){t&1&&(g(),r(0,"svg",23),h(1,"path",34),a())}function Xe(t,i){t&1&&(g(),r(0,"svg",35),h(1,"path",36),a(),y(),r(2,"span",37),c(3,"Browser"),a())}function Je(t,i){if(t&1&&(g(),r(0,"svg",38),h(1,"path",39),a(),y(),r(2,"span",40),c(3),a()),t&2){let e,n=s();l(3),k((e=n.playerState.selectedPlayer())==null?null:e.name)}}var ne=class t{playerSelector;playerState=C(D);playback=C(B);hasContent=L(()=>!0);coverImage=L(()=>{let i=this.playerState.playbackStatus(),e=this.playerState.currentTrack();return i?.imageUrl||e?.album?.image?.large||e?.album?.image?.small});trackTitle=L(()=>{let i=this.playerState.playbackStatus(),e=this.playerState.currentTrack();return i?.title||e?.title});artistName=L(()=>{let i=this.playerState.playbackStatus(),e=this.playerState.currentTrack();return i?.artist||e?.performer?.name});openNowPlaying(){this.playerState.showNowPlaying()}togglePlayPause(i){i.stopPropagation(),this.playback.togglePlayPause()}skipNext(i){i.stopPropagation(),this.playback.skipNext()}async seekTo(i){let n=i.currentTarget.getBoundingClientRect(),o=(i.clientX-n.left)/n.width*100;await this.playback.seekToPercent(o)}toggleVolumePanel(){this.playerState.isVolumePanelVisible.update(i=>!i)}togglePlayerSelector(){this.playerSelector.open()}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=V({type:t,selectors:[["app-global-player"]],viewQuery:function(e,n){if(e&1&&$(Qe,5),e&2){let o;I(o=F())&&(n.playerSelector=o.first)}},decls:39,vars:15,consts:[["playerSelector",""],[1,"global-player","fixed","bottom-0","left-0","right-0","bg-bg-card","border-t","border-border-subtle","z-50","safe-area-bottom"],[1,"progress-line","h-0.5","bg-bg-secondary"],[1,"h-full","bg-accent-qobuz","transition-all","duration-200"],[1,"flex","items-center","gap-3","p-3","cursor-pointer",3,"click"],[1,"w-12","h-12","rounded-md","bg-bg-secondary","overflow-hidden","flex-shrink-0"],[1,"w-full","h-full","object-cover",3,"src","alt"],[1,"w-full","h-full","flex","items-center","justify-center","text-text-muted"],[1,"flex-1","min-w-0"],[1,"text-sm","font-medium","truncate","text-text-primary"],[1,"text-xs","text-text-muted","truncate"],[1,"w-10","h-10","rounded-full","bg-accent-qobuz","text-white","flex","items-center","justify-center","hover:opacity-90","transition-opacity",3,"click"],["xmlns","http://www.w3.org/2000/svg","fill","currentColor","viewBox","0 0 24 24",1,"w-5","h-5"],["xmlns","http://www.w3.org/2000/svg","fill","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","ml-0.5"],[1,"w-10","h-10","rounded-full","text-text-secondary","hover:text-text-primary","flex","items-center","justify-center","transition-colors","md:hidden",3,"click"],["d","M6 18l8.5-6L6 6v12zM16 6v12h2V6h-2z"],[1,"hidden","md:flex","items-center","gap-4","px-4","pb-3","-mt-1"],[1,"text-xs","text-text-muted","w-12","text-right"],[1,"flex-1","h-1","bg-bg-secondary","rounded-full","cursor-pointer","group",3,"click"],[1,"h-full","bg-accent-qobuz","rounded-full","relative","group-hover:bg-accent-qobuz-hover","transition-colors"],[1,"absolute","right-0","top-1/2","-translate-y-1/2","w-3","h-3","bg-white","rounded-full","shadow","opacity-0","group-hover:opacity-100","transition-opacity"],[1,"text-xs","text-text-muted","w-12"],[1,"w-8","h-8","text-text-secondary","hover:text-text-primary","flex","items-center","justify-center",3,"click"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"w-5","h-5"],[1,"flex","items-center","gap-2","px-3","py-1.5","rounded-lg","bg-bg-secondary","hover:bg-bg-card-hover","text-sm","transition-colors",3,"click"],[1,"hidden","xl:flex","items-center","gap-1.5","px-2","py-1","bg-accent-qobuz/10","rounded","text-xs","text-accent-qobuz","font-medium"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"w-3.5","h-3.5"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 19V6l12-3v13M9 19c0 1.105-1.343 2-3 2s-3-.895-3-2 1.343-2 3-2 3 .895 3 2zm12-3c0 1.105-1.343 2-3 2s-3-.895-3-2 1.343-2 3-2 3 .895 3 2zM9 10l12-3"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"w-6","h-6"],["d","M6 4h4v16H6V4zm8 0h4v16h-4V4z"],["d","M8 5v14l11-7z"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M5.586 15H4a1 1 0 01-1-1v-4a1 1 0 011-1h1.586l4.707-4.707C10.923 3.663 12 4.109 12 5v14c0 .891-1.077 1.337-1.707.707L5.586 15z"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M17 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M15.536 8.464a5 5 0 010 7.072M12 6.253v11.494m0 0c-.891 0-1.337-1.077-.707-1.707l4.707-4.707a1 1 0 000-1.414l-4.707-4.707c-.63-.63-1.077-.184-1.077.707"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M15.536 8.464a5 5 0 010 7.072m2.828-9.9a9 9 0 010 12.728M5.586 15H4a1 1 0 01-1-1v-4a1 1 0 011-1h1.586l4.707-4.707C10.923 3.663 12 4.109 12 5v14c0 .891-1.077 1.337-1.707.707L5.586 15z"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"w-4","h-4"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9.75 17L9 20l-1 1h8l-1-1-.75-3M3 13h18M5 17h14a2 2 0 002-2V5a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"],[1,"hidden","lg:inline"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"w-4","h-4","text-accent-qobuz"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M19.428 15.428a2 2 0 00-1.022-.547l-2.387-.477a6 6 0 00-3.86.517l-.318.158a6 6 0 01-3.86.517L6.05 15.21a2 2 0 00-1.806.547M8 4h8l-1 1v5.172a2 2 0 00.586 1.414l5 5c1.26 1.26.367 3.414-1.415 3.414H4.828c-1.782 0-2.674-2.154-1.414-3.414l5-5A2 2 0 009 10.172V5L8 4z"],[1,"hidden","lg:inline","truncate","max-w-[100px]"]],template:function(e,n){if(e&1){let o=w();r(0,"div",1)(1,"div",2),h(2,"div",3),a(),r(3,"div",4),x("click",function(){return p(o),u(n.openNowPlaying())}),r(4,"div",5),_(5,Ae,1,2,"img",6)(6,$e,3,0,"div",7),a(),r(7,"div",8)(8,"p",9),c(9),a(),r(10,"p",10),c(11),a()(),r(12,"button",11),x("click",function(G){return p(o),u(n.togglePlayPause(G))}),_(13,Ye,2,0,":svg:svg",12)(14,Ke,2,0,":svg:svg",13),a(),r(15,"button",14),x("click",function(G){return p(o),u(n.skipNext(G))}),g(),r(16,"svg",12),h(17,"path",15),a()()(),y(),r(18,"div",16)(19,"span",17),c(20),a(),r(21,"div",18),x("click",function(G){return p(o),u(n.seekTo(G))}),r(22,"div",19),h(23,"div",20),a()(),r(24,"span",21),c(25),a(),r(26,"button",22),x("click",function(){return p(o),u(n.toggleVolumePanel())}),_(27,Re,3,0,":svg:svg",23)(28,Ue,3,0,":svg:svg",23)(29,We,2,0,":svg:svg",23),a(),r(30,"button",24),x("click",function(){return p(o),u(n.togglePlayerSelector())}),_(31,Xe,4,0)(32,Je,4,1),a(),r(33,"div",25),g(),r(34,"svg",26),h(35,"path",27),a(),c(36),a()()(),y(),h(37,"app-player-selector",null,0)}e&2&&(b("hidden",!n.hasContent()),l(2),T("width",n.playerState.progressPercent(),"%"),l(3),f(n.coverImage()?5:6),l(4),k(n.trackTitle()||"Kein Titel"),l(2),k(n.artistName()||"Unbekannter K\xFCnstler"),l(2),f(n.playerState.isPlaying()?13:14),l(7),k(n.playerState.formattedPosition()),l(2),T("width",n.playerState.progressPercent(),"%"),l(3),k(n.playerState.formattedDuration()),l(2),f(n.playerState.isMuted()||n.playerState.volume()===0?27:n.playerState.volume()<50?28:29),l(4),f(n.playerState.playerMode()==="browser"?31:32),l(5),P(" ",n.playerState.qualityLabel()," "))},dependencies:[z,A],styles:[".safe-area-bottom[_ngcontent-%COMP%]{padding-bottom:env(safe-area-inset-bottom,0)}.global-player[_ngcontent-%COMP%]{box-shadow:0 -4px 20px #00000026}"]})};var Ze=(t,i)=>i.id;function et(t,i){t&1&&(d(0,"span",14),c(1,"MP3"),m())}function tt(t,i){t&1&&(d(0,"span",14),c(1,"CD"),m())}function it(t,i){t&1&&(d(0,"span",15),c(1,"24bit"),m())}function nt(t,i){t&1&&(d(0,"span",15),c(1,"MAX"),m())}function ot(t,i){if(t&1&&(d(0,"span",19),c(1),m()),t&2){let e=s().$implicit;l(),P(" ",e.badge," ")}}function rt(t,i){t&1&&(d(0,"div",20),g(),d(1,"svg",21),S(2,"path",22),m()())}function lt(t,i){if(t&1){let e=w();d(0,"button",12),E("click",function(){let o=p(e).$implicit,v=s(2);return u(v.selectQuality(o.id))}),d(1,"div",13),_(2,et,2,0,"span",14)(3,tt,2,0,"span",14)(4,it,2,0,"span",15)(5,nt,2,0,"span",15),m(),d(6,"div",16)(7,"div",17)(8,"p",18),c(9),m(),_(10,ot,2,1,"span",19),m(),d(11,"p",4),c(12),m()(),_(13,rt,3,0,"div",20),m()}if(t&2){let e,n=i.$implicit,o=s(2);b("bg-accent-qobuz/10",o.isSelected(n.id))("border-accent-qobuz",o.isSelected(n.id))("border-2",o.isSelected(n.id))("bg-bg-card",!o.isSelected(n.id))("hover:bg-bg-card-hover",!o.isSelected(n.id)),l(),b("bg-accent-qobuz",o.isSelected(n.id))("text-white",o.isSelected(n.id))("bg-bg-secondary",!o.isSelected(n.id))("text-text-muted",!o.isSelected(n.id)),l(),f((e=n.id)===5?2:e===6?3:e===7?4:e===27?5:-1),l(6),b("text-accent-qobuz",o.isSelected(n.id)),l(),P(" ",n.label," "),l(),f(n.badge?10:-1),l(2),k(n.description),l(),f(o.isSelected(n.id)?13:-1)}}function at(t,i){if(t&1){let e=w();d(0,"div",0),E("click",function(){p(e);let o=s();return u(o.close())}),m(),d(1,"div",1)(2,"div",2)(3,"div")(4,"h2",3),c(5,"Streaming-Qualit\xE4t"),m(),d(6,"p",4),c(7,"\xC4nderungen gelten ab dem n\xE4chsten Track"),m()(),d(8,"button",5),E("click",function(){p(e);let o=s();return u(o.close())}),g(),d(9,"svg",6),S(10,"path",7),m()()(),y(),d(11,"div",8),H(12,lt,14,25,"button",9,Ze),m(),d(14,"div",10)(15,"p",11),c(16," H\xF6here Qualit\xE4t ben\xF6tigt mehr Bandbreite und Speicher "),m()()()}if(t&2){let e=s();l(12),q(e.qualityOptions)}}var U=class t{playerState=C(D);playback=C(B);isVisible=M(!1);qualityOptions=[{id:27,label:"Hi-Res Max",description:"FLAC 24-Bit bis 192 kHz",badge:"Beste Qualit\xE4t"},{id:7,label:"Hi-Res",description:"FLAC 24-Bit bis 96 kHz"},{id:6,label:"CD-Qualit\xE4t",description:"FLAC 16-Bit / 44.1 kHz"},{id:5,label:"MP3",description:"320 kbps"}];open(){this.isVisible.set(!0)}close(){this.isVisible.set(!1)}isSelected(i){return this.playerState.streamingQuality()===i}selectQuality(i){this.playback.setQuality(i),this.close()}onEscapeKey(){this.isVisible()&&this.close()}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=V({type:t,selectors:[["app-quality-selector"]],hostBindings:function(e,n){e&1&&x("keydown.escape",function(){return n.onEscapeKey()},N)},decls:1,vars:1,consts:[[1,"fixed","inset-0","bg-black/50","z-[110]",3,"click"],[1,"fixed","bottom-0","left-0","right-0","bg-bg-primary","rounded-t-2xl","z-[111]","safe-area-bottom","animate-slide-up"],[1,"flex","items-center","justify-between","px-6","py-4","border-b","border-border-subtle"],[1,"text-lg","font-semibold"],[1,"text-sm","text-text-muted"],[1,"w-8","h-8","rounded-full","hover:bg-bg-card","flex","items-center","justify-center","text-text-muted","hover:text-text-primary","transition-colors",3,"click"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"w-5","h-5"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M6 18L18 6M6 6l12 12"],[1,"p-4","space-y-2"],[1,"w-full","flex","items-center","gap-4","p-4","rounded-xl","transition-colors",3,"bg-accent-qobuz/10","border-accent-qobuz","border-2","bg-bg-card","hover:bg-bg-card-hover"],[1,"px-6","pb-6","text-center"],[1,"text-xs","text-text-muted"],[1,"w-full","flex","items-center","gap-4","p-4","rounded-xl","transition-colors",3,"click"],[1,"w-12","h-12","rounded-xl","flex","items-center","justify-center","text-lg","font-bold"],[1,"text-sm"],[1,"text-xs"],[1,"flex-1","text-left"],[1,"flex","items-center","gap-2"],[1,"font-medium"],[1,"px-1.5","py-0.5","bg-accent-qobuz/20","text-accent-qobuz","text-xs","font-medium","rounded"],[1,"w-6","h-6","rounded-full","bg-accent-qobuz","text-white","flex","items-center","justify-center"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"w-4","h-4"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M5 13l4 4L19 7"]],template:function(e,n){e&1&&_(0,at,17,0),e&2&&f(n.isVisible()?0:-1)},dependencies:[z],styles:[".safe-area-bottom[_ngcontent-%COMP%]{padding-bottom:env(safe-area-inset-bottom,0)}@keyframes _ngcontent-%COMP%_slide-up{0%{transform:translateY(100%)}to{transform:translateY(0)}}.animate-slide-up[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_slide-up .3s ease-out}"]})};var st=["popupPanel"],ct=["qualitySelector"],dt=["playerSelector"],mt=t=>["/qobuz/artist",t],pt=(t,i)=>i.id;function ut(t,i){if(t&1){let e=w();r(0,"div",5),x("click",function(){p(e);let o=s();return u(o.close())}),a()}if(t&2){let e=s();b("opacity-100",!e.isClosing())("opacity-0",e.isClosing())}}function _t(t,i){t&1&&h(0,"div",11)}function ft(t,i){if(t&1&&(r(0,"span",12),c(1),a()),t&2){let e=s(2);l(),P(" ",e.playerState.queue().length," ")}}function xt(t,i){t&1&&h(0,"div",11)}function gt(t,i){if(t&1&&h(0,"img",17),t&2){let e=s(3);j("src",e.coverImage(),K)("alt",e.trackTitle())}}function vt(t,i){t&1&&(r(0,"div",18),g(),r(1,"svg",45),h(2,"path",46),a()())}function ht(t,i){if(t&1){let e=w();r(0,"a",47),x("click",function(){p(e);let o=s(3);return u(o.close())}),c(1),a()}if(t&2){let e=s(3);j("routerLink",J(2,mt,e.artistId())),l(),P(" ",e.artistName()||"Unbekannter K\xFCnstler"," ")}}function bt(t,i){if(t&1&&(r(0,"p",22),c(1),a()),t&2){let e=s(3);l(),k(e.artistName()||"Unbekannter K\xFCnstler")}}function wt(t,i){if(t&1&&(r(0,"p",23),c(1),a()),t&2){let e=s(3);l(),k(e.albumTitle())}}function Ct(t,i){t&1&&(g(),r(0,"svg",37),h(1,"path",48),a())}function yt(t,i){t&1&&(g(),r(0,"svg",38),h(1,"path",49),a())}function St(t,i){t&1&&(g(),r(0,"svg",42),h(1,"path",50),a(),c(2," Browser "))}function kt(t,i){if(t&1&&(g(),r(0,"svg",42),h(1,"path",51),a(),c(2)),t&2){let e,n=s(3);l(2),P(" ",(e=n.playerState.selectedPlayer())==null?null:e.name," ")}}function Pt(t,i){if(t&1){let e=w();r(0,"div",14)(1,"div",16),_(2,gt,1,2,"img",17)(3,vt,3,0,"div",18),a(),r(4,"div",19)(5,"h2",20),c(6),a(),_(7,ht,2,4,"a",21)(8,bt,2,1,"p",22),_(9,wt,2,1,"p",23),a(),r(10,"div",24)(11,"div",25),x("click",function(o){p(e);let v=s(2);return u(v.seekTo(o))}),r(12,"div",26),h(13,"div",27),a()(),r(14,"div",28)(15,"span"),c(16),a(),r(17,"span"),c(18),a()()(),r(19,"div",29)(20,"button",30),g(),r(21,"svg",31),h(22,"path",32),a()(),y(),r(23,"button",33),x("click",function(){p(e);let o=s(2);return u(o.skipPrevious())}),g(),r(24,"svg",34),h(25,"path",35),a()(),y(),r(26,"button",36),x("click",function(){p(e);let o=s(2);return u(o.togglePlayPause())}),_(27,Ct,2,0,":svg:svg",37)(28,yt,2,0,":svg:svg",38),a(),r(29,"button",33),x("click",function(){p(e);let o=s(2);return u(o.skipNext())}),g(),r(30,"svg",34),h(31,"path",39),a()(),y(),r(32,"button",30),g(),r(33,"svg",31),h(34,"path",32),a()()(),y(),r(35,"div",40)(36,"button",41),x("click",function(){p(e);let o=s(2);return u(o.openQualitySelector())}),g(),r(37,"svg",42),h(38,"path",43),a(),c(39),a(),y(),r(40,"button",44),x("click",function(){p(e);let o=s(2);return u(o.openPlayerSelector())}),_(41,St,3,0)(42,kt,3,1),a()()()}if(t&2){let e=s(2);l(2),f(e.coverImage()?2:3),l(4),k(e.trackTitle()||"Kein Titel"),l(),f(e.artistId()?7:8),l(2),f(e.albumTitle()?9:-1),l(3),T("width",e.playerState.progressPercent(),"%"),l(4),k(e.playerState.formattedPosition()),l(2),k(e.playerState.formattedDuration()),l(9),f(e.playerState.isPlaying()?27:28),l(12),P(" ",e.playerState.qualityLabel()," "),l(2),f(e.playerState.playerMode()==="browser"?41:42)}}function Et(t,i){t&1&&(r(0,"div",52),g(),r(1,"svg",54),h(2,"path",55),a(),y(),r(3,"p"),c(4,"Warteschlange ist leer"),a()())}function Mt(t,i){if(t&1&&h(0,"img",17),t&2){let e=s().$implicit;j("src",e.imageUrl,K)("alt",e.title)}}function Vt(t,i){if(t&1&&(r(0,"div",57)(1,"span",58),c(2),a(),r(3,"div",59),_(4,Mt,1,2,"img",17),a(),r(5,"div",60)(6,"p",61),c(7),a(),r(8,"p",62),c(9),a()(),r(10,"span",63),c(11),a()()),t&2){let e=i.$implicit,n=i.$index,o=s(4);b("bg-accent-qobuz/10",n===o.playerState.queueIndex())("hover:bg-bg-card",n!==o.playerState.queueIndex()),l(2),k(n+1),l(2),f(e.imageUrl?4:-1),l(2),b("text-accent-qobuz",n===o.playerState.queueIndex()),l(),P(" ",e.title," "),l(2),k(e.artist),l(2),k(o.formatDuration(e.duration))}}function Tt(t,i){if(t&1&&(r(0,"div",53),H(1,Vt,12,11,"div",56,pt),a()),t&2){let e=s(3);l(),q(e.playerState.queue())}}function zt(t,i){if(t&1&&(r(0,"div",15),_(1,Et,5,0,"div",52)(2,Tt,3,0,"div",53),a()),t&2){let e=s(2);l(),f(e.playerState.queue().length===0?1:2)}}function Lt(t,i){if(t&1){let e=w();r(0,"div",6,2),x("touchstart",function(o){p(e);let v=s();return u(v.onTouchStart(o))})("touchmove",function(o){p(e);let v=s();return u(v.onTouchMove(o))})("touchend",function(){p(e);let o=s();return u(o.onTouchEnd())}),r(2,"div",7),x("mousedown",function(o){p(e);let v=s();return u(v.onDragStart(o))}),h(3,"div",8),a(),r(4,"div",9)(5,"button",10),x("click",function(){p(e);let o=s();return u(o.setTab("player"))}),c(6," Aktueller Titel "),_(7,_t,1,0,"div",11),a(),r(8,"button",10),x("click",function(){p(e);let o=s();return u(o.setTab("queue"))}),c(9," Warteschlange "),_(10,ft,2,1,"span",12),_(11,xt,1,0,"div",11),a()(),r(12,"div",13),_(13,Pt,43,11,"div",14)(14,zt,3,1,"div",15),a()()}if(t&2){let e=s();T("transform",e.popupTransform()),l(5),b("text-accent-qobuz",e.activeTab()==="player")("text-text-muted",e.activeTab()!=="player"),l(2),f(e.activeTab()==="player"?7:-1),l(),b("text-accent-qobuz",e.activeTab()==="queue")("text-text-muted",e.activeTab()!=="queue"),l(2),f(e.playerState.queue().length>0?10:-1),l(),f(e.activeTab()==="queue"?11:-1),l(2),f(e.activeTab()==="player"?13:14)}}var oe=class t{popupPanel;qualitySelector;playerSelector;playerState=C(D);playback=C(B);router=C(Y);activeTab=M("player");isClosing=M(!1);touchStartY=0;currentDragY=0;dragOffset=M(0);coverImage=L(()=>{let i=this.playerState.playbackStatus(),e=this.playerState.currentTrack();return i?.imageUrl||e?.album?.image?.large});trackTitle=L(()=>{let i=this.playerState.playbackStatus(),e=this.playerState.currentTrack();return i?.title||e?.title});artistName=L(()=>{let i=this.playerState.playbackStatus(),e=this.playerState.currentTrack();return i?.artist||e?.performer?.name});artistId=L(()=>{let i=this.playerState.playbackStatus(),e=this.playerState.currentTrack();return i?.artistId||e?.performer?.id});albumTitle=L(()=>{let i=this.playerState.playbackStatus(),e=this.playerState.currentTrack();return i?.album||e?.album?.title});popupTransform=L(()=>{if(this.isClosing())return"translateY(100%)";let i=this.dragOffset();return i>0?`translateY(${i}px)`:"translateY(0)"});setTab(i){this.activeTab.set(i)}close(){this.isClosing.set(!0),setTimeout(()=>{this.playerState.hideNowPlaying(),this.isClosing.set(!1),this.dragOffset.set(0)},300)}onTouchStart(i){this.touchStartY=i.touches[0].clientY,this.currentDragY=0}onTouchMove(i){let n=i.touches[0].clientY-this.touchStartY;n>0&&(this.currentDragY=n,this.dragOffset.set(n))}onTouchEnd(){this.currentDragY>100?this.close():this.dragOffset.set(0),this.currentDragY=0}onDragStart(i){i.preventDefault(),this.touchStartY=i.clientY;let e=o=>{let v=o.clientY-this.touchStartY;v>0&&(this.currentDragY=v,this.dragOffset.set(v))},n=()=>{this.currentDragY>100?this.close():this.dragOffset.set(0),this.currentDragY=0,document.removeEventListener("mousemove",e),document.removeEventListener("mouseup",n)};document.addEventListener("mousemove",e),document.addEventListener("mouseup",n)}togglePlayPause(){this.playback.togglePlayPause()}skipPrevious(){this.playback.skipPrevious()}skipNext(){this.playback.skipNext()}async seekTo(i){let n=i.currentTarget.getBoundingClientRect(),o=(i.clientX-n.left)/n.width*100;await this.playback.seekToPercent(o)}formatDuration=ve;openQualitySelector(){this.qualitySelector.open()}openPlayerSelector(){this.playerSelector.open()}onEscapeKey(){this.playerState.isNowPlayingVisible()&&this.close()}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=V({type:t,selectors:[["app-now-playing-popup"]],viewQuery:function(e,n){if(e&1&&$(st,5)(ct,5)(dt,5),e&2){let o;I(o=F())&&(n.popupPanel=o.first),I(o=F())&&(n.qualitySelector=o.first),I(o=F())&&(n.playerSelector=o.first)}},hostBindings:function(e,n){e&1&&x("keydown.escape",function(){return n.onEscapeKey()},N)},decls:6,vars:2,consts:[["qualitySelector",""],["playerSelector",""],["popupPanel",""],[1,"fixed","inset-0","bg-black/60","z-[100]","transition-opacity","duration-300",3,"opacity-100","opacity-0"],[1,"fixed","left-0","right-0","bottom-0","bg-bg-primary","rounded-t-3xl","z-[101]","max-h-[90vh]","overflow-hidden","flex","flex-col","transition-transform","duration-300","ease-out","safe-area-bottom",3,"transform"],[1,"fixed","inset-0","bg-black/60","z-[100]","transition-opacity","duration-300",3,"click"],[1,"fixed","left-0","right-0","bottom-0","bg-bg-primary","rounded-t-3xl","z-[101]","max-h-[90vh]","overflow-hidden","flex","flex-col","transition-transform","duration-300","ease-out","safe-area-bottom",3,"touchstart","touchmove","touchend"],[1,"flex","justify-center","py-3","cursor-grab",3,"mousedown"],[1,"w-10","h-1","bg-text-muted/30","rounded-full"],[1,"flex","border-b","border-border-subtle","px-4"],[1,"flex-1","py-3","text-sm","font-medium","transition-colors","relative",3,"click"],[1,"absolute","bottom-0","left-0","right-0","h-0.5","bg-accent-qobuz"],[1,"ml-1","px-1.5","py-0.5","bg-accent-qobuz/10","text-accent-qobuz","text-xs","rounded"],[1,"flex-1","overflow-y-auto"],[1,"p-6","flex","flex-col","items-center"],[1,"p-4"],[1,"w-64","h-64","md:w-80","md:h-80","rounded-xl","overflow-hidden","bg-bg-secondary","shadow-2xl","mb-6"],[1,"w-full","h-full","object-cover",3,"src","alt"],[1,"w-full","h-full","flex","items-center","justify-center","text-text-muted"],[1,"text-center","mb-6","w-full","max-w-md"],[1,"text-xl","font-bold","truncate","mb-1"],[1,"text-text-secondary","hover:text-accent-qobuz","transition-colors",3,"routerLink"],[1,"text-text-secondary"],[1,"text-sm","text-text-muted","mt-1","truncate"],[1,"w-full","max-w-md","mb-4"],[1,"h-1.5","bg-bg-secondary","rounded-full","cursor-pointer","group",3,"click"],[1,"h-full","bg-accent-qobuz","rounded-full","relative","transition-all"],[1,"absolute","right-0","top-1/2","-translate-y-1/2","w-4","h-4","bg-white","rounded-full","shadow-lg","opacity-0","group-hover:opacity-100","transition-opacity"],[1,"flex","justify-between","mt-2","text-xs","text-text-muted"],[1,"flex","items-center","justify-center","gap-6","mb-6"],[1,"w-10","h-10","text-text-muted","hover:text-text-primary","transition-colors"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"w-5","h-5","mx-auto"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"],[1,"w-12","h-12","text-text-primary","hover:text-accent-qobuz","transition-colors",3,"click"],["xmlns","http://www.w3.org/2000/svg","fill","currentColor","viewBox","0 0 24 24",1,"w-8","h-8","mx-auto"],["d","M6 6h2v12H6V6zm3.5 6l8.5 6V6l-8.5 6z"],[1,"w-16","h-16","rounded-full","bg-accent-qobuz","text-white","flex","items-center","justify-center","hover:opacity-90","transition-opacity","shadow-lg",3,"click"],["xmlns","http://www.w3.org/2000/svg","fill","currentColor","viewBox","0 0 24 24",1,"w-8","h-8"],["xmlns","http://www.w3.org/2000/svg","fill","currentColor","viewBox","0 0 24 24",1,"w-8","h-8","ml-1"],["d","M6 18l8.5-6L6 6v12zM16 6v12h2V6h-2z"],[1,"flex","items-center","gap-4","text-sm"],[1,"flex","items-center","gap-2","px-3","py-1.5","bg-accent-qobuz/10","text-accent-qobuz","rounded-lg","hover:bg-accent-qobuz/20","transition-colors",3,"click"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"w-4","h-4"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 19V6l12-3v13M9 19c0 1.105-1.343 2-3 2s-3-.895-3-2 1.343-2 3-2 3 .895 3 2zm12-3c0 1.105-1.343 2-3 2s-3-.895-3-2 1.343-2 3-2 3 .895 3 2zM9 10l12-3"],[1,"flex","items-center","gap-2","text-text-muted","hover:text-text-primary","transition-colors",3,"click"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"w-24","h-24"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","1","d","M9 19V6l12-3v13M9 19c0 1.105-1.343 2-3 2s-3-.895-3-2 1.343-2 3-2 3 .895 3 2zm12-3c0 1.105-1.343 2-3 2s-3-.895-3-2 1.343-2 3-2 3 .895 3 2zM9 10l12-3"],[1,"text-text-secondary","hover:text-accent-qobuz","transition-colors",3,"click","routerLink"],["d","M6 4h4v16H6V4zm8 0h4v16h-4V4z"],["d","M8 5v14l11-7z"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9.75 17L9 20l-1 1h8l-1-1-.75-3M3 13h18M5 17h14a2 2 0 002-2V5a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M19.428 15.428a2 2 0 00-1.022-.547l-2.387-.477a6 6 0 00-3.86.517l-.318.158a6 6 0 01-3.86.517L6.05 15.21a2 2 0 00-1.806.547M8 4h8l-1 1v5.172a2 2 0 00.586 1.414l5 5c1.26 1.26.367 3.414-1.415 3.414H4.828c-1.782 0-2.674-2.154-1.414-3.414l5-5A2 2 0 009 10.172V5L8 4z"],[1,"text-center","py-12","text-text-muted"],[1,"space-y-1"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"w-12","h-12","mx-auto","mb-4","opacity-50"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","1.5","d","M9 19V6l12-3v13M9 19c0 1.105-1.343 2-3 2s-3-.895-3-2 1.343-2 3-2 3 .895 3 2zm12-3c0 1.105-1.343 2-3 2s-3-.895-3-2 1.343-2 3-2 3 .895 3 2zM9 10l12-3"],[1,"flex","items-center","gap-3","p-3","rounded-lg","transition-colors",3,"bg-accent-qobuz/10","hover:bg-bg-card"],[1,"flex","items-center","gap-3","p-3","rounded-lg","transition-colors"],[1,"w-6","text-center","text-sm","text-text-muted"],[1,"w-10","h-10","rounded","bg-bg-secondary","overflow-hidden","flex-shrink-0"],[1,"flex-1","min-w-0"],[1,"text-sm","font-medium","truncate"],[1,"text-xs","text-text-muted","truncate"],[1,"text-sm","text-text-muted"]],template:function(e,n){e&1&&(_(0,ut,1,4,"div",3),_(1,Lt,15,14,"div",4),h(2,"app-quality-selector",null,0)(4,"app-player-selector",null,1)),e&2&&(f(n.playerState.isNowPlayingVisible()?0:-1),l(),f(n.playerState.isNowPlayingVisible()?1:-1))},dependencies:[z,Z,U,A],styles:[".safe-area-bottom[_ngcontent-%COMP%]{padding-bottom:env(safe-area-inset-bottom,0)}"]})};var Nt=t=>({exact:t}),Ht=(t,i)=>i.route;function qt(t,i){if(t&1){let e=w();r(0,"div",5),x("click",function(){p(e);let o=s();return u(o.close())}),a()}if(t&2){let e=s();b("opacity-100",!e.isClosing())("opacity-0",e.isClosing())}}function Dt(t,i){if(t&1){let e=w();r(0,"a",21),x("click",function(){p(e);let o=s(3);return u(o.close())}),h(1,"span",22),r(2,"span"),c(3),a()()}if(t&2){let e=s().$implicit;j("routerLink",e.route)("routerLinkActiveOptions",J(4,Nt,e.route==="/")),l(),j("innerHTML",e.icon,W),l(2),k(e.label)}}function jt(t,i){if(t&1&&_(0,Dt,4,6,"a",20),t&2){let e=i.$implicit,n=s(2);f(!e.requiresAuth||n.auth.isLoggedIn()?0:-1)}}function Bt(t,i){if(t&1&&(r(0,"p",23),c(1),a(),r(2,"p",24),c(3),a()),t&2){let e,n,o=s(2);l(),k(((e=o.profileService.activeProfile())==null?null:e.name)??((e=o.auth.user())==null?null:e.display_name)??"Profil"),l(2),k((n=o.auth.user())==null?null:n.email)}}function It(t,i){if(t&1&&(r(0,"p",23),c(1),a(),r(2,"p",25),c(3,"Nicht eingeloggt"),a()),t&2){let e,n=s(2);l(),k(((e=n.profileService.activeProfile())==null?null:e.name)??"Kein Profil")}}function Ft(t,i){if(t&1){let e=w();r(0,"button",26),x("click",function(){p(e);let o=s(2);return u(o.logout())}),g(),r(1,"svg",27),h(2,"path",28),a(),c(3," Von Qobuz abmelden "),a()}}function Gt(t,i){if(t&1){let e=w();r(0,"a",29),x("click",function(){p(e);let o=s(2);return u(o.close())}),c(1," Bei Qobuz anmelden "),a()}}function Ot(t,i){if(t&1){let e=w();r(0,"nav",6)(1,"div",7)(2,"h1",8),c(3,"Bluesound"),a(),r(4,"p",9),c(5,"Web Controller"),a()(),r(6,"div",10),H(7,jt,1,1,null,null,Ht),a(),r(9,"div",11)(10,"button",12),x("click",function(){p(e);let o=s();return u(o.openProfileSwitcher())}),r(11,"div",13),c(12),a(),r(13,"div",14),_(14,Bt,4,2)(15,It,4,1),r(16,"p",15),c(17,"Profil wechseln"),a()(),g(),r(18,"svg",16),h(19,"path",17),a()(),_(20,Ft,4,0,"button",18)(21,Gt,2,0,"a",19),a()()}if(t&2){let e=s();b("translate-x-0",!e.isClosing())("-translate-x-full",e.isClosing()),l(7),q(e.menuItems),l(4),T("background-color",e.activeProfileColor()),l(),P(" ",e.activeProfileInitial()," "),l(2),f(e.auth.isLoggedIn()?14:15),l(6),f(e.auth.isLoggedIn()?20:21)}}function Qt(t,i){if(t&1){let e=w();r(0,"app-profile-switcher",30),x("closed",function(){p(e);let o=s();return u(o.closeProfileSwitcher())})("profileSelected",function(o){p(e);let v=s();return u(v.onProfileSelected(o))}),a()}}var re=class t{auth=C(te);profileService=C(ee);router=C(Y);isOpen=M(!1);isClosing=M(!1);showProfileSwitcher=M(!1);menuItems=[{label:"Home",route:"/",icon:'<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6" /></svg>'},{label:"Qobuz",route:"/qobuz/browse",icon:'<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19V6l12-3v13M9 19c0 1.105-1.343 2-3 2s-3-.895-3-2 1.343-2 3-2 3 .895 3 2zm12-3c0 1.105-1.343 2-3 2s-3-.895-3-2 1.343-2 3-2 3 .895 3 2zM9 10l12-3" /></svg>',requiresAuth:!0},{label:"TuneIn",route:"/tunein",icon:'<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5.636 18.364a9 9 0 010-12.728m12.728 0a9 9 0 010 12.728m-9.9-2.829a5 5 0 010-7.07m7.072 0a5 5 0 010 7.07M13 12a1 1 0 11-2 0 1 1 0 012 0z" /></svg>'},{label:"Radio Paradise",route:"/radioparadise",icon:'<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19.428 15.428a2 2 0 00-1.022-.547l-2.387-.477a6 6 0 00-3.86.517l-.318.158a6 6 0 01-3.86.517L6.05 15.21a2 2 0 00-1.806.547M8 4h8l-1 1v5.172a2 2 0 00.586 1.414l5 5c1.26 1.26.367 3.414-1.415 3.414H4.828c-1.782 0-2.674-2.154-1.414-3.414l5-5A2 2 0 009 10.172V5L8 4z" /></svg>'},{label:"Ger\xE4te",route:"/players",icon:'<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.75 17L9 20l-1 1h8l-1-1-.75-3M3 13h18M5 17h14a2 2 0 002-2V5a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z" /></svg>'},{label:"Einstellungen",route:"/settings",icon:'<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"><circle cx="12" cy="12" r="3" stroke-width="2"/><path stroke-width="2" d="M19.4 15a1.65 1.65 0 00.33 1.82l.06.06a2 2 0 010 2.83 2 2 0 01-2.83 0l-.06-.06a1.65 1.65 0 00-1.82-.33 1.65 1.65 0 00-1 1.51V21a2 2 0 01-2 2 2 2 0 01-2-2v-.09A1.65 1.65 0 009 19.4a1.65 1.65 0 00-1.82.33l-.06.06a2 2 0 01-2.83 0 2 2 0 010-2.83l.06-.06a1.65 1.65 0 00.33-1.82 1.65 1.65 0 00-1.51-1H3a2 2 0 01-2-2 2 2 0 012-2h.09A1.65 1.65 0 004.6 9a1.65 1.65 0 00-.33-1.82l-.06-.06a2 2 0 010-2.83 2 2 0 012.83 0l.06.06a1.65 1.65 0 001.82.33H9a1.65 1.65 0 001-1.51V3a2 2 0 012-2 2 2 0 012 2v.09a1.65 1.65 0 001 1.51 1.65 1.65 0 001.82-.33l.06-.06a2 2 0 012.83 0 2 2 0 010 2.83l-.06.06a1.65 1.65 0 00-.33 1.82V9a1.65 1.65 0 001.51 1H21a2 2 0 012 2 2 2 0 01-2 2h-.09a1.65 1.65 0 00-1.51 1z"/></svg>'}];ngOnInit(){this.profileService.loadProfiles().subscribe()}activeProfileColor(){let i=this.profileService.activeProfile();return i?this.profileService.getProfileColor(i.id):"hsl(200, 65%, 45%)"}activeProfileInitial(){let i=this.profileService.activeProfile();if(i)return this.profileService.getProfileInitial(i.name);let e=this.auth.user();return e?.display_name?e.display_name.charAt(0).toUpperCase():"Q"}toggle(){this.isOpen()?this.close():this.isOpen.set(!0)}close(){this.isClosing.set(!0),setTimeout(()=>{this.isOpen.set(!1),this.isClosing.set(!1)},300)}openProfileSwitcher(){this.showProfileSwitcher.set(!0)}closeProfileSwitcher(){this.showProfileSwitcher.set(!1)}onProfileSelected(i){i.qobuz?.authToken?this.auth.loadFromProfileCredentials(i.qobuz):(this.auth.logout(),this.close(),this.router.navigate(["/qobuz/login"]))}logout(){this.auth.logout(),this.close(),this.router.navigate(["/"])}onEscapeKey(){this.showProfileSwitcher()||this.isOpen()&&this.close()}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=V({type:t,selectors:[["app-hamburger-menu"]],hostBindings:function(e,n){e&1&&x("keydown.escape",function(){return n.onEscapeKey()},N)},decls:8,vars:15,consts:[[1,"hamburger-btn","fixed","top-4","left-4","z-[110]","w-10","h-10","rounded-lg","bg-bg-card","border","border-border-subtle","flex","items-center","justify-center","hover:bg-bg-card-hover","transition-colors",3,"click"],[1,"hamburger-lines","w-5","h-4","relative","flex","flex-col","justify-between"],[1,"block","h-0.5","w-full","bg-text-primary","rounded","transition-all","duration-300"],[1,"fixed","inset-0","bg-black/50","z-[55]","transition-opacity","duration-300",3,"opacity-100","opacity-0"],[1,"fixed","top-0","left-0","bottom-0","w-72","max-w-[80vw]","bg-bg-primary","z-[56]","shadow-2xl","transition-transform","duration-300","ease-out","flex","flex-col","safe-area-left",3,"translate-x-0","-translate-x-full"],[1,"fixed","inset-0","bg-black/50","z-[55]","transition-opacity","duration-300",3,"click"],[1,"fixed","top-0","left-0","bottom-0","w-72","max-w-[80vw]","bg-bg-primary","z-[56]","shadow-2xl","transition-transform","duration-300","ease-out","flex","flex-col","safe-area-left"],[1,"p-6","pt-20","border-b","border-border-subtle"],[1,"text-xl","font-bold","text-text-primary"],[1,"text-sm","text-text-muted","mt-1"],[1,"flex-1","overflow-y-auto","py-4"],[1,"border-t","border-border-subtle","p-4"],[1,"w-full","flex","items-center","gap-3","p-2","-m-2","rounded-xl","hover:bg-bg-card","transition-colors","text-left",3,"click"],[1,"w-12","h-12","rounded-full","flex","items-center","justify-center","text-white","font-semibold","text-lg","flex-shrink-0"],[1,"flex-1","min-w-0"],[1,"text-xs","text-accent-qobuz","mt-0.5"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"w-5","h-5","text-text-muted","flex-shrink-0"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 5l7 7-7 7"],[1,"w-full","mt-3","px-4","py-2","text-sm","text-text-muted","hover:text-error","hover:bg-error/10","rounded-lg","transition-colors","flex","items-center","justify-center","gap-2"],["routerLink","/qobuz/login",1,"block","w-full","mt-3","px-4","py-3","bg-accent-qobuz","text-white","text-center","rounded-lg","font-medium","hover:opacity-90","transition-opacity"],["routerLinkActive","bg-accent-qobuz/10 text-accent-qobuz border-r-2 border-accent-qobuz",1,"flex","items-center","gap-4","px-6","py-3","text-text-secondary","hover:bg-bg-card","transition-colors",3,"routerLink","routerLinkActiveOptions"],["routerLinkActive","bg-accent-qobuz/10 text-accent-qobuz border-r-2 border-accent-qobuz",1,"flex","items-center","gap-4","px-6","py-3","text-text-secondary","hover:bg-bg-card","transition-colors",3,"click","routerLink","routerLinkActiveOptions"],[1,"w-6","h-6",3,"innerHTML"],[1,"font-medium","truncate"],[1,"text-xs","text-text-muted","truncate"],[1,"text-xs","text-text-muted"],[1,"w-full","mt-3","px-4","py-2","text-sm","text-text-muted","hover:text-error","hover:bg-error/10","rounded-lg","transition-colors","flex","items-center","justify-center","gap-2",3,"click"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"w-4","h-4"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"],["routerLink","/qobuz/login",1,"block","w-full","mt-3","px-4","py-3","bg-accent-qobuz","text-white","text-center","rounded-lg","font-medium","hover:opacity-90","transition-opacity",3,"click"],[3,"closed","profileSelected"]],template:function(e,n){e&1&&(r(0,"button",0),x("click",function(){return n.toggle()}),r(1,"div",1),h(2,"span",2)(3,"span",2)(4,"span",2),a()(),_(5,qt,1,4,"div",3),_(6,Ot,22,9,"nav",4),_(7,Qt,1,0,"app-profile-switcher")),e&2&&(b("is-open",n.isOpen()),l(2),b("rotate-45",n.isOpen())("translate-y-[7px]",n.isOpen()),l(),b("opacity-0",n.isOpen()),l(),b("-rotate-45",n.isOpen())("-translate-y-[7px]",n.isOpen()),l(),f(n.isOpen()?5:-1),l(),f(n.isOpen()?6:-1),l(),f(n.showProfileSwitcher()?7:-1))},dependencies:[z,Z,ue,R],styles:[".safe-area-left[_ngcontent-%COMP%]{padding-left:env(safe-area-inset-left,0)}"]})};var At=(t,i)=>i.id;function $t(t,i){if(t&1){let e=w();d(0,"div",7)(1,"span",8),c(2),m(),d(3,"button",9),E("click",function(){let o=p(e).$implicit,v=s(2);return u(v.executeAction(o))}),S(4,"span",10),m()()}if(t&2){let e=i.$implicit,n=i.$index;T("animation-delay",n*50+"ms"),l(2),P(" ",e.label," "),l(),ce(e.color||"bg-bg-card text-text-primary"),l(),X("innerHTML",e.icon,W)}}function Yt(t,i){if(t&1&&(d(0,"div",1),H(1,$t,5,6,"div",6,At),m()),t&2){let e=s();l(),q(e.visibleActions())}}function Kt(t,i){if(t&1){let e=w();d(0,"div",11),E("click",function(){p(e);let o=s();return u(o.close())}),m()}}var le=class t{router=C(Y);playerState=C(D);auth=C(te);isOpen=M(!1);fabBottom=L(()=>"calc(100px + env(safe-area-inset-bottom, 0px))");allActions=[{id:"search",label:"Suchen",icon:'<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" /></svg>',action:()=>this.router.navigate(["/qobuz/search"]),color:"bg-accent-qobuz text-white"},{id:"volume",label:"Lautst\xE4rke",icon:'<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15.536 8.464a5 5 0 010 7.072m2.828-9.9a9 9 0 010 12.728M5.586 15H4a1 1 0 01-1-1v-4a1 1 0 011-1h1.586l4.707-4.707C10.923 3.663 12 4.109 12 5v14c0 .891-1.077 1.337-1.707.707L5.586 15z" /></svg>',action:()=>this.playerState.isVolumePanelVisible.set(!0)},{id:"quality",label:"Qualit\xE4t",icon:'<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19V6l12-3v13M9 19c0 1.105-1.343 2-3 2s-3-.895-3-2 1.343-2 3-2 3 .895 3 2zm12-3c0 1.105-1.343 2-3 2s-3-.895-3-2 1.343-2 3-2 3 .895 3 2zM9 10l12-3" /></svg>',action:()=>this.showQualitySelector()},{id:"player",label:"Ger\xE4t w\xE4hlen",icon:'<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.75 17L9 20l-1 1h8l-1-1-.75-3M3 13h18M5 17h14a2 2 0 002-2V5a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z" /></svg>',action:()=>this.router.navigate(["/players"])}];visibleActions=L(()=>this.auth.isLoggedIn()?this.allActions:this.allActions.filter(i=>i.id==="player"));toggle(){this.isOpen.update(i=>!i)}close(){this.isOpen.set(!1)}executeAction(i){i.action(),this.close()}showQualitySelector(){}onEscapeKey(){this.isOpen()&&this.close()}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=V({type:t,selectors:[["app-fab-menu"]],hostBindings:function(e,n){e&1&&x("keydown.escape",function(){return n.onEscapeKey()},N)},decls:6,vars:6,consts:[[1,"fixed","right-4","z-40","transition-all","duration-300"],[1,"flex","flex-col-reverse","items-end","gap-3","mb-3"],[1,"w-14","h-14","rounded-full","bg-accent-qobuz","text-white","shadow-xl","flex","items-center","justify-center","transition-all","duration-300","hover:shadow-2xl",3,"click"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"w-7","h-7","transition-transform"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 4v16m8-8H4"],[1,"fixed","inset-0","bg-black/30","z-30"],[1,"flex","items-center","gap-3","animate-fab-item",3,"animation-delay"],[1,"flex","items-center","gap-3","animate-fab-item"],[1,"px-3","py-1.5","bg-bg-card","rounded-lg","text-sm","font-medium","shadow-lg","whitespace-nowrap"],[1,"w-12","h-12","rounded-full","shadow-lg","flex","items-center","justify-center","transition-transform","hover:scale-110",3,"click"],[1,"w-6","h-6",3,"innerHTML"],[1,"fixed","inset-0","bg-black/30","z-30",3,"click"]],template:function(e,n){e&1&&(d(0,"div",0),_(1,Yt,3,0,"div",1),d(2,"button",2),E("click",function(){return n.toggle()}),g(),d(3,"svg",3),S(4,"path",4),m()()(),_(5,Kt,1,0,"div",5)),e&2&&(T("bottom",n.fabBottom()),l(),f(n.isOpen()?1:-1),l(),b("rotate-45",n.isOpen()),l(3),f(n.isOpen()?5:-1))},dependencies:[z],styles:["@keyframes _ngcontent-%COMP%_fab-item-enter{0%{opacity:0;transform:translateY(10px) scale(.9)}to{opacity:1;transform:translateY(0) scale(1)}}.animate-fab-item[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fab-item-enter .2s ease-out forwards;opacity:0}"]})};var Rt=["sliderTrack"];function Ut(t,i){t&1&&(d(0,"div",8),g(),d(1,"svg",11),S(2,"path",12),m(),y(),d(3,"p",13),c(4,"Fixed Volume"),m(),d(5,"p",14),c(6,"Die Lautst\xE4rke wird extern gesteuert"),m()())}function Wt(t,i){t&1&&(g(),d(0,"svg",6),S(1,"path",26)(2,"path",27),m())}function Xt(t,i){t&1&&(g(),d(0,"svg",6),S(1,"path",28),m())}function Jt(t,i){if(t&1){let e=w();d(0,"button",29),E("click",function(){let o=p(e).$implicit,v=s(3);return u(v.setVolume(o))}),c(1),m()}if(t&2){let e=i.$implicit,n=s(3);b("bg-accent-qobuz",n.playerState.volume()===e)("text-white",n.playerState.volume()===e)("bg-bg-card",n.playerState.volume()!==e)("text-text-secondary",n.playerState.volume()!==e)("hover:bg-bg-card-hover",n.playerState.volume()!==e),l(),P(" ",e,"% ")}}function Zt(t,i){if(t&1){let e=w();d(0,"div",15)(1,"div",16)(2,"button",17),E("click",function(){p(e);let o=s(2);return u(o.toggleMute())}),_(3,Wt,3,0,":svg:svg",6)(4,Xt,2,0,":svg:svg",6),m(),d(5,"span",18),c(6),m(),d(7,"span",19),c(8,"%"),m()(),d(9,"div",20,0),E("mousedown",function(o){p(e);let v=s(2);return u(v.onSliderStart(o))})("touchstart",function(o){p(e);let v=s(2);return u(v.onTouchStart(o))}),S(11,"div",21)(12,"div",22)(13,"div",23),m()(),d(14,"div",24),H(15,Jt,2,11,"button",25,se),m()}if(t&2){let e=s(2);l(3),f(e.playerState.isMuted()||e.playerState.volume()===0?3:4),l(3),P(" ",e.playerState.isMuted()?0:e.playerState.volume()," "),l(6),T("width",e.playerState.isMuted()?0:e.playerState.volume(),"%"),l(),T("left",e.playerState.isMuted()?0:e.playerState.volume(),"%"),l(2),q(e.presets)}}function ei(t,i){t&1&&(d(0,"span",10),g(),d(1,"svg",30),S(2,"path",31),m(),c(3," Browser-Wiedergabe "),m())}function ti(t,i){if(t&1&&(d(0,"span",10),g(),d(1,"svg",32),S(2,"path",33),m(),c(3),m()),t&2){let e,n=s(2);l(3),P(" ",(e=n.playerState.selectedPlayer())==null?null:e.name," ")}}function ii(t,i){if(t&1){let e=w();d(0,"div",1),E("click",function(){p(e);let o=s();return u(o.close())}),m(),d(1,"div",2),E("click",function(o){return p(e),u(o.stopPropagation())}),d(2,"div",3)(3,"h3",4),c(4,"Lautst\xE4rke"),m(),d(5,"button",5),E("click",function(){p(e);let o=s();return u(o.close())}),g(),d(6,"svg",6),S(7,"path",7),m()()(),_(8,Ut,7,0,"div",8)(9,Zt,17,6),y(),d(10,"div",9),_(11,ei,4,0,"span",10)(12,ti,4,1,"span",10),m()()}if(t&2){let e=s();l(8),f(e.playerState.isFixedVolume()?8:9),l(3),f(e.playerState.playerMode()==="browser"?11:e.playerState.selectedPlayer()?12:-1)}}var ae=class t{sliderTrack;playerState=C(D);playback=C(B);presets=[25,50,75,100];isDragging=!1;close(){this.playerState.isVolumePanelVisible.set(!1)}toggleMute(){this.playback.toggleMute()}setVolume(i){this.playback.setVolume(i)}onSliderStart(i){this.isDragging=!0,this.updateVolumeFromEvent(i);let e=o=>{this.isDragging&&this.updateVolumeFromEvent(o)},n=()=>{this.isDragging=!1,document.removeEventListener("mousemove",e),document.removeEventListener("mouseup",n)};document.addEventListener("mousemove",e),document.addEventListener("mouseup",n)}onTouchStart(i){this.isDragging=!0,this.updateVolumeFromTouch(i);let e=o=>{this.isDragging&&(o.preventDefault(),this.updateVolumeFromTouch(o))},n=()=>{this.isDragging=!1,document.removeEventListener("touchmove",e),document.removeEventListener("touchend",n)};document.addEventListener("touchmove",e,{passive:!1}),document.addEventListener("touchend",n)}updateVolumeFromEvent(i){if(!this.sliderTrack)return;let n=this.sliderTrack.nativeElement.getBoundingClientRect(),o=Math.max(0,Math.min(100,(i.clientX-n.left)/n.width*100)),v=Math.round(o);this.playback.setVolume(v)}updateVolumeFromTouch(i){if(!this.sliderTrack||!i.touches[0])return;let n=this.sliderTrack.nativeElement.getBoundingClientRect(),o=Math.max(0,Math.min(100,(i.touches[0].clientX-n.left)/n.width*100)),v=Math.round(o);this.playback.setVolume(v)}onEscapeKey(){this.playerState.isVolumePanelVisible()&&this.close()}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=V({type:t,selectors:[["app-volume-panel"]],viewQuery:function(e,n){if(e&1&&$(Rt,5),e&2){let o;I(o=F())&&(n.sliderTrack=o.first)}},hostBindings:function(e,n){e&1&&x("keydown.escape",function(){return n.onEscapeKey()},N)},decls:1,vars:1,consts:[["sliderTrack",""],[1,"fixed","inset-0","bg-black/40","z-[80]",3,"click"],[1,"fixed","bottom-0","left-0","right-0","bg-bg-primary","rounded-t-2xl","z-[81]","p-6","safe-area-bottom","animate-slide-up",3,"click"],[1,"flex","items-center","justify-between","mb-6"],[1,"text-lg","font-semibold"],[1,"w-8","h-8","rounded-full","hover:bg-bg-card","flex","items-center","justify-center","text-text-muted","hover:text-text-primary","transition-colors",3,"click"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"w-5","h-5"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M6 18L18 6M6 6l12 12"],[1,"text-center","py-8","text-text-muted"],[1,"mt-6","pt-4","border-t","border-border-subtle","text-center","text-sm","text-text-muted"],[1,"flex","items-center","justify-center","gap-2"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"w-12","h-12","mx-auto","mb-3","opacity-50"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","1.5","d","M15.536 8.464a5 5 0 010 7.072m2.828-9.9a9 9 0 010 12.728M5.586 15H4a1 1 0 01-1-1v-4a1 1 0 011-1h1.586l4.707-4.707C10.923 3.663 12 4.109 12 5v14c0 .891-1.077 1.337-1.707.707L5.586 15z"],[1,"font-medium"],[1,"text-sm","mt-1"],[1,"mb-6"],[1,"flex","items-center","justify-center","gap-4","mb-4"],[1,"w-10","h-10","rounded-full","bg-bg-card","flex","items-center","justify-center","text-text-secondary","hover:text-text-primary","transition-colors",3,"click"],[1,"text-4xl","font-bold","tabular-nums","min-w-[80px]","text-center"],[1,"text-text-muted"],[1,"relative","h-12","flex","items-center","cursor-pointer","touch-none",3,"mousedown","touchstart"],[1,"absolute","inset-x-0","h-2","bg-bg-secondary","rounded-full"],[1,"absolute","left-0","h-2","bg-accent-qobuz","rounded-full","transition-all"],[1,"absolute","w-6","h-6","bg-white","rounded-full","shadow-lg","border-2","border-accent-qobuz","transition-all","-translate-x-1/2"],[1,"grid","grid-cols-4","gap-3"],[1,"py-3","rounded-lg","text-sm","font-medium","transition-colors",3,"bg-accent-qobuz","text-white","bg-bg-card","text-text-secondary","hover:bg-bg-card-hover"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M5.586 15H4a1 1 0 01-1-1v-4a1 1 0 011-1h1.586l4.707-4.707C10.923 3.663 12 4.109 12 5v14c0 .891-1.077 1.337-1.707.707L5.586 15z"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M17 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M15.536 8.464a5 5 0 010 7.072m2.828-9.9a9 9 0 010 12.728M5.586 15H4a1 1 0 01-1-1v-4a1 1 0 011-1h1.586l4.707-4.707C10.923 3.663 12 4.109 12 5v14c0 .891-1.077 1.337-1.707.707L5.586 15z"],[1,"py-3","rounded-lg","text-sm","font-medium","transition-colors",3,"click"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"w-4","h-4"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9.75 17L9 20l-1 1h8l-1-1-.75-3M3 13h18M5 17h14a2 2 0 002-2V5a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"w-4","h-4","text-accent-qobuz"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M19.428 15.428a2 2 0 00-1.022-.547l-2.387-.477a6 6 0 00-3.86.517l-.318.158a6 6 0 01-3.86.517L6.05 15.21a2 2 0 00-1.806.547M8 4h8l-1 1v5.172a2 2 0 00.586 1.414l5 5c1.26 1.26.367 3.414-1.415 3.414H4.828c-1.782 0-2.674-2.154-1.414-3.414l5-5A2 2 0 009 10.172V5L8 4z"]],template:function(e,n){e&1&&_(0,ii,13,2),e&2&&f(n.playerState.isVolumePanelVisible()?0:-1)},dependencies:[z],styles:[".safe-area-bottom[_ngcontent-%COMP%]{padding-bottom:env(safe-area-inset-bottom,0)}@keyframes _ngcontent-%COMP%_slide-up{0%{transform:translateY(100%)}to{transform:translateY(0)}}.animate-slide-up[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_slide-up .3s ease-out}"]})};export{ne as a,oe as b,R as c,re as d,le as e,ae as f};
