import{a as $}from"./chunk-N2MVT66X.js";import{a as H,d as B}from"./chunk-T7OVQ334.js";import{a as q}from"./chunk-2BQX3FPL.js";import{e as L}from"./chunk-TB3BYDLV.js";import{e as N}from"./chunk-F3JCDRW3.js";import{Ab as j,Ja as E,Mb as Q,R as C,Sa as p,Ta as u,Va as z,W as y,Wa as I,X as f,Xa as S,Y as x,Ya as i,Z as b,Za as l,_a as c,cb as M,eb as h,gb as m,ha as P,lb as A,ob as o,pb as V,qb as g,ua as D,xa as s}from"./chunk-F7VV2WDX.js";var F=(n,t)=>t.id;function G(n,t){n&1&&(i(0,"div",1),c(1,"div",3),l())}function R(n,t){if(n&1&&c(0,"div",38),n&2){let e=m(2);A("background-image","url("+e.coverImage()+")")}}function W(n,t){if(n&1&&c(0,"img",13),n&2){let e,a=m(2);S("src",a.coverImage(),D)("alt",(e=a.playlist())==null?null:e.name)}}function Z(n,t){n&1&&(i(0,"div",14),x(),i(1,"svg",39),c(2,"path",40),l()())}function U(n,t){if(n&1&&(i(0,"p",18),o(1),l()),n&2){let e,a=m(2);s(),g(" von ",(e=a.playlist())==null||e.owner==null?null:e.owner.name," ")}}function J(n,t){if(n&1&&(i(0,"span",20),o(1,"\u2022"),l(),i(2,"span"),o(3),l()),n&2){let e=m(2);s(3),g("Aktualisiert ",e.formatDate(e.playlist().updated_at))}}function K(n,t){if(n&1&&(i(0,"p",21),o(1),l()),n&2){let e,a=m(2);s(),g(" ",(e=a.playlist())==null?null:e.description," ")}}function X(n,t){if(n&1){let e=M();i(0,"app-track-item",41),h("play",function(){let r=y(e),_=r.$implicit,v=r.$index,w=m(2);return f(w.playTrack(_,v))})("menu",function(r){y(e);let _=m(2);return f(_.openTrackMenu(r))}),l()}if(n&2){let e=t.$implicit,a=t.$index,r=m(2);S("track",e)("trackNumber",a+1)("showNumber",!0)("showArt",!0)("showArtist",!0)("showAlbum",!0)("showQuality",r.isTrackHiRes(e))("showMenu",!0)("isPlaying",r.isTrackPlaying(e))}}function Y(n,t){n&1&&(i(0,"div",37),x(),i(1,"svg",42),c(2,"path",43),l(),b(),i(3,"p"),o(4,"Diese Playlist enth\xE4lt keine Tracks"),l()())}function tt(n,t){if(n&1){let e=M();i(0,"div",4),p(1,R,1,2,"div",5),c(2,"div",6),i(3,"div",7)(4,"button",8),h("click",function(){y(e);let r=m();return f(r.goBack())}),x(),i(5,"svg",9),c(6,"path",10),l(),o(7," Zur\xFCck "),l(),b(),i(8,"div",11)(9,"div",12),p(10,W,1,2,"img",13)(11,Z,3,0,"div",14),l(),i(12,"div",15)(13,"span",16),o(14," Playlist "),l(),i(15,"h1",17),o(16),l(),p(17,U,2,1,"p",18),i(18,"div",19)(19,"span"),o(20),l(),i(21,"span",20),o(22,"\u2022"),l(),i(23,"span"),o(24),l(),p(25,J,4,1),l(),p(26,K,2,1,"p",21),i(27,"div",22)(28,"button",23),h("click",function(){y(e);let r=m();return f(r.playAll())}),x(),i(29,"svg",24),c(30,"path",25),l(),o(31," Abspielen "),l(),b(),i(32,"button",26),h("click",function(){y(e);let r=m();return f(r.shufflePlay())}),x(),i(33,"svg",27),c(34,"path",28),l()()()()()()(),b(),i(35,"div",29)(36,"div",30)(37,"span",31),o(38,"#"),l(),c(39,"span",32),i(40,"span",33),o(41,"Titel"),l(),i(42,"span",34),o(43,"Dauer"),l(),c(44,"span",35),l(),z(45,X,1,9,"app-track-item",36,F),p(47,Y,5,0,"div",37),l()}if(n&2){let e,a,r,_,v,w,T,k,d=m();s(),u(d.coverImage()?1:-1),s(9),u(d.coverImage()?10:11),s(6),g(" ",(e=d.playlist())==null?null:e.name," "),s(),u(!((a=d.playlist())==null||a.owner==null)&&a.owner.name?17:-1),s(3),g("",(r=d.playlist())==null?null:r.tracks_count," Tracks"),s(4),V(d.formatPlaylistDuration(((_=d.playlist())==null?null:_.duration)??0)),s(),u((v=d.playlist())!=null&&v.updated_at?25:-1),s(),u((w=d.playlist())!=null&&w.description?26:-1),s(19),I((T=d.playlist())==null||T.tracks==null?null:T.tracks.items),s(2),u(!((k=d.playlist())==null||k.tracks==null||k.tracks.items==null)&&k.tracks.items.length?-1:47)}}function et(n,t){n&1&&(i(0,"div",2),x(),i(1,"svg",42),c(2,"path",44),l(),b(),i(3,"p"),o(4,"Playlist konnte nicht geladen werden"),l(),i(5,"button",45),o(6," Zur\xFCck zum Browser "),l()())}var O=class n{id;qobuzApi=C(q);playerState=C($);contextMenu=C(H);loading=P(!0);playlist=P(null);coverImage=j(()=>{let t=this.playlist();return t?t.images300?.[0]??t.images150?.[0]??t.images?.[0]:null});formatDuration=L;ngOnInit(){this.id&&this.loadPlaylist()}loadPlaylist(){let t=parseInt(this.id,10);this.qobuzApi.getPlaylist(t).subscribe({next:e=>{this.playlist.set(e),this.loading.set(!1)},error:()=>this.loading.set(!1)})}formatPlaylistDuration(t){let e=Math.floor(t/3600),a=Math.floor(t%3600/60);return e>0?`${e} Std. ${a} Min.`:`${a} Min.`}formatDate(t){return new Date(t*1e3).toLocaleDateString("de-DE",{day:"2-digit",month:"2-digit",year:"numeric"})}isTrackHiRes(t){return t.hires_streamable||t.hires||t.maximum_bit_depth!==void 0&&t.maximum_bit_depth>16}isTrackPlaying(t){return this.playerState.currentTrack()?.id===t.id&&this.playerState.isPlaying()}goBack(){window.history.back()}playAll(){let t=this.playlist()?.tracks?.items;t?.length&&this.playTrack(t[0],0)}shufflePlay(){let t=this.playlist()?.tracks?.items;if(t?.length){let e=[...t].sort(()=>Math.random()-.5);this.playTrack(e[0],0)}}playTrack(t,e){this.playerState.currentTrack.set(t),console.log("Playing track:",t.title,"at index:",e)}openTrackMenu(t){this.contextMenu.openTrackMenu(t.event,t.track,{onPlay:()=>this.playTrack(t.track,0),onAddToQueue:()=>console.log("Add to queue:",t.track.title)})}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=E({type:n,selectors:[["app-playlist-detail"]],inputs:{id:"id"},decls:4,vars:1,consts:[[1,"playlist-detail","bg-bg-primary","min-h-screen","pb-28"],[1,"flex","justify-center","items-center","h-64"],[1,"flex","flex-col","items-center","justify-center","h-64","text-text-muted"],[1,"loading-spinner"],[1,"playlist-header","relative"],[1,"absolute","inset-0","bg-cover","bg-center","opacity-20","blur-2xl",3,"background-image"],[1,"absolute","inset-0","bg-gradient-to-b","from-transparent","via-bg-primary/50","to-bg-primary"],[1,"relative","p-6","pt-4","pl-16"],[1,"back-btn","mb-4","inline-flex","items-center","gap-2","text-text-secondary","hover:text-text-primary","transition-colors",3,"click"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"w-5","h-5"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M15 19l-7-7 7-7"],[1,"flex","gap-6","flex-col","md:flex-row"],[1,"playlist-cover","w-48","h-48","md:w-56","md:h-56","rounded-xl","overflow-hidden","bg-bg-secondary","flex-shrink-0","mx-auto","md:mx-0","shadow-2xl"],[1,"w-full","h-full","object-cover",3,"src","alt"],[1,"w-full","h-full","flex","items-center","justify-center","text-text-muted","bg-gradient-to-br","from-bg-secondary","to-bg-card"],[1,"playlist-meta","flex","flex-col","justify-center","text-center","md:text-left","flex-1","min-w-0"],[1,"text-xs","text-text-muted","uppercase","tracking-wider","mb-2"],[1,"text-2xl","md:text-3xl","font-bold","mb-2","line-clamp-2"],[1,"text-text-secondary"],[1,"flex","items-center","justify-center","md:justify-start","gap-2","mt-3","text-sm","text-text-muted","flex-wrap"],[1,"text-border-subtle"],[1,"text-sm","text-text-muted","mt-3","line-clamp-3"],[1,"flex","items-center","justify-center","md:justify-start","gap-3","mt-5"],[1,"flex","items-center","gap-2","px-6","py-2.5","bg-accent-qobuz","text-white","rounded-full","font-medium","hover:bg-accent-qobuz/90","transition-colors","shadow-lg",3,"click"],["xmlns","http://www.w3.org/2000/svg","fill","currentColor","viewBox","0 0 24 24",1,"w-5","h-5"],["d","M8 5v14l11-7z"],["title","Zuf\xE4llige Wiedergabe",1,"flex","items-center","gap-2","px-4","py-2.5","bg-bg-secondary","border","border-border-subtle","rounded-full","text-sm","hover:border-border-accent","transition-colors",3,"click"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor","stroke-width","2",1,"w-4","h-4"],["stroke-linecap","round","stroke-linejoin","round","d","M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"],[1,"tracks-list","px-4","md:px-6"],[1,"hidden","md:flex","items-center","gap-3","px-3","py-2","text-xs","text-text-muted","border-b","border-border-subtle","mb-2"],[1,"w-8","text-center"],[1,"w-10"],[1,"flex-1"],[1,"w-20","text-right"],[1,"w-8"],[3,"track","trackNumber","showNumber","showArt","showArtist","showAlbum","showQuality","showMenu","isPlaying"],[1,"flex","flex-col","items-center","justify-center","py-16","text-text-muted"],[1,"absolute","inset-0","bg-cover","bg-center","opacity-20","blur-2xl"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"w-16","h-16","opacity-30"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","1","d","M4 6h16M4 10h16M4 14h16M4 18h16"],[3,"play","menu","track","trackNumber","showNumber","showArt","showArtist","showAlbum","showQuality","showMenu","isPlaying"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"w-12","h-12","mb-4","opacity-50"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","1","d","M9 19V6l12-3v13M9 19c0 1.105-1.343 2-3 2s-3-.895-3-2 1.343-2 3-2 3 .895 3 2zm12-3c0 1.105-1.343 2-3 2s-3-.895-3-2 1.343-2 3-2 3 .895 3 2zM9 10l12-3"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","1","d","M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"],["routerLink","/qobuz/browse",1,"mt-4","px-4","py-2","bg-accent-qobuz","text-white","rounded-lg","hover:bg-accent-qobuz/90","transition-colors"]],template:function(e,a){e&1&&(i(0,"div",0),p(1,G,2,0,"div",1)(2,tt,48,9)(3,et,7,0,"div",2),l()),e&2&&(s(),u(a.loading()?1:a.playlist()?2:3))},dependencies:[Q,N,B],styles:[".loading-spinner[_ngcontent-%COMP%]{width:40px;height:40px;border:3px solid var(--color-border-accent);border-top-color:var(--color-accent-qobuz);border-radius:50%;animation:_ngcontent-%COMP%_spin .8s linear infinite}@keyframes _ngcontent-%COMP%_spin{to{transform:rotate(360deg)}}.line-clamp-2[_ngcontent-%COMP%]{display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical;overflow:hidden}.line-clamp-3[_ngcontent-%COMP%]{display:-webkit-box;-webkit-line-clamp:3;-webkit-box-orient:vertical;overflow:hidden}"]})};export{O as PlaylistDetailComponent};
