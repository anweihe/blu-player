import{a as U,b as W,e as J,h as X}from"./chunk-DJDFN4IN.js";import{a as te}from"./chunk-N2MVT66X.js";import{a as ne,b as ie,c as oe,d as re,e as ae}from"./chunk-5WOICLSI.js";import{a as Z}from"./chunk-UMWSTQS6.js";import{e as ee}from"./chunk-TB3BYDLV.js";import"./chunk-F3JCDRW3.js";import{Ab as G,B as I,G as q,H as R,I as Q,Ja as N,Mb as Y,R as E,Sa as d,Ta as _,Ua as V,Va as x,W as u,Wa as g,X as p,Xa as f,Y as S,Ya as i,Z as w,Za as o,_a as b,cb as h,eb as C,f as M,gb as c,ha as T,ib as D,j as A,jb as j,kb as O,mb as B,ob as m,qb as k,sb as K,tb as L,ub as H,x as P,xa as l,xb as F,z as $}from"./chunk-F7VV2WDX.js";var ce=["searchInput"],se=()=>[1,2,3,4],de=()=>[1,2,3],_e=(t,n)=>n.value,y=(t,n)=>n.id;function me(t,n){if(t&1){let e=h();i(0,"button",17),C("click",function(){u(e);let a=c();return p(a.clearSearch())}),S(),i(1,"svg",6),b(2,"path",7),o()()}}function ue(t,n){if(t&1&&(i(0,"span",20),m(1),o()),t&2){let e=c().$implicit,r=c(2);l(),k("(",r.getTabCount(e.value),")")}}function pe(t,n){if(t&1){let e=h();i(0,"button",19),C("click",function(){let a=u(e).$implicit,s=c(2);return p(s.currentTab.set(a.value))}),m(1),d(2,ue,2,1,"span",20),o()}if(t&2){let e=n.$implicit,r=c(2);B("bg-accent-qobuz",r.currentTab()===e.value)("text-white",r.currentTab()===e.value)("border-accent-qobuz",r.currentTab()===e.value)("bg-transparent",r.currentTab()!==e.value)("text-text-secondary",r.currentTab()!==e.value)("border-border-subtle",r.currentTab()!==e.value)("hover:border-border-accent",r.currentTab()!==e.value),l(),k(" ",e.label," "),l(),_(r.getTabCount(e.value)>0?2:-1)}}function Ce(t,n){if(t&1&&(i(0,"div",13),x(1,pe,3,16,"button",18,_e),o()),t&2){let e=c();l(),g(e.tabs)}}function he(t,n){if(t&1){let e=h();i(0,"button",32),C("click",function(){let a=u(e).$implicit,s=c(3);return p(s.searchFor(a))}),S(),i(1,"svg",33),b(2,"path",34),o(),m(3),o()}if(t&2){let e=n.$implicit;l(3),k(" ",e," ")}}function be(t,n){if(t&1){let e=h();i(0,"section",21)(1,"div",27)(2,"h2",28),m(3,"Letzte Suchen"),o(),i(4,"button",29),C("click",function(){u(e);let a=c(2);return p(a.clearRecentSearches())}),m(5," L\xF6schen "),o()(),i(6,"div",30),x(7,he,4,1,"button",31,V),o()()}if(t&2){let e=c(2);l(7),g(e.recentSearches())}}function xe(t,n){if(t&1&&(d(0,be,9,0,"section",21),i(1,"div",22),S(),i(2,"svg",23),b(3,"path",24),o(),w(),i(4,"p",25),m(5,"Suche nach Musik"),o(),i(6,"p",26),m(7,"Finde K\xFCnstler, Alben, Titel und Playlists"),o()()),t&2){let e=c();_(e.recentSearches().length>0?0:-1)}}function ge(t,n){t&1&&(i(0,"div",37),b(1,"div",41),i(2,"div",42),b(3,"div",43)(4,"div",44),o()())}function fe(t,n){t&1&&(i(0,"div",40),b(1,"div",45),i(2,"div",46),b(3,"div",47)(4,"div",48),o()())}function ye(t,n){t&1&&(i(0,"div",15)(1,"section"),b(2,"div",35),i(3,"div",36),x(4,ge,5,0,"div",37,V),o()(),i(6,"section"),b(7,"div",38),i(8,"div",39),x(9,fe,5,0,"div",40,V),o()()()),t&2&&(l(4),g(F(0,se)),l(5),g(F(1,de)))}function ve(t,n){if(t&1&&(i(0,"div",16),S(),i(1,"svg",49),b(2,"path",50),o(),w(),i(3,"p",25),m(4,"Keine Ergebnisse"),o(),i(5,"p",26),m(6),o()()),t&2){let e=c();l(6),k('Keine Ergebnisse f\xFCr "',e.query,'"')}}function Se(t,n){if(t&1){let e=h();i(0,"button",53),C("click",function(){u(e);let a=c(4);return p(a.currentTab.set("albums"))}),m(1," Alle anzeigen "),o()}}function we(t,n){if(t&1){let e=h();i(0,"app-album-card",54),C("play",function(){let a=u(e).$implicit,s=c(4);return p(s.playAlbum(a))}),o()}if(t&2){let e=n.$implicit;f("album",e)}}function Te(t,n){if(t&1&&(i(0,"section",21)(1,"div",27)(2,"h2",28),m(3,"Alben"),o(),d(4,Se,2,0,"button",51),o(),i(5,"div",36),x(6,we,1,1,"app-album-card",52,y),o()()),t&2){let e=c(3);l(4),_(e.results().albums.length>4?4:-1),l(2),g(e.results().albums.slice(0,4))}}function ke(t,n){if(t&1){let e=h();i(0,"button",53),C("click",function(){u(e);let a=c(4);return p(a.currentTab.set("artists"))}),m(1," Alle anzeigen "),o()}}function Ee(t,n){if(t&1&&b(0,"app-artist-card",55),t&2){let e=n.$implicit;f("artist",e)}}function Ve(t,n){if(t&1&&(i(0,"section",21)(1,"div",27)(2,"h2",28),m(3,"K\xFCnstler"),o(),d(4,ke,2,0,"button",51),o(),i(5,"div",36),x(6,Ee,1,1,"app-artist-card",55,y),o()()),t&2){let e=c(3);l(4),_(e.results().artists.length>4?4:-1),l(2),g(e.results().artists.slice(0,4))}}function Me(t,n){if(t&1){let e=h();i(0,"button",53),C("click",function(){u(e);let a=c(4);return p(a.currentTab.set("tracks"))}),m(1," Alle anzeigen "),o()}}function Ae(t,n){if(t&1){let e=h();i(0,"app-track-item",58),C("play",function(){let a=u(e).$implicit,s=c(4);return p(s.playTrack(a))})("menu",function(a){u(e);let s=c(4);return p(s.openTrackMenu(a))}),o()}if(t&2){let e=n.$implicit,r=n.$index,a=c(4);f("track",e)("trackNumber",r+1)("showNumber",!1)("showArt",!0)("showArtist",!0)("showAlbum",!0)("showQuality",a.isTrackHiRes(e))("showMenu",!0)("isPlaying",a.isTrackPlaying(e))}}function Fe(t,n){if(t&1&&(i(0,"section",21)(1,"div",27)(2,"h2",28),m(3,"Titel"),o(),d(4,Me,2,0,"button",51),o(),i(5,"div",56),x(6,Ae,1,9,"app-track-item",57,y),o()()),t&2){let e=c(3);l(4),_(e.results().tracks.length>5?4:-1),l(2),g(e.results().tracks.slice(0,5))}}function ze(t,n){if(t&1){let e=h();i(0,"button",53),C("click",function(){u(e);let a=c(4);return p(a.currentTab.set("playlists"))}),m(1," Alle anzeigen "),o()}}function Pe(t,n){if(t&1){let e=h();i(0,"app-playlist-card",60),C("play",function(){let a=u(e).$implicit,s=c(4);return p(s.playPlaylist(a))}),o()}if(t&2){let e=n.$implicit;f("playlist",e)}}function $e(t,n){if(t&1&&(i(0,"section",21)(1,"div",27)(2,"h2",28),m(3,"Playlists"),o(),d(4,ze,2,0,"button",51),o(),i(5,"div",36),x(6,Pe,1,1,"app-playlist-card",59,y),o()()),t&2){let e=c(3);l(4),_(e.results().playlists.length>4?4:-1),l(2),g(e.results().playlists.slice(0,4))}}function Ie(t,n){if(t&1&&(d(0,Te,8,1,"section",21),d(1,Ve,8,1,"section",21),d(2,Fe,8,1,"section",21),d(3,$e,8,1,"section",21)),t&2){let e=c(2);_(e.results().albums.length>0?0:-1),l(),_(e.results().artists.length>0?1:-1),l(),_(e.results().tracks.length>0?2:-1),l(),_(e.results().playlists.length>0?3:-1)}}function qe(t,n){if(t&1){let e=h();i(0,"app-album-card",64),C("play",function(){let a=u(e).$implicit,s=c(3);return p(s.playAlbum(a))}),o()}if(t&2){let e=n.$implicit;f("album",e)("showYear",!0)}}function Re(t,n){t&1&&(i(0,"div",63),m(1,"Keine Alben gefunden"),o())}function Qe(t,n){if(t&1&&(i(0,"div",61),x(1,qe,1,2,"app-album-card",62,y),o(),d(3,Re,2,0,"div",63)),t&2){let e=c(2);l(),g(e.results().albums),l(2),_(e.results().albums.length===0?3:-1)}}function Ne(t,n){if(t&1&&b(0,"app-artist-card",55),t&2){let e=n.$implicit;f("artist",e)}}function De(t,n){t&1&&(i(0,"div",63),m(1,"Keine K\xFCnstler gefunden"),o())}function je(t,n){if(t&1&&(i(0,"div",61),x(1,Ne,1,1,"app-artist-card",55,y),o(),d(3,De,2,0,"div",63)),t&2){let e=c(2);l(),g(e.results().artists),l(2),_(e.results().artists.length===0?3:-1)}}function Oe(t,n){if(t&1){let e=h();i(0,"app-track-item",58),C("play",function(){let a=u(e).$implicit,s=c(3);return p(s.playTrack(a))})("menu",function(a){u(e);let s=c(3);return p(s.openTrackMenu(a))}),o()}if(t&2){let e=n.$implicit,r=n.$index,a=c(3);f("track",e)("trackNumber",r+1)("showNumber",!0)("showArt",!0)("showArtist",!0)("showAlbum",!0)("showQuality",a.isTrackHiRes(e))("showMenu",!0)("isPlaying",a.isTrackPlaying(e))}}function Be(t,n){t&1&&(i(0,"div",63),m(1,"Keine Titel gefunden"),o())}function Ke(t,n){if(t&1&&(i(0,"div",56),x(1,Oe,1,9,"app-track-item",57,y),o(),d(3,Be,2,0,"div",63)),t&2){let e=c(2);l(),g(e.results().tracks),l(2),_(e.results().tracks.length===0?3:-1)}}function Le(t,n){if(t&1){let e=h();i(0,"app-playlist-card",66),C("play",function(){let a=u(e).$implicit,s=c(3);return p(s.playPlaylist(a))}),o()}if(t&2){let e=n.$implicit;f("playlist",e)("showOwner",!0)}}function He(t,n){t&1&&(i(0,"div",63),m(1,"Keine Playlists gefunden"),o())}function Ge(t,n){if(t&1&&(i(0,"div",61),x(1,Le,1,2,"app-playlist-card",65,y),o(),d(3,He,2,0,"div",63)),t&2){let e=c(2);l(),g(e.results().playlists),l(2),_(e.results().playlists.length===0?3:-1)}}function Ye(t,n){if(t&1&&(d(0,Ie,4,4),d(1,Qe,4,1),d(2,je,4,1),d(3,Ke,4,1),d(4,Ge,4,1)),t&2){let e=c();_(e.currentTab()==="all"?0:-1),l(),_(e.currentTab()==="albums"?1:-1),l(),_(e.currentTab()==="artists"?2:-1),l(),_(e.currentTab()==="tracks"?3:-1),l(),_(e.currentTab()==="playlists"?4:-1)}}var Ue=[{value:"all",label:"Alle"},{value:"albums",label:"Alben"},{value:"artists",label:"K\xFCnstler"},{value:"tracks",label:"Titel"},{value:"playlists",label:"Playlists"}],z="qobuz_recent_searches",We=8,le=class t{searchInputEl;qobuzApi=E(Z);playerState=E(te);contextMenu=E(ne);searchSubject=new M;destroy$=new M;query="";loading=T(!1);results=T(null);currentTab=T("all");recentSearches=T([]);tabs=Ue;hasResults=G(()=>{let n=this.results();return n?n.albums.length>0||n.artists.length>0||n.tracks.length>0||n.playlists.length>0:!1});ngOnInit(){this.loadRecentSearches(),this.searchSubject.pipe(R(this.destroy$),$(300),I(),Q(n=>{n.trim()&&(this.loading.set(!0),this.addToRecentSearches(n))}),q(n=>n.trim()?this.qobuzApi.search(n,20).pipe(P(()=>A({albums:[],artists:[],tracks:[],playlists:[]}))):A(null))).subscribe(n=>{this.results.set(n),this.loading.set(!1),n&&this.currentTab.set("all")})}ngAfterViewInit(){setTimeout(()=>{this.searchInputEl?.nativeElement.focus()},100)}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}onSearch(n){n.trim()?this.searchSubject.next(n):(this.results.set(null),this.loading.set(!1))}searchFor(n){this.query=n,this.searchSubject.next(n)}clearSearch(){this.query="",this.results.set(null),this.loading.set(!1),this.searchInputEl?.nativeElement.focus()}goBack(){window.history.back()}getTabCount(n){let e=this.results();if(!e)return 0;switch(n){case"all":return 0;case"albums":return e.albums.length;case"artists":return e.artists.length;case"tracks":return e.tracks.length;case"playlists":return e.playlists.length}}loadRecentSearches(){try{let n=localStorage.getItem(z);n&&this.recentSearches.set(JSON.parse(n))}catch{}}addToRecentSearches(n){let e=n.trim();if(!e)return;let a=this.recentSearches().filter(v=>v.toLowerCase()!==e.toLowerCase()),s=[e,...a].slice(0,We);this.recentSearches.set(s);try{localStorage.setItem(z,JSON.stringify(s))}catch{}}clearRecentSearches(){this.recentSearches.set([]);try{localStorage.removeItem(z)}catch{}}isTrackHiRes(n){return n.hires_streamable||n.hires||n.maximum_bit_depth!==void 0&&n.maximum_bit_depth>16}isTrackPlaying(n){return this.playerState.currentTrack()?.id===n.id&&this.playerState.isPlaying()}playTrack(n){this.playerState.currentTrack.set(n),console.log("Playing track:",n.title)}playAlbum(n){console.log("Playing album:",n.title)}playPlaylist(n){console.log("Playing playlist:",n.name)}openTrackMenu(n){this.contextMenu.openTrackMenu(n.event,n.track,{onPlay:()=>this.playTrack(n.track),onAddToQueue:()=>console.log("Add to queue:",n.track.title)})}formatDuration=ee;static \u0275fac=function(e){return new(e||t)};static \u0275cmp=N({type:t,selectors:[["app-search"]],viewQuery:function(e,r){if(e&1&&D(ce,5),e&2){let a;j(a=O())&&(r.searchInputEl=a.first)}},decls:19,vars:7,consts:[["searchInput",""],[1,"search-page","bg-bg-primary","min-h-screen","pb-28"],[1,"sticky","top-0","z-10","bg-bg-primary/95","backdrop-blur-sm","border-b","border-border-subtle"],[1,"p-4","pl-16"],[1,"flex","items-center","gap-3","mb-4"],["title","Suche schlie\xDFen",1,"flex-shrink-0","w-8","h-8","rounded-full","bg-bg-card","border","border-border-subtle","flex","items-center","justify-center","text-text-secondary","hover:text-text-primary","hover:bg-bg-card-hover","transition-colors",3,"click"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"w-5","h-5"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M6 18L18 6M6 6l12 12"],[1,"flex-1","relative"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"absolute","left-3","top-1/2","-translate-y-1/2","w-5","h-5","text-text-muted","pointer-events-none"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"],["type","text","placeholder","K\xFCnstler, Alben, Titel...",1,"w-full","py-2.5","pl-10","pr-10","bg-bg-card","border","border-border-subtle","rounded-lg","text-text-primary","placeholder:text-text-muted","focus:outline-none","focus:border-accent-qobuz","transition-colors",3,"ngModelChange","keydown.escape","ngModel"],[1,"absolute","right-3","top-1/2","-translate-y-1/2","text-text-muted","hover:text-text-primary","transition-colors"],[1,"flex","gap-2","overflow-x-auto","scrollbar-hide","-mx-4","px-4"],[1,"p-4"],[1,"space-y-6"],[1,"text-center","py-16","text-text-muted"],[1,"absolute","right-3","top-1/2","-translate-y-1/2","text-text-muted","hover:text-text-primary","transition-colors",3,"click"],[1,"flex-shrink-0","px-4","py-2","text-sm","rounded-full","border","transition-colors","whitespace-nowrap",3,"bg-accent-qobuz","text-white","border-accent-qobuz","bg-transparent","text-text-secondary","border-border-subtle","hover:border-border-accent"],[1,"flex-shrink-0","px-4","py-2","text-sm","rounded-full","border","transition-colors","whitespace-nowrap",3,"click"],[1,"ml-1","opacity-70"],[1,"mb-8"],[1,"text-center","py-12","text-text-muted"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"w-16","h-16","mx-auto","mb-4","opacity-30"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","1","d","M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"],[1,"text-lg","mb-2"],[1,"text-sm"],[1,"flex","items-center","justify-between","mb-4"],[1,"text-lg","font-semibold"],[1,"text-sm","text-text-muted","hover:text-accent-qobuz","transition-colors",3,"click"],[1,"flex","flex-wrap","gap-2"],[1,"px-4","py-2","bg-bg-card","border","border-border-subtle","rounded-full","text-sm","hover:border-accent-qobuz","transition-colors","flex","items-center","gap-2"],[1,"px-4","py-2","bg-bg-card","border","border-border-subtle","rounded-full","text-sm","hover:border-accent-qobuz","transition-colors","flex","items-center","gap-2",3,"click"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"w-4","h-4","text-text-muted"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"],[1,"h-6","w-20","bg-bg-secondary","rounded","animate-pulse","mb-4"],[1,"grid","grid-cols-2","md:grid-cols-4","gap-4"],[1,"bg-bg-card","rounded-lg","overflow-hidden"],[1,"h-6","w-16","bg-bg-secondary","rounded","animate-pulse","mb-4"],[1,"space-y-2"],[1,"flex","items-center","gap-3","p-3"],[1,"aspect-square","bg-bg-secondary","animate-pulse"],[1,"p-3"],[1,"h-4","bg-bg-secondary","rounded","animate-pulse","mb-2"],[1,"h-3","bg-bg-secondary","rounded","animate-pulse","w-2/3"],[1,"w-10","h-10","bg-bg-secondary","rounded","animate-pulse"],[1,"flex-1"],[1,"h-4","bg-bg-secondary","rounded","animate-pulse","mb-2","w-3/4"],[1,"h-3","bg-bg-secondary","rounded","animate-pulse","w-1/2"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"w-12","h-12","mx-auto","mb-4","opacity-50"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","1","d","M9.172 16.172a4 4 0 015.656 0M9 10h.01M15 10h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"],[1,"text-sm","text-accent-qobuz","hover:underline"],[3,"album"],[1,"text-sm","text-accent-qobuz","hover:underline",3,"click"],[3,"play","album"],[3,"artist"],[1,"space-y-1"],[3,"track","trackNumber","showNumber","showArt","showArtist","showAlbum","showQuality","showMenu","isPlaying"],[3,"play","menu","track","trackNumber","showNumber","showArt","showArtist","showAlbum","showQuality","showMenu","isPlaying"],[3,"playlist"],[3,"play","playlist"],[1,"grid","grid-cols-2","md:grid-cols-4","lg:grid-cols-5","gap-4"],[3,"album","showYear"],[1,"text-center","py-8","text-text-muted"],[3,"play","album","showYear"],[3,"playlist","showOwner"],[3,"play","playlist","showOwner"]],template:function(e,r){if(e&1){let a=h();i(0,"div",1)(1,"div",2)(2,"div",3)(3,"div",4)(4,"button",5),C("click",function(){return u(a),p(r.goBack())}),S(),i(5,"svg",6),b(6,"path",7),o()(),w(),i(7,"div",8),S(),i(8,"svg",9),b(9,"path",10),o(),w(),i(10,"input",11,0),H("ngModelChange",function(v){return u(a),L(r.query,v)||(r.query=v),p(v)}),C("ngModelChange",function(v){return u(a),p(r.onSearch(v))})("keydown.escape",function(){return u(a),p(r.clearSearch())}),o(),d(12,me,3,0,"button",12),o()(),d(13,Ce,3,0,"div",13),o()(),i(14,"div",14),d(15,xe,8,1),d(16,ye,11,2,"div",15),d(17,ve,7,1,"div",16),d(18,Ye,5,5),o()()}e&2&&(l(10),K("ngModel",r.query),l(2),_(r.query?12:-1),l(),_(r.hasResults()?13:-1),l(2),_(!r.query&&!r.loading()?15:-1),l(),_(r.loading()?16:-1),l(),_(r.query&&!r.loading()&&!r.hasResults()?17:-1),l(),_(!r.loading()&&r.hasResults()?18:-1))},dependencies:[Y,X,U,W,J,ie,re,oe,ae],styles:[".scrollbar-hide[_ngcontent-%COMP%]{-ms-overflow-style:none;scrollbar-width:none}.scrollbar-hide[_ngcontent-%COMP%]::-webkit-scrollbar{display:none}"]})};export{le as SearchComponent};
