import{b as G}from"./chunk-OCLKLVYL.js";import{a as $}from"./chunk-VWKT4AXU.js";import{a as R,d as Y}from"./chunk-OI2BH5VR.js";import"./chunk-E6U5HHN4.js";import{e as Q,f as B,g as F}from"./chunk-IFTFUA44.js";import{f as O}from"./chunk-Y2DN57ZN.js";import{Bb as m,Cb as A,Db as x,Fa as z,Ga as V,Ja as r,Lb as N,Nb as T,S as k,Va as L,X as f,Y as g,Z as _,_ as y,_b as H,db as s,eb as d,gb as P,hb as j,ia as h,ib as w,jb as l,kb as o,lb as p,pb as I,rb as v,tb as c,yb as q}from"./chunk-AT7XICDW.js";var W=n=>["/qobuz/artist",n],Z=(n,t)=>t.id;function J(n,t){n&1&&(l(0,"div",1),p(1,"div",3),o())}function K(n,t){if(n&1&&p(0,"div",46),n&2){let e,i=c(2);q("background-image","url("+((e=i.album())==null||e.image==null?null:e.image.large)+")")}}function X(n,t){if(n&1&&p(0,"img",13),n&2){let e,i,a=c(2);w("src",(e=a.album())==null||e.image==null?null:e.image.large,V)("alt",(i=a.album())==null?null:i.title)}}function ee(n,t){n&1&&(l(0,"div",14),_(),l(1,"svg",47),p(2,"path",48),o()())}function te(n,t){n&1&&(l(0,"span",18),m(1," Hi-Res "),o())}function ne(n,t){if(n&1&&(l(0,"span",19),m(1),o()),n&2){let e=c(2);r(),x(" ",e.qualityLabel()," ")}}function ie(n,t){if(n&1&&(l(0,"a",21),m(1),o()),n&2){let e,i,a=c(2);w("routerLink",N(2,W,(e=a.album())==null||e.artist==null?null:e.artist.id)),r(),x(" ",(i=a.album())==null||i.artist==null?null:i.artist.name," ")}}function le(n,t){if(n&1&&(l(0,"span"),m(1),o(),l(2,"span",23),m(3,"\u2022"),o()),n&2){let e=c(2);r(),A(e.releaseYear())}}function oe(n,t){if(n&1&&(l(0,"span"),m(1),o()),n&2){let e,i=c(3);r(),A((e=i.album())==null||e.label==null?null:e.label.name)}}function ae(n,t){n&1&&(l(0,"span",23),m(1,"\u2022"),o())}function re(n,t){if(n&1&&(l(0,"span"),m(1),o()),n&2){let e,i=c(3);r(),A((e=i.album())==null||e.genre==null?null:e.genre.name)}}function me(n,t){if(n&1&&(l(0,"div",24),s(1,oe,2,1,"span"),s(2,ae,2,0,"span",23),s(3,re,2,1,"span"),o()),n&2){let e,i,a,b=c(2);r(),d(!((e=b.album())==null||e.label==null)&&e.label.name?1:-1),r(),d(!((i=b.album())==null||i.label==null)&&i.label.name&&(!((i=b.album())==null||i.genre==null)&&i.genre.name)?2:-1),r(),d(!((a=b.album())==null||a.genre==null)&&a.genre.name?3:-1)}}function ce(n,t){n&1&&(_(),l(0,"svg",30),p(1,"circle",49)(2,"path",50),o())}function ue(n,t){n&1&&(_(),l(0,"svg",31),p(1,"path",51),o())}function se(n,t){n&1&&(l(0,"div",58),p(1,"div",3),o())}function de(n,t){if(n&1&&(l(0,"div",59),m(1),o()),n&2){let e=c(3);r(),x(" ",e.albumInfoError()," ")}}function be(n,t){if(n&1&&(l(0,"div",60),m(1),o()),n&2){let e=c(4);r(),x(" ",e.albumInfo().style," ")}}function pe(n,t){if(n&1&&(l(0,"div",61),m(1),o()),n&2){let e=c(4);r(),x(" ",e.albumInfo().summary," ")}}function _e(n,t){if(n&1&&(s(0,be,2,1,"div",60),s(1,pe,2,1,"div",61)),n&2){let e=c(3);d(e.albumInfo().style?0:-1),r(),d(e.albumInfo().summary?1:-1)}}function xe(n,t){if(n&1){let e=I();l(0,"div",37)(1,"div",52)(2,"h3",53),m(3,"Album-Info"),o(),l(4,"button",54),v("click",function(){f(e);let a=c(2);return g(a.closeAlbumInfo())}),_(),l(5,"svg",55),p(6,"path",56),o()()(),y(),l(7,"div",57),s(8,se,2,0,"div",58)(9,de,2,1,"div",59)(10,_e,2,2),o()()}if(n&2){let e=c(2);r(8),d(e.loadingAlbumInfo()?8:e.albumInfoError()?9:e.albumInfo()?10:-1)}}function fe(n,t){if(n&1){let e=I();l(0,"app-track-item",62),v("play",function(){let a=f(e),b=a.$implicit,M=a.$index,S=c(2);return g(S.playTrack(b,M))})("menu",function(a){f(e);let b=c(2);return g(b.openTrackMenu(a))}),o()}if(n&2){let e,i=t.$implicit,a=t.$index,b=c(2);w("track",i)("trackNumber",a+1)("showNumber",!0)("showArt",!1)("showArtist",(i.performer==null?null:i.performer.name)!==((e=b.album())==null||e.artist==null?null:e.artist.name))("showAlbum",!1)("showQuality",b.isTrackHiRes(i))("showMenu",!0)("isPlaying",b.isTrackPlaying(i))}}function ge(n,t){if(n&1&&(l(0,"div",45)(1,"h3",63),m(2,"\xDCber das Album"),o(),p(3,"div",64),o()),n&2){let e,i=c(2);r(3),w("innerHTML",(e=i.album())==null?null:e.description,z)}}function he(n,t){if(n&1){let e=I();l(0,"div",4),s(1,K,1,2,"div",5),p(2,"div",6),l(3,"div",7)(4,"button",8),v("click",function(){f(e);let a=c();return g(a.goBack())}),_(),l(5,"svg",9),p(6,"path",10),o(),m(7," Zur\xFCck "),o(),y(),l(8,"div",11)(9,"div",12),s(10,X,1,2,"img",13)(11,ee,3,0,"div",14),o(),l(12,"div",15)(13,"div",16)(14,"span",17),m(15),o(),s(16,te,2,0,"span",18),s(17,ne,2,1,"span",19),o(),l(18,"h1",20),m(19),o(),s(20,ie,2,4,"a",21),l(21,"div",22),s(22,le,4,1),l(23,"span"),m(24),o(),l(25,"span",23),m(26,"\u2022"),o(),l(27,"span"),m(28),o()(),s(29,me,4,3,"div",24),l(30,"div",25)(31,"button",26),v("click",function(){f(e);let a=c();return g(a.playAll())}),_(),l(32,"svg",27),p(33,"path",28),o()(),y(),l(34,"button",29),v("click",function(){f(e);let a=c();return g(a.fetchAlbumInfo())}),s(35,ce,3,0,":svg:svg",30)(36,ue,2,0,":svg:svg",31),o(),l(37,"button",32),v("click",function(a){f(e);let b=c();return g(b.openArtistMenu(a))}),_(),l(38,"svg",33),p(39,"circle",34)(40,"circle",35)(41,"circle",36),o()()()()()()(),s(42,xe,11,1,"div",37),y(),l(43,"div",38)(44,"div",39)(45,"span",40),m(46,"#"),o(),l(47,"span",41),m(48,"Titel"),o(),l(49,"span",42),m(50,"Dauer"),o(),p(51,"span",43),o(),P(52,fe,1,9,"app-track-item",44,Z),o(),s(54,ge,4,1,"div",45)}if(n&2){let e,i,a,b,M,S,C,D,E,u=c();r(),d(!((e=u.album())==null||e.image==null)&&e.image.large?1:-1),r(9),d(!((i=u.album())==null||i.image==null)&&i.image.large?10:11),r(5),x(" ",u.getAlbumTypeLabel(u.album())," "),r(),d(u.isHiRes()?16:-1),r(),d(u.qualityLabel()?17:-1),r(2),x(" ",(a=u.album())==null?null:a.title," "),r(),d((b=u.album())!=null&&b.artist?20:-1),r(2),d(u.releaseYear()?22:-1),r(2),x("",(M=u.album())==null?null:M.tracks_count," Tracks"),r(4),A(u.formatAlbumDuration(((S=u.album())==null?null:S.duration)??0)),r(),d(!((C=u.album())==null||C.label==null)&&C.label.name||!((C=u.album())==null||C.genre==null)&&C.genre.name?29:-1),r(5),w("disabled",u.loadingAlbumInfo()),r(),d(u.loadingAlbumInfo()?35:36),r(7),d(u.showAlbumInfo()?42:-1),r(10),j((D=u.album())==null||D.tracks==null?null:D.tracks.items),r(2),d((E=u.album())!=null&&E.description?54:-1)}}function ve(n,t){n&1&&(l(0,"div",2),_(),l(1,"svg",65),p(2,"path",66),o(),y(),l(3,"p"),m(4,"Album konnte nicht geladen werden"),o(),l(5,"button",67),m(6," Zur\xFCck zum Browser "),o()())}var U=class n{id;qobuzApi=k(F);playerState=k($);playbackService=k(G);contextMenu=k(R);loading=h(!0);album=h(null);albumInfo=h(null);showAlbumInfo=h(!1);loadingAlbumInfo=h(!1);albumInfoError=h(null);isHiRes=T(()=>{let t=this.album();return t?.hires_streamable||t?.hires||t?.maximum_bit_depth&&t.maximum_bit_depth>16});qualityLabel=T(()=>{let t=this.album();return!t?.maximum_bit_depth||!t?.maximum_sampling_rate?null:t.maximum_bit_depth>16?`${t.maximum_bit_depth}-Bit / ${t.maximum_sampling_rate}kHz`:null});releaseYear=T(()=>{let t=this.album();return t?.released_at?new Date(t.released_at*1e3).getFullYear():null});hasAlbumInfo=T(()=>{let t=this.album();return t?.title&&t?.artist?.name});formatDuration=Q;getAlbumTypeLabel=B;ngOnInit(){this.id&&this.loadAlbum()}loadAlbum(){this.qobuzApi.getAlbum(this.id).subscribe({next:t=>{this.album.set(t),this.loading.set(!1)},error:()=>this.loading.set(!1)})}formatAlbumDuration(t){let e=Math.floor(t/3600),i=Math.floor(t%3600/60);return e>0?`${e} Std. ${i} Min.`:`${i} Min.`}isTrackHiRes(t){return t.hires_streamable||t.hires||t.maximum_bit_depth!==void 0&&t.maximum_bit_depth>16}isTrackPlaying(t){let e=this.playerState.currentPlayingTrackId(),i=this.playerState.currentTrack();return(e===t.id||i?.id===t.id)&&this.playerState.isPlaying()}goBack(){window.history.back()}playAll(){let t=this.album(),e=t?.tracks?.items;t&&e?.length&&this.playbackService.playAlbum(t,e,0)}shufflePlay(){let t=this.album(),e=t?.tracks?.items;if(t&&e?.length){let i=[...e].sort(()=>Math.random()-.5);this.playbackService.playTrack(i[0],{type:"album",id:t.id??"",tracks:i,startIndex:0})}}playTrack(t,e){let i=this.album(),a=i?.tracks?.items;i&&a?.length&&this.playbackService.playAlbum(i,a,e)}openTrackMenu(t){this.contextMenu.openTrackMenu(t.event,t.track,{onPlay:()=>this.playTrack(t.track,0),onAddToQueue:()=>console.log("Add to queue:",t.track.title)})}toggleAlbumInfo(){this.albumInfo()?this.showAlbumInfo.update(t=>!t):this.fetchAlbumInfo()}fetchAlbumInfo(){if(this.showAlbumInfo()){this.showAlbumInfo.set(!1);return}if(this.showAlbumInfo.set(!0),this.albumInfoError.set(null),this.albumInfo())return;let t=this.album();if(!t?.id||!t?.title||!t?.artist?.name){this.albumInfoError.set("Album-Informationen nicht verf\xFCgbar");return}this.loadingAlbumInfo.set(!0),this.qobuzApi.getAlbumInfo(t.id,t.title,t.artist.name).subscribe({next:e=>{this.albumInfo.set(e),this.loadingAlbumInfo.set(!1)},error:e=>{this.albumInfoError.set(e.message||"Fehler beim Laden der Album-Info"),this.loadingAlbumInfo.set(!1)}})}closeAlbumInfo(){this.showAlbumInfo.set(!1)}openArtistMenu(t){let e=this.album();e&&this.contextMenu.openAlbumMenu(t,e)}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=L({type:n,selectors:[["app-album-detail"]],inputs:{id:"id"},decls:4,vars:1,consts:[[1,"album-detail","bg-bg-primary","min-h-screen","pb-28"],[1,"flex","justify-center","items-center","h-64"],[1,"flex","flex-col","items-center","justify-center","h-64","text-text-muted"],[1,"loading-spinner"],[1,"album-header","relative"],[1,"absolute","inset-0","bg-cover","bg-center","opacity-20","blur-2xl",3,"background-image"],[1,"absolute","inset-0","bg-gradient-to-b","from-transparent","via-bg-primary/50","to-bg-primary"],[1,"relative","p-4","sm:p-6","pt-4","px-4","pl-16"],[1,"back-btn","mb-4","inline-flex","items-center","gap-2","text-text-secondary","hover:text-text-primary","transition-colors",3,"click"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"w-5","h-5"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M15 19l-7-7 7-7"],[1,"flex","gap-4","sm:gap-6","flex-col","md:flex-row"],[1,"album-cover","w-36","h-36","sm:w-48","sm:h-48","md:w-56","md:h-56","rounded-xl","overflow-hidden","bg-bg-secondary","flex-shrink-0","mx-auto","md:mx-0","shadow-2xl"],[1,"w-full","h-full","object-cover",3,"src","alt"],[1,"w-full","h-full","flex","items-center","justify-center","text-text-muted"],[1,"album-meta","flex","flex-col","justify-center","text-center","md:text-left","flex-1","min-w-0"],[1,"flex","items-center","justify-center","md:justify-start","gap-2","mb-2","flex-wrap"],[1,"text-xs","text-text-muted","uppercase","tracking-wider"],[1,"px-2","py-0.5","bg-accent-qobuz","text-white","text-[10px]","font-bold","rounded"],[1,"text-[10px]","text-accent-qobuz"],[1,"text-xl","sm:text-2xl","md:text-3xl","font-bold","mb-2","line-clamp-2"],[1,"text-lg","text-text-secondary","hover:text-accent-qobuz","transition-colors",3,"routerLink"],[1,"flex","items-center","justify-center","md:justify-start","gap-2","mt-3","text-sm","text-text-muted","flex-wrap"],[1,"text-border-subtle"],[1,"flex","items-center","justify-center","md:justify-start","gap-2","mt-2","text-xs","text-text-muted","flex-wrap"],[1,"flex","items-center","justify-center","md:justify-start","gap-3","mt-5"],["title","Alle abspielen",1,"w-12","h-12","flex","items-center","justify-center","bg-accent-qobuz","text-white","rounded-full","hover:bg-[#1ed760]","hover:scale-110","transition-all","shadow-lg",3,"click"],["xmlns","http://www.w3.org/2000/svg","fill","currentColor","viewBox","0 0 24 24",1,"w-6","h-6"],["d","M8 5v14l11-7z"],["title","Album-Info",1,"w-12","h-12","flex","items-center","justify-center","bg-bg-card","border","border-border-accent","rounded-full","text-text-primary","hover:bg-bg-card-hover","hover:border-accent-blue","hover:scale-110","transition-all",3,"click","disabled"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24",1,"w-5","h-5","animate-spin"],["viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2",1,"w-6","h-6"],["title","Mehr Optionen",1,"w-12","h-12","flex","items-center","justify-center","bg-bg-card","border","border-border-accent","rounded-full","text-text-primary","hover:bg-bg-card-hover","hover:border-accent-qobuz","hover:scale-110","transition-all",3,"click"],["viewBox","0 0 24 24","fill","currentColor",1,"w-6","h-6"],["cx","12","cy","5","r","2"],["cx","12","cy","12","r","2"],["cx","12","cy","19","r","2"],[1,"album-info-container","mx-4","md:mx-6","mt-5","mb-6","p-5","bg-bg-card","border","border-border-subtle","rounded-xl"],[1,"tracks-list","px-4","md:px-6"],[1,"hidden","md:flex","items-center","gap-3","px-3","py-2","text-xs","text-text-muted","border-b","border-border-subtle","mb-2"],[1,"w-8","text-center"],[1,"flex-1"],[1,"w-20","text-right"],[1,"w-8"],[3,"track","trackNumber","showNumber","showArt","showArtist","showAlbum","showQuality","showMenu","isPlaying"],[1,"album-description","mx-6","mt-6","p-4","bg-bg-card","border","border-border-subtle","rounded-lg"],[1,"absolute","inset-0","bg-cover","bg-center","opacity-20","blur-2xl"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"w-16","h-16","opacity-30"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","1","d","M9 19V6l12-3v13M9 19c0 1.105-1.343 2-3 2s-3-.895-3-2 1.343-2 3-2 3 .895 3 2zm12-3c0 1.105-1.343 2-3 2s-3-.895-3-2 1.343-2 3-2 3 .895 3 2zM9 10l12-3"],["cx","12","cy","12","r","10","stroke","currentColor","stroke-width","4",1,"opacity-25"],["fill","currentColor","d","M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z",1,"opacity-75"],["d","M15 4V2M15 16v-2M8 9h2M20 9h2M17.8 11.8L19 13M17.8 6.2L19 5M3 21l9-9M12.2 6.2L11 5"],[1,"flex","items-center","justify-between","mb-4"],[1,"text-base","font-semibold"],[1,"w-8","h-8","flex","items-center","justify-center","rounded-md","text-text-muted","hover:text-text-primary","hover:bg-bg-card-hover","transition-colors",3,"click"],["viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2",1,"w-5","h-5"],["d","M18 6L6 18M6 6l12 12"],[1,"album-info-content"],[1,"flex","justify-center","py-10"],[1,"text-center","text-danger","py-6","text-sm"],[1,"album-info-style","relative","p-5","mb-6","rounded-lg","italic","text-base","leading-relaxed"],[1,"album-info-text","text-sm","leading-relaxed","text-text-secondary","whitespace-pre-wrap","text-justify"],[3,"play","menu","track","trackNumber","showNumber","showArt","showArtist","showAlbum","showQuality","showMenu","isPlaying"],[1,"text-sm","font-semibold","mb-2"],[1,"description-content","text-sm","text-text-secondary","leading-relaxed",3,"innerHTML"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"w-12","h-12","mb-4","opacity-50"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","1","d","M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"],["routerLink","/qobuz/browse",1,"mt-4","px-4","py-2","bg-accent-qobuz","text-white","rounded-lg","hover:bg-accent-qobuz/90","transition-colors"]],template:function(e,i){e&1&&(l(0,"div",0),s(1,J,2,0,"div",1)(2,he,55,15)(3,ve,7,0,"div",2),o()),e&2&&(r(),d(i.loading()?1:i.album()?2:3))},dependencies:[H,O,Y],styles:[`.loading-spinner[_ngcontent-%COMP%]{width:40px;height:40px;border:3px solid var(--color-border-accent);border-top-color:var(--color-accent-qobuz);border-radius:50%;animation:_ngcontent-%COMP%_spin .8s linear infinite}@keyframes _ngcontent-%COMP%_spin{to{transform:rotate(360deg)}}.line-clamp-2[_ngcontent-%COMP%]{display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical;overflow:hidden}.description-content[_ngcontent-%COMP%]     p{margin-bottom:.75rem}.description-content[_ngcontent-%COMP%]     p:last-child{margin-bottom:0}.description-content[_ngcontent-%COMP%]     a{color:var(--color-accent-qobuz);text-decoration:none}.description-content[_ngcontent-%COMP%]     a:hover{text-decoration:underline}.album-info-style[_ngcontent-%COMP%]{background:linear-gradient(135deg,#1db95414,#1db95405);color:var(--color-text-primary);border-left:3px solid var(--color-accent-qobuz)}.album-info-style[_ngcontent-%COMP%]:before{content:'"';position:absolute;top:8px;left:12px;font-size:3rem;font-family:Georgia,Times New Roman,serif;color:var(--color-accent-qobuz);opacity:.4;line-height:1}.album-info-text[_ngcontent-%COMP%]:first-letter{font-size:1.8em;font-weight:600;color:var(--color-text-primary);float:left;line-height:1;margin-right:6px;margin-top:4px}@media(max-width:380px){.album-cover[_ngcontent-%COMP%]{width:128px!important;height:128px!important}}`]})};export{U as AlbumDetailComponent};
