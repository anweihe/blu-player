import{a as fe,b as xe,e as ge,h as ve}from"./chunk-4XW53KSD.js";import{a as I}from"./chunk-I6TWVLAM.js";import{a as he}from"./chunk-X7QA6BQF.js";import{a as j}from"./chunk-GWJHP5PM.js";import{e as be}from"./chunk-TB3BYDLV.js";import{b as pe,e as Y,f as Z,g as ue,k as ee,l as _e}from"./chunk-GYSMW3IL.js";import{$a as ae,Ab as P,Cb as ce,Da as W,Db as de,Ea as R,Eb as me,Ga as L,Ha as l,Ib as J,Kb as q,R as w,Ta as T,W as p,Wb as V,X as u,Y as g,Z as S,ab as _,bb as f,ca as te,cb as se,db as H,eb as N,fb as D,gb as r,ha as M,hb as a,ib as b,jb as d,kb as m,lb as k,mb as C,nb as X,ob as x,pb as E,qb as s,sb as $,tb as B,ub as F,vb as z,wb as h,yb as c,zb as y}from"./chunk-63K3V35C.js";var Ce=(i,t)=>t.id;function ye(i,t){i&1&&(r(0,"div",9),c(1," Lade Profile... "),a())}function we(i,t){i&1&&(r(0,"div",9),c(1," Keine Profile vorhanden "),a())}function Se(i,t){i&1&&(g(),r(0,"svg",19),b(1,"path",23),a())}function ke(i,t){if(i&1&&(r(0,"span",25),c(1,"-"),a(),r(2,"span"),c(3),a()),i&2){let e=s(2).$implicit;l(3),y(e.qobuz.displayName)}}function Pe(i,t){if(i&1&&(r(0,"span",24),c(1,"Qobuz verbunden"),a(),_(2,ke,4,1)),i&2){let e=s().$implicit;l(2),f(e.qobuz!=null&&e.qobuz.displayName?2:-1)}}function Ee(i,t){i&1&&(r(0,"span",21),c(1,"Nicht bei Qobuz eingeloggt"),a())}function Me(i,t){if(i&1){let e=C();r(0,"button",26),x("click",function(o){p(e);let v=s().$implicit,O=s(2);return u(O.confirmDeleteProfile(o,v))}),g(),r(1,"svg",6),b(2,"path",27),a()()}}function Te(i,t){if(i&1){let e=C();r(0,"div",15),x("click",function(){let o=p(e).$implicit,v=s(2);return u(v.selectProfile(o))}),r(1,"div",16),c(2),a(),r(3,"div",17)(4,"div",11)(5,"span",18),c(6),a(),_(7,Se,2,0,":svg:svg",19),a(),r(8,"div",20),_(9,Pe,3,1)(10,Ee,2,0,"span",21),a()(),_(11,Me,3,0,"button",22),a()}if(i&2){let e=t.$implicit,n=s(2);h("bg-bg-card",e.id===n.profileService.activeProfileId()),l(),z("background-color",n.profileService.getProfileColor(e.id)),l(),P(" ",n.profileService.getProfileInitial(e.name)," "),l(4),y(e.name),l(),f(e.id===n.profileService.activeProfileId()?7:-1),l(2),f(e.qobuz!=null&&e.qobuz.authToken?9:10),l(2),f(n.profileService.profiles().length>1?11:-1)}}function Ve(i,t){if(i&1&&H(0,Te,12,9,"div",14,Ce),i&2){let e=s();N(e.profileService.profiles())}}function ze(i,t){if(i&1){let e=C();r(0,"div",11)(1,"input",28,0),me("ngModelChange",function(o){p(e);let v=s();return de(v.newProfileName,o)||(v.newProfileName=o),u(o)}),x("keydown.enter",function(){p(e);let o=s();return u(o.createProfile())})("keydown.escape",function(){p(e);let o=s();return u(o.cancelCreate())}),a(),r(3,"button",29),x("click",function(){p(e);let o=s();return u(o.createProfile())}),c(4," Erstellen "),a(),r(5,"button",30),x("click",function(){p(e);let o=s();return u(o.cancelCreate())}),c(6," Abbrechen "),a()()}if(i&2){let e=s();l(),ce("ngModel",e.newProfileName),l(2),D("disabled",!e.newProfileName.trim())}}function Le(i,t){if(i&1){let e=C();r(0,"button",31),x("click",function(){p(e);let o=s();return u(o.startCreate())}),g(),r(1,"svg",6),b(2,"path",32),a(),S(),r(3,"span",33),c(4,"Neues Profil erstellen"),a()()}}function He(i,t){i&1&&c(0," Die Qobuz-Verbindung wird dabei ebenfalls entfernt. ")}function Ne(i,t){if(i&1){let e=C();r(0,"div",34),x("click",function(){p(e);let o=s();return u(o.cancelDelete())}),r(1,"div",35),x("click",function(o){return p(e),u(o.stopPropagation())}),r(2,"h3",36),c(3,"Profil l\xF6schen?"),a(),r(4,"p",37),c(5),_(6,He,1,0),a(),r(7,"div",38)(8,"button",39),x("click",function(){p(e);let o=s();return u(o.cancelDelete())}),c(9," Abbrechen "),a(),r(10,"button",40),x("click",function(){p(e);let o=s();return u(o.deleteProfile())}),c(11," L\xF6schen "),a()()()()}if(i&2){let e,n,o=s();l(5),P(' M\xF6chtest du das Profil "',(e=o.profileToDelete())==null?null:e.name,'" wirklich l\xF6schen? '),l(),f((n=o.profileToDelete())!=null&&n.qobuz?6:-1)}}var K=class i{profileService=w(ee);closed=new te;profileSelected=new te;isClosing=M(!1);isCreating=M(!1);profileToDelete=M(null);newProfileName="";ngOnInit(){this.profileService.profiles().length===0&&this.profileService.loadProfiles().subscribe()}selectProfile(t){t.id!==this.profileService.activeProfileId()&&(this.profileService.setActiveProfileId(t.id),this.profileSelected.emit(t)),this.close()}startCreate(){this.isCreating.set(!0),this.newProfileName="",setTimeout(()=>{document.querySelector('input[placeholder="Profilname"]')?.focus()})}cancelCreate(){this.isCreating.set(!1),this.newProfileName=""}createProfile(){let t=this.newProfileName.trim();t&&this.profileService.createProfile(t).subscribe(e=>{e&&(this.isCreating.set(!1),this.newProfileName="",this.profileService.setActiveProfileId(e.id),this.profileSelected.emit(e))})}confirmDeleteProfile(t,e){t.stopPropagation(),this.profileToDelete.set(e)}cancelDelete(){this.profileToDelete.set(null)}deleteProfile(){let t=this.profileToDelete();t&&this.profileService.deleteProfile(t.id).subscribe(e=>{e&&this.profileToDelete.set(null)})}close(){this.isClosing.set(!0),setTimeout(()=>{this.closed.emit()},200)}onEscapeKey(){this.profileToDelete()?this.cancelDelete():this.isCreating()?this.cancelCreate():this.close()}static \u0275fac=function(e){return new(e||i)};static \u0275cmp=T({type:i,selectors:[["app-profile-switcher"]],hostBindings:function(e,n){e&1&&x("keydown.escape",function(){return n.onEscapeKey()},L)},outputs:{closed:"closed",profileSelected:"profileSelected"},decls:16,vars:15,consts:[["nameInput",""],[1,"fixed","inset-0","bg-black/60","backdrop-blur-sm","z-[100]","transition-opacity","duration-200",3,"click"],[1,"fixed","inset-x-4","top-1/2","-translate-y-1/2","max-w-md","mx-auto","bg-bg-primary","rounded-2xl","z-[101]","shadow-2xl","overflow-hidden","transition-all","duration-200",3,"click"],[1,"flex","items-center","justify-between","p-4","border-b","border-border-subtle"],[1,"text-lg","font-semibold"],[1,"w-8","h-8","flex","items-center","justify-center","rounded-lg","hover:bg-bg-card","transition-colors",3,"click"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"w-5","h-5"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M6 18L18 6M6 6l12 12"],[1,"max-h-80","overflow-y-auto","p-2"],[1,"p-4","text-center","text-text-muted"],[1,"p-3","border-t","border-border-subtle"],[1,"flex","items-center","gap-2"],[1,"w-full","flex","items-center","justify-center","gap-2","px-4","py-3","rounded-xl","text-accent-qobuz","hover:bg-accent-qobuz/10","transition-colors"],[1,"fixed","inset-0","bg-black/60","z-[102]","flex","items-center","justify-center","p-4"],[1,"flex","items-center","gap-3","p-3","rounded-xl","cursor-pointer","transition-colors","hover:bg-bg-card",3,"bg-bg-card"],[1,"flex","items-center","gap-3","p-3","rounded-xl","cursor-pointer","transition-colors","hover:bg-bg-card",3,"click"],[1,"w-12","h-12","rounded-full","flex","items-center","justify-center","text-white","font-semibold","text-lg","flex-shrink-0"],[1,"flex-1","min-w-0"],[1,"font-medium","truncate"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 20 20","fill","currentColor",1,"w-5","h-5","text-green-500","flex-shrink-0"],[1,"text-sm","text-text-muted"],[1,"text-text-muted"],["title","Profil l\xF6schen",1,"w-8","h-8","flex","items-center","justify-center","rounded-lg","text-text-muted","hover:text-error","hover:bg-error/10","transition-colors","flex-shrink-0"],["fill-rule","evenodd","d","M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z","clip-rule","evenodd"],[1,"text-green-600"],[1,"mx-1"],["title","Profil l\xF6schen",1,"w-8","h-8","flex","items-center","justify-center","rounded-lg","text-text-muted","hover:text-error","hover:bg-error/10","transition-colors","flex-shrink-0",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"],["type","text","placeholder","Profilname",1,"flex-1","px-3","py-2","bg-bg-card","border","border-border-subtle","rounded-lg","text-sm","focus:outline-none","focus:ring-2","focus:ring-accent-qobuz/50",3,"ngModelChange","keydown.enter","keydown.escape","ngModel"],[1,"px-3","py-2","bg-accent-qobuz","text-white","rounded-lg","text-sm","font-medium","hover:opacity-90","transition-opacity","disabled:opacity-50",3,"click","disabled"],[1,"px-3","py-2","text-text-muted","hover:bg-bg-card","rounded-lg","text-sm","transition-colors",3,"click"],[1,"w-full","flex","items-center","justify-center","gap-2","px-4","py-3","rounded-xl","text-accent-qobuz","hover:bg-accent-qobuz/10","transition-colors",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 4v16m8-8H4"],[1,"font-medium"],[1,"fixed","inset-0","bg-black/60","z-[102]","flex","items-center","justify-center","p-4",3,"click"],[1,"bg-bg-primary","rounded-2xl","p-6","max-w-sm","w-full","shadow-2xl",3,"click"],[1,"text-lg","font-semibold","mb-2"],[1,"text-text-muted","mb-4"],[1,"flex","gap-3","justify-end"],[1,"px-4","py-2","rounded-lg","text-text-muted","hover:bg-bg-card","transition-colors",3,"click"],[1,"px-4","py-2","bg-error","text-white","rounded-lg","font-medium","hover:opacity-90","transition-opacity",3,"click"]],template:function(e,n){e&1&&(r(0,"div",1),x("click",function(){return n.close()}),a(),r(1,"div",2),x("click",function(v){return v.stopPropagation()}),r(2,"div",3)(3,"h2",4),c(4,"Profile"),a(),r(5,"button",5),x("click",function(){return n.close()}),g(),r(6,"svg",6),b(7,"path",7),a()()(),S(),r(8,"div",8),_(9,ye,2,0,"div",9)(10,we,2,0,"div",9)(11,Ve,2,0),a(),r(12,"div",10),_(13,ze,7,2,"div",11)(14,Le,5,0,"button",12),a()(),_(15,Ne,12,2,"div",13)),e&2&&(h("opacity-0",n.isClosing())("opacity-100",!n.isClosing()),l(),h("scale-95",n.isClosing())("opacity-0",n.isClosing())("scale-100",!n.isClosing())("opacity-100",!n.isClosing()),l(8),f(n.profileService.isLoading()?9:n.profileService.profiles().length===0?10:11),l(4),f(n.isCreating()?13:14),l(2),f(n.profileToDelete()?15:-1))},dependencies:[V,ve,fe,xe,ge],styles:["[_nghost-%COMP%]{display:contents}"]})};var qe=(i,t)=>t.id;function De(i,t){i&1&&(d(0,"div",15),g(),d(1,"svg",21),k(2,"path",23),m()())}function je(i,t){i&1&&(d(0,"div",16),k(1,"div",24),d(2,"span",25),c(3,"Bluesound Player"),m(),k(4,"div",24),m())}function Ie(i,t){i&1&&(d(0,"div",31),g(),d(1,"svg",21),k(2,"path",23),m()())}function Be(i,t){if(i&1){let e=C();d(0,"button",8),E("click",function(){p(e);let o=s().$implicit,v=s(2);return u(v.selectPlayer(o))}),d(1,"div",9),g(),d(2,"svg",10),k(3,"path",27),m()(),S(),d(4,"div",28)(5,"p",29),c(6),m(),d(7,"p",30),c(8),m()(),_(9,Ie,3,0,"div",31),m()}if(i&2){let e=s().$implicit,n=s(2);h("bg-accent-qobuz/10",n.isSelected(e))("border-accent-qobuz",n.isSelected(e))("border-2",n.isSelected(e))("bg-bg-card",!n.isSelected(e))("hover:bg-bg-card-hover",!n.isSelected(e)),l(),h("bg-accent-qobuz",n.isSelected(e))("text-white",n.isSelected(e))("bg-bg-secondary",!n.isSelected(e))("text-text-muted",!n.isSelected(e)),l(4),h("text-accent-qobuz",n.isSelected(e)),l(),P(" ",e.name," "),l(2),P(" ",n.getPlayerSubtitle(e)," "),l(),f(n.isSelected(e)?9:-1)}}function Fe(i,t){if(i&1&&_(0,Be,10,23,"button",26),i&2){let e=t.$implicit;f(e.isSecondaryStereoPairSpeaker?-1:0)}}function Oe(i,t){i&1&&(d(0,"div",17),g(),d(1,"svg",32),k(2,"path",33),m(),S(),d(3,"p",34),c(4,"Keine Player gefunden"),m(),d(5,"p",35),c(6,"Stellen Sie sicher, dass Ihre Bluesound Player eingeschaltet sind"),m()())}function Ge(i,t){i&1&&(d(0,"div",18),k(1,"div",36),d(2,"p",37),c(3,"Suche nach Playern..."),m()())}function Qe(i,t){if(i&1){let e=C();d(0,"div",0),E("click",function(){p(e);let o=s();return u(o.close())}),m(),d(1,"div",1)(2,"div",2)(3,"h2",3),c(4,"Wiedergabeger\xE4t"),m(),d(5,"button",4),E("click",function(){p(e);let o=s();return u(o.close())}),g(),d(6,"svg",5),k(7,"path",6),m()()(),S(),d(8,"div",7)(9,"button",8),E("click",function(){p(e);let o=s();return u(o.selectBrowser())}),d(10,"div",9),g(),d(11,"svg",10),k(12,"path",11),m()(),S(),d(13,"div",12)(14,"p",13),c(15," Dieser Browser "),m(),d(16,"p",14),c(17,"Wiedergabe auf diesem Ger\xE4t"),m()(),_(18,De,3,0,"div",15),m(),_(19,je,5,0,"div",16),H(20,Fe,1,1,null,null,qe),_(22,Oe,7,0,"div",17),_(23,Ge,4,0,"div",18),m(),d(24,"div",19)(25,"button",20),E("click",function(){p(e);let o=s();return u(o.refreshPlayers())}),g(),d(26,"svg",21),k(27,"path",22),m(),c(28," Player aktualisieren "),m()()()}if(i&2){let e=s();l(9),h("bg-accent-qobuz/10",e.playerState.playerMode()==="browser")("border-accent-qobuz",e.playerState.playerMode()==="browser")("border-2",e.playerState.playerMode()==="browser")("bg-bg-card",e.playerState.playerMode()!=="browser")("hover:bg-bg-card-hover",e.playerState.playerMode()!=="browser"),l(),h("bg-accent-qobuz",e.playerState.playerMode()==="browser")("text-white",e.playerState.playerMode()==="browser")("bg-bg-secondary",e.playerState.playerMode()!=="browser")("text-text-muted",e.playerState.playerMode()!=="browser"),l(4),h("text-accent-qobuz",e.playerState.playerMode()==="browser"),l(4),f(e.playerState.playerMode()==="browser"?18:-1),l(),f(e.players().length>0?19:-1),l(),N(e.players()),l(2),f(e.players().length===0&&!e.isLoading()?22:-1),l(),f(e.isLoading()?23:-1),l(2),X("disabled",e.isLoading()),l(),h("animate-spin",e.isLoading())}}var A=class i{playerState=w(j);playback=w(I);bluesoundApi=w(he);isVisible=M(!1);isLoading=M(!1);players=M([]);ngOnInit(){this.loadPlayers()}open(){this.isVisible.set(!0),this.loadPlayers()}close(){this.isVisible.set(!1)}async selectBrowser(){await this.playback.switchToBrowser(),this.close()}async selectPlayer(t){await this.playback.switchToBluesound(t),this.close()}isSelected(t){return this.playerState.selectedPlayer()?.id===t.id}getPlayerSubtitle(t){return t.isStereoPaired?`${t.modelName} (Stereopaar)`:t.isGrouped?t.isMaster?`${t.groupName} (Master)`:`${t.groupName}`:t.modelName}loadPlayers(){this.isLoading.set(!0),this.bluesoundApi.getPlayers().subscribe({next:t=>{this.players.set(t),this.playerState.players.set(t),this.isLoading.set(!1)},error:()=>{this.isLoading.set(!1)}})}refreshPlayers(){this.isLoading.set(!0),this.bluesoundApi.refreshPlayers().subscribe({next:t=>{this.players.set(t),this.playerState.players.set(t),this.isLoading.set(!1)},error:()=>{this.isLoading.set(!1)}})}onEscapeKey(){this.isVisible()&&this.close()}static \u0275fac=function(e){return new(e||i)};static \u0275cmp=T({type:i,selectors:[["app-player-selector"]],hostBindings:function(e,n){e&1&&x("keydown.escape",function(){return n.onEscapeKey()},L)},decls:1,vars:1,consts:[[1,"fixed","inset-0","bg-black/50","z-[110]",3,"click"],[1,"fixed","bottom-0","left-0","right-0","bg-bg-primary","rounded-t-2xl","z-[111]","max-h-[80vh]","overflow-hidden","flex","flex-col","safe-area-bottom","animate-slide-up"],[1,"flex","items-center","justify-between","px-6","py-4","border-b","border-border-subtle"],[1,"text-lg","font-semibold"],[1,"w-8","h-8","rounded-full","hover:bg-bg-card","flex","items-center","justify-center","text-text-muted","hover:text-text-primary","transition-colors",3,"click"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"w-5","h-5"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M6 18L18 6M6 6l12 12"],[1,"flex-1","overflow-y-auto","p-4","space-y-2"],[1,"w-full","flex","items-center","gap-4","p-4","rounded-xl","transition-colors",3,"click"],[1,"w-12","h-12","rounded-xl","flex","items-center","justify-center"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"w-6","h-6"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9.75 17L9 20l-1 1h8l-1-1-.75-3M3 13h18M5 17h14a2 2 0 002-2V5a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"],[1,"flex-1","text-left"],[1,"font-medium"],[1,"text-sm","text-text-muted"],[1,"w-6","h-6","rounded-full","bg-accent-qobuz","text-white","flex","items-center","justify-center"],[1,"flex","items-center","gap-3","py-3"],[1,"text-center","py-8","text-text-muted"],[1,"text-center","py-8"],[1,"p-4","border-t","border-border-subtle"],[1,"w-full","flex","items-center","justify-center","gap-2","py-3","text-sm","text-text-secondary","hover:text-text-primary","transition-colors",3,"click","disabled"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"w-4","h-4"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M5 13l4 4L19 7"],[1,"flex-1","h-px","bg-border-subtle"],[1,"text-xs","text-text-muted","uppercase","tracking-wide"],[1,"w-full","flex","items-center","gap-4","p-4","rounded-xl","transition-colors",3,"bg-accent-qobuz/10","border-accent-qobuz","border-2","bg-bg-card","hover:bg-bg-card-hover"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M19.428 15.428a2 2 0 00-1.022-.547l-2.387-.477a6 6 0 00-3.86.517l-.318.158a6 6 0 01-3.86.517L6.05 15.21a2 2 0 00-1.806.547M8 4h8l-1 1v5.172a2 2 0 00.586 1.414l5 5c1.26 1.26.367 3.414-1.415 3.414H4.828c-1.782 0-2.674-2.154-1.414-3.414l5-5A2 2 0 009 10.172V5L8 4z"],[1,"flex-1","text-left","min-w-0"],[1,"font-medium","truncate"],[1,"text-sm","text-text-muted","truncate"],[1,"w-6","h-6","rounded-full","bg-accent-qobuz","text-white","flex","items-center","justify-center","flex-shrink-0"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"w-12","h-12","mx-auto","mb-3","opacity-50"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","1.5","d","M19.428 15.428a2 2 0 00-1.022-.547l-2.387-.477a6 6 0 00-3.86.517l-.318.158a6 6 0 01-3.86.517L6.05 15.21a2 2 0 00-1.806.547M8 4h8l-1 1v5.172a2 2 0 00.586 1.414l5 5c1.26 1.26.367 3.414-1.415 3.414H4.828c-1.782 0-2.674-2.154-1.414-3.414l5-5A2 2 0 009 10.172V5L8 4z"],[1,"font-medium","mb-1"],[1,"text-sm"],[1,"w-8","h-8","border-2","border-accent-qobuz","border-t-transparent","rounded-full","animate-spin","mx-auto","mb-3"],[1,"text-text-muted"]],template:function(e,n){e&1&&_(0,Qe,29,27),e&2&&f(n.isVisible()?0:-1)},dependencies:[V],styles:[".safe-area-bottom[_ngcontent-%COMP%]{padding-bottom:env(safe-area-inset-bottom,0)}@keyframes _ngcontent-%COMP%_slide-up{0%{transform:translateY(100%)}to{transform:translateY(0)}}.animate-slide-up[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_slide-up .3s ease-out}"]})};var Ae=["playerSelector"];function $e(i,t){if(i&1&&b(0,"img",6),i&2){let e=s();D("src",e.coverImage(),R)("alt",e.trackTitle())}}function Ye(i,t){i&1&&(r(0,"div",7),g(),r(1,"svg",28),b(2,"path",27),a()())}function Re(i,t){i&1&&(g(),r(0,"svg",12),b(1,"path",29),a())}function Ke(i,t){i&1&&(g(),r(0,"svg",13),b(1,"path",30),a())}function Ue(i,t){i&1&&(g(),r(0,"svg",23),b(1,"path",31)(2,"path",32),a())}function We(i,t){i&1&&(g(),r(0,"svg",23),b(1,"path",33)(2,"path",31),a())}function Xe(i,t){i&1&&(g(),r(0,"svg",23),b(1,"path",34),a())}function Je(i,t){i&1&&(g(),r(0,"svg",35),b(1,"path",36),a(),S(),r(2,"span",37),c(3,"Browser"),a())}function Ze(i,t){if(i&1&&(g(),r(0,"svg",38),b(1,"path",39),a(),S(),r(2,"span",40),c(3),a()),i&2){let e,n=s();l(3),y((e=n.playerState.selectedPlayer())==null?null:e.name)}}var ie=class i{playerSelector;playerState=w(j);playback=w(I);hasContent=q(()=>!0);coverImage=q(()=>{let t=this.playerState.currentTrack(),e=this.playerState.playbackStatus();return t?.album?.image?.large?t.album.image.large:t?.album?.image?.small?t.album.image.small:e?.imageUrl});trackTitle=q(()=>{let t=this.playerState.currentTrack(),e=this.playerState.playbackStatus();return t?.title||e?.title});artistName=q(()=>{let t=this.playerState.currentTrack(),e=this.playerState.playbackStatus();return t?.performer?.name||e?.artist});openNowPlaying(){this.playerState.showNowPlaying()}togglePlayPause(t){t.stopPropagation(),this.playback.togglePlayPause()}skipNext(t){t.stopPropagation(),this.playback.skipNext()}async seekTo(t){let n=t.currentTarget.getBoundingClientRect(),o=(t.clientX-n.left)/n.width*100;await this.playback.seekToPercent(o)}toggleVolumePanel(){this.playerState.isVolumePanelVisible.update(t=>!t)}togglePlayerSelector(){this.playerSelector.open()}static \u0275fac=function(e){return new(e||i)};static \u0275cmp=T({type:i,selectors:[["app-global-player"]],viewQuery:function(e,n){if(e&1&&$(Ae,5),e&2){let o;B(o=F())&&(n.playerSelector=o.first)}},decls:39,vars:15,consts:[["playerSelector",""],[1,"global-player","fixed","bottom-0","left-0","right-0","bg-bg-card","border-t","border-border-subtle","z-50","safe-area-bottom"],[1,"progress-line","h-0.5","bg-bg-secondary"],[1,"h-full","bg-accent-qobuz","transition-all","duration-200"],[1,"flex","items-center","gap-3","p-3","cursor-pointer",3,"click"],[1,"w-12","h-12","rounded-md","bg-bg-secondary","overflow-hidden","flex-shrink-0"],[1,"w-full","h-full","object-cover",3,"src","alt"],[1,"w-full","h-full","flex","items-center","justify-center","text-text-muted"],[1,"flex-1","min-w-0"],[1,"text-sm","font-medium","truncate","text-text-primary"],[1,"text-xs","text-text-muted","truncate"],[1,"w-10","h-10","rounded-full","bg-accent-qobuz","text-white","flex","items-center","justify-center","hover:opacity-90","transition-opacity",3,"click"],["xmlns","http://www.w3.org/2000/svg","fill","currentColor","viewBox","0 0 24 24",1,"w-5","h-5"],["xmlns","http://www.w3.org/2000/svg","fill","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","ml-0.5"],[1,"w-10","h-10","rounded-full","text-text-secondary","hover:text-text-primary","flex","items-center","justify-center","transition-colors","md:hidden",3,"click"],["d","M6 18l8.5-6L6 6v12zM16 6v12h2V6h-2z"],[1,"hidden","md:flex","items-center","gap-4","px-4","pb-3","-mt-1"],[1,"text-xs","text-text-muted","w-12","text-right"],[1,"flex-1","h-1","bg-bg-secondary","rounded-full","cursor-pointer","group",3,"click"],[1,"h-full","bg-accent-qobuz","rounded-full","relative","group-hover:bg-accent-qobuz-hover","transition-colors"],[1,"absolute","right-0","top-1/2","-translate-y-1/2","w-3","h-3","bg-white","rounded-full","shadow","opacity-0","group-hover:opacity-100","transition-opacity"],[1,"text-xs","text-text-muted","w-12"],[1,"w-8","h-8","text-text-secondary","hover:text-text-primary","flex","items-center","justify-center",3,"click"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"w-5","h-5"],[1,"flex","items-center","gap-2","px-3","py-1.5","rounded-lg","bg-bg-secondary","hover:bg-bg-card-hover","text-sm","transition-colors",3,"click"],[1,"hidden","xl:flex","items-center","gap-1.5","px-2","py-1","bg-accent-qobuz/10","rounded","text-xs","text-accent-qobuz","font-medium"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"w-3.5","h-3.5"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 19V6l12-3v13M9 19c0 1.105-1.343 2-3 2s-3-.895-3-2 1.343-2 3-2 3 .895 3 2zm12-3c0 1.105-1.343 2-3 2s-3-.895-3-2 1.343-2 3-2 3 .895 3 2zM9 10l12-3"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"w-6","h-6"],["d","M6 4h4v16H6V4zm8 0h4v16h-4V4z"],["d","M8 5v14l11-7z"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M5.586 15H4a1 1 0 01-1-1v-4a1 1 0 011-1h1.586l4.707-4.707C10.923 3.663 12 4.109 12 5v14c0 .891-1.077 1.337-1.707.707L5.586 15z"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M17 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M15.536 8.464a5 5 0 010 7.072M12 6.253v11.494m0 0c-.891 0-1.337-1.077-.707-1.707l4.707-4.707a1 1 0 000-1.414l-4.707-4.707c-.63-.63-1.077-.184-1.077.707"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M15.536 8.464a5 5 0 010 7.072m2.828-9.9a9 9 0 010 12.728M5.586 15H4a1 1 0 01-1-1v-4a1 1 0 011-1h1.586l4.707-4.707C10.923 3.663 12 4.109 12 5v14c0 .891-1.077 1.337-1.707.707L5.586 15z"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"w-4","h-4"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9.75 17L9 20l-1 1h8l-1-1-.75-3M3 13h18M5 17h14a2 2 0 002-2V5a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"],[1,"hidden","lg:inline"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"w-4","h-4","text-accent-qobuz"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M19.428 15.428a2 2 0 00-1.022-.547l-2.387-.477a6 6 0 00-3.86.517l-.318.158a6 6 0 01-3.86.517L6.05 15.21a2 2 0 00-1.806.547M8 4h8l-1 1v5.172a2 2 0 00.586 1.414l5 5c1.26 1.26.367 3.414-1.415 3.414H4.828c-1.782 0-2.674-2.154-1.414-3.414l5-5A2 2 0 009 10.172V5L8 4z"],[1,"hidden","lg:inline","truncate","max-w-[100px]"]],template:function(e,n){if(e&1){let o=C();r(0,"div",1)(1,"div",2),b(2,"div",3),a(),r(3,"div",4),x("click",function(){return p(o),u(n.openNowPlaying())}),r(4,"div",5),_(5,$e,1,2,"img",6)(6,Ye,3,0,"div",7),a(),r(7,"div",8)(8,"p",9),c(9),a(),r(10,"p",10),c(11),a()(),r(12,"button",11),x("click",function(O){return p(o),u(n.togglePlayPause(O))}),_(13,Re,2,0,":svg:svg",12)(14,Ke,2,0,":svg:svg",13),a(),r(15,"button",14),x("click",function(O){return p(o),u(n.skipNext(O))}),g(),r(16,"svg",12),b(17,"path",15),a()()(),S(),r(18,"div",16)(19,"span",17),c(20),a(),r(21,"div",18),x("click",function(O){return p(o),u(n.seekTo(O))}),r(22,"div",19),b(23,"div",20),a()(),r(24,"span",21),c(25),a(),r(26,"button",22),x("click",function(){return p(o),u(n.toggleVolumePanel())}),_(27,Ue,3,0,":svg:svg",23)(28,We,3,0,":svg:svg",23)(29,Xe,2,0,":svg:svg",23),a(),r(30,"button",24),x("click",function(){return p(o),u(n.togglePlayerSelector())}),_(31,Je,4,0)(32,Ze,4,1),a(),r(33,"div",25),g(),r(34,"svg",26),b(35,"path",27),a(),c(36),a()()(),S(),b(37,"app-player-selector",null,0)}e&2&&(h("hidden",!n.hasContent()),l(2),z("width",n.playerState.progressPercent(),"%"),l(3),f(n.coverImage()?5:6),l(4),y(n.trackTitle()||"Kein Titel"),l(2),y(n.artistName()||"Unbekannter K\xFCnstler"),l(2),f(n.playerState.isPlaying()?13:14),l(7),y(n.playerState.formattedPosition()),l(2),z("width",n.playerState.progressPercent(),"%"),l(3),y(n.playerState.formattedDuration()),l(2),f(n.playerState.isMuted()||n.playerState.volume()===0?27:n.playerState.volume()<50?28:29),l(4),f(n.playerState.playerMode()==="browser"?31:32),l(5),P(" ",n.playerState.qualityLabel()," "))},dependencies:[V,A],styles:[".safe-area-bottom[_ngcontent-%COMP%]{padding-bottom:env(safe-area-inset-bottom,0)}.global-player[_ngcontent-%COMP%]{box-shadow:0 -4px 20px #00000026}"]})};var et=(i,t)=>t.id;function tt(i,t){i&1&&(d(0,"span",14),c(1,"MP3"),m())}function it(i,t){i&1&&(d(0,"span",14),c(1,"CD"),m())}function nt(i,t){i&1&&(d(0,"span",15),c(1,"24bit"),m())}function ot(i,t){i&1&&(d(0,"span",15),c(1,"MAX"),m())}function rt(i,t){if(i&1&&(d(0,"span",19),c(1),m()),i&2){let e=s().$implicit;l(),P(" ",e.badge," ")}}function lt(i,t){i&1&&(d(0,"div",20),g(),d(1,"svg",21),k(2,"path",22),m()())}function at(i,t){if(i&1){let e=C();d(0,"button",12),E("click",function(){let o=p(e).$implicit,v=s(2);return u(v.selectQuality(o.id))}),d(1,"div",13),_(2,tt,2,0,"span",14)(3,it,2,0,"span",14)(4,nt,2,0,"span",15)(5,ot,2,0,"span",15),m(),d(6,"div",16)(7,"div",17)(8,"p",18),c(9),m(),_(10,rt,2,1,"span",19),m(),d(11,"p",4),c(12),m()(),_(13,lt,3,0,"div",20),m()}if(i&2){let e,n=t.$implicit,o=s(2);h("bg-accent-qobuz/10",o.isSelected(n.id))("border-accent-qobuz",o.isSelected(n.id))("border-2",o.isSelected(n.id))("bg-bg-card",!o.isSelected(n.id))("hover:bg-bg-card-hover",!o.isSelected(n.id)),l(),h("bg-accent-qobuz",o.isSelected(n.id))("text-white",o.isSelected(n.id))("bg-bg-secondary",!o.isSelected(n.id))("text-text-muted",!o.isSelected(n.id)),l(),f((e=n.id)===5?2:e===6?3:e===7?4:e===27?5:-1),l(6),h("text-accent-qobuz",o.isSelected(n.id)),l(),P(" ",n.label," "),l(),f(n.badge?10:-1),l(2),y(n.description),l(),f(o.isSelected(n.id)?13:-1)}}function st(i,t){if(i&1){let e=C();d(0,"div",0),E("click",function(){p(e);let o=s();return u(o.close())}),m(),d(1,"div",1)(2,"div",2)(3,"div")(4,"h2",3),c(5,"Streaming-Qualit\xE4t"),m(),d(6,"p",4),c(7,"\xC4nderungen gelten ab dem n\xE4chsten Track"),m()(),d(8,"button",5),E("click",function(){p(e);let o=s();return u(o.close())}),g(),d(9,"svg",6),k(10,"path",7),m()()(),S(),d(11,"div",8),H(12,at,14,25,"button",9,et),m(),d(14,"div",10)(15,"p",11),c(16," H\xF6here Qualit\xE4t ben\xF6tigt mehr Bandbreite und Speicher "),m()()()}if(i&2){let e=s();l(12),N(e.qualityOptions)}}var U=class i{playerState=w(j);playback=w(I);isVisible=M(!1);qualityOptions=[{id:27,label:"Hi-Res Max",description:"FLAC 24-Bit bis 192 kHz",badge:"Beste Qualit\xE4t"},{id:7,label:"Hi-Res",description:"FLAC 24-Bit bis 96 kHz"},{id:6,label:"CD-Qualit\xE4t",description:"FLAC 16-Bit / 44.1 kHz"},{id:5,label:"MP3",description:"320 kbps"}];open(){this.isVisible.set(!0)}close(){this.isVisible.set(!1)}isSelected(t){return this.playerState.streamingQuality()===t}selectQuality(t){this.playback.setQuality(t),this.close()}onEscapeKey(){this.isVisible()&&this.close()}static \u0275fac=function(e){return new(e||i)};static \u0275cmp=T({type:i,selectors:[["app-quality-selector"]],hostBindings:function(e,n){e&1&&x("keydown.escape",function(){return n.onEscapeKey()},L)},decls:1,vars:1,consts:[[1,"fixed","inset-0","bg-black/50","z-[110]",3,"click"],[1,"fixed","bottom-0","left-0","right-0","bg-bg-primary","rounded-t-2xl","z-[111]","safe-area-bottom","animate-slide-up"],[1,"flex","items-center","justify-between","px-6","py-4","border-b","border-border-subtle"],[1,"text-lg","font-semibold"],[1,"text-sm","text-text-muted"],[1,"w-8","h-8","rounded-full","hover:bg-bg-card","flex","items-center","justify-center","text-text-muted","hover:text-text-primary","transition-colors",3,"click"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"w-5","h-5"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M6 18L18 6M6 6l12 12"],[1,"p-4","space-y-2"],[1,"w-full","flex","items-center","gap-4","p-4","rounded-xl","transition-colors",3,"bg-accent-qobuz/10","border-accent-qobuz","border-2","bg-bg-card","hover:bg-bg-card-hover"],[1,"px-6","pb-6","text-center"],[1,"text-xs","text-text-muted"],[1,"w-full","flex","items-center","gap-4","p-4","rounded-xl","transition-colors",3,"click"],[1,"w-12","h-12","rounded-xl","flex","items-center","justify-center","text-lg","font-bold"],[1,"text-sm"],[1,"text-xs"],[1,"flex-1","text-left"],[1,"flex","items-center","gap-2"],[1,"font-medium"],[1,"px-1.5","py-0.5","bg-accent-qobuz/20","text-accent-qobuz","text-xs","font-medium","rounded"],[1,"w-6","h-6","rounded-full","bg-accent-qobuz","text-white","flex","items-center","justify-center"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"w-4","h-4"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M5 13l4 4L19 7"]],template:function(e,n){e&1&&_(0,st,17,0),e&2&&f(n.isVisible()?0:-1)},dependencies:[V],styles:[".safe-area-bottom[_ngcontent-%COMP%]{padding-bottom:env(safe-area-inset-bottom,0)}@keyframes _ngcontent-%COMP%_slide-up{0%{transform:translateY(100%)}to{transform:translateY(0)}}.animate-slide-up[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_slide-up .3s ease-out}"]})};var ct=["popupPanel"],dt=["qualitySelector"],mt=["playerSelector"],pt=i=>["/qobuz/artist",i],ut=(i,t)=>t.id;function _t(i,t){if(i&1){let e=C();r(0,"div",5),x("click",function(){p(e);let o=s();return u(o.close())}),a()}if(i&2){let e=s();h("opacity-100",!e.isClosing())("opacity-0",e.isClosing())}}function ft(i,t){i&1&&b(0,"div",11)}function xt(i,t){if(i&1&&(r(0,"span",12),c(1),a()),i&2){let e=s(2);l(),P(" ",e.playerState.queue().length," ")}}function gt(i,t){i&1&&b(0,"div",11)}function vt(i,t){if(i&1&&b(0,"img",17),i&2){let e=s(3);D("src",e.coverImage(),R)("alt",e.trackTitle())}}function bt(i,t){i&1&&(r(0,"div",18),g(),r(1,"svg",45),b(2,"path",46),a()())}function ht(i,t){if(i&1){let e=C();r(0,"a",47),x("click",function(){p(e);let o=s(3);return u(o.close())}),c(1),a()}if(i&2){let e=s(3);D("routerLink",J(2,pt,e.artistId())),l(),P(" ",e.artistName()||"Unbekannter K\xFCnstler"," ")}}function Ct(i,t){if(i&1&&(r(0,"p",22),c(1),a()),i&2){let e=s(3);l(),y(e.artistName()||"Unbekannter K\xFCnstler")}}function yt(i,t){if(i&1&&(r(0,"p",23),c(1),a()),i&2){let e=s(3);l(),y(e.albumTitle())}}function wt(i,t){i&1&&(g(),r(0,"svg",37),b(1,"path",48),a())}function St(i,t){i&1&&(g(),r(0,"svg",38),b(1,"path",49),a())}function kt(i,t){i&1&&(g(),r(0,"svg",42),b(1,"path",50),a(),c(2," Browser "))}function Pt(i,t){if(i&1&&(g(),r(0,"svg",42),b(1,"path",51),a(),c(2)),i&2){let e,n=s(3);l(2),P(" ",(e=n.playerState.selectedPlayer())==null?null:e.name," ")}}function Et(i,t){if(i&1){let e=C();r(0,"div",14)(1,"div",16),_(2,vt,1,2,"img",17)(3,bt,3,0,"div",18),a(),r(4,"div",19)(5,"h2",20),c(6),a(),_(7,ht,2,4,"a",21)(8,Ct,2,1,"p",22),_(9,yt,2,1,"p",23),a(),r(10,"div",24)(11,"div",25),x("click",function(o){p(e);let v=s(2);return u(v.seekTo(o))}),r(12,"div",26),b(13,"div",27),a()(),r(14,"div",28)(15,"span"),c(16),a(),r(17,"span"),c(18),a()()(),r(19,"div",29)(20,"button",30),g(),r(21,"svg",31),b(22,"path",32),a()(),S(),r(23,"button",33),x("click",function(){p(e);let o=s(2);return u(o.skipPrevious())}),g(),r(24,"svg",34),b(25,"path",35),a()(),S(),r(26,"button",36),x("click",function(){p(e);let o=s(2);return u(o.togglePlayPause())}),_(27,wt,2,0,":svg:svg",37)(28,St,2,0,":svg:svg",38),a(),r(29,"button",33),x("click",function(){p(e);let o=s(2);return u(o.skipNext())}),g(),r(30,"svg",34),b(31,"path",39),a()(),S(),r(32,"button",30),g(),r(33,"svg",31),b(34,"path",32),a()()(),S(),r(35,"div",40)(36,"button",41),x("click",function(){p(e);let o=s(2);return u(o.openQualitySelector())}),g(),r(37,"svg",42),b(38,"path",43),a(),c(39),a(),S(),r(40,"button",44),x("click",function(){p(e);let o=s(2);return u(o.openPlayerSelector())}),_(41,kt,3,0)(42,Pt,3,1),a()()()}if(i&2){let e=s(2);l(2),f(e.coverImage()?2:3),l(4),y(e.trackTitle()||"Kein Titel"),l(),f(e.artistId()?7:8),l(2),f(e.albumTitle()?9:-1),l(3),z("width",e.playerState.progressPercent(),"%"),l(4),y(e.playerState.formattedPosition()),l(2),y(e.playerState.formattedDuration()),l(9),f(e.playerState.isPlaying()?27:28),l(12),P(" ",e.playerState.qualityLabel()," "),l(2),f(e.playerState.playerMode()==="browser"?41:42)}}function Mt(i,t){i&1&&(r(0,"div",52),g(),r(1,"svg",54),b(2,"path",55),a(),S(),r(3,"p"),c(4,"Warteschlange ist leer"),a()())}function Tt(i,t){if(i&1&&b(0,"img",17),i&2){let e=s().$implicit;D("src",e.imageUrl,R)("alt",e.title)}}function Vt(i,t){if(i&1&&(r(0,"div",57)(1,"span",58),c(2),a(),r(3,"div",59),_(4,Tt,1,2,"img",17),a(),r(5,"div",60)(6,"p",61),c(7),a(),r(8,"p",62),c(9),a()(),r(10,"span",63),c(11),a()()),i&2){let e=t.$implicit,n=t.$index,o=s(4);h("bg-accent-qobuz/10",n===o.playerState.queueIndex())("hover:bg-bg-card",n!==o.playerState.queueIndex()),l(2),y(n+1),l(2),f(e.imageUrl?4:-1),l(2),h("text-accent-qobuz",n===o.playerState.queueIndex()),l(),P(" ",e.title," "),l(2),y(e.artist),l(2),y(o.formatDuration(e.duration))}}function zt(i,t){if(i&1&&(r(0,"div",53),H(1,Vt,12,11,"div",56,ut),a()),i&2){let e=s(3);l(),N(e.playerState.queue())}}function Lt(i,t){if(i&1&&(r(0,"div",15),_(1,Mt,5,0,"div",52)(2,zt,3,0,"div",53),a()),i&2){let e=s(2);l(),f(e.playerState.queue().length===0?1:2)}}function Ht(i,t){if(i&1){let e=C();r(0,"div",6,2),x("touchstart",function(o){p(e);let v=s();return u(v.onTouchStart(o))})("touchmove",function(o){p(e);let v=s();return u(v.onTouchMove(o))})("touchend",function(){p(e);let o=s();return u(o.onTouchEnd())}),r(2,"div",7),x("mousedown",function(o){p(e);let v=s();return u(v.onDragStart(o))}),b(3,"div",8),a(),r(4,"div",9)(5,"button",10),x("click",function(){p(e);let o=s();return u(o.setTab("player"))}),c(6," Aktueller Titel "),_(7,ft,1,0,"div",11),a(),r(8,"button",10),x("click",function(){p(e);let o=s();return u(o.setTab("queue"))}),c(9," Warteschlange "),_(10,xt,2,1,"span",12),_(11,gt,1,0,"div",11),a()(),r(12,"div",13),_(13,Et,43,11,"div",14)(14,Lt,3,1,"div",15),a()()}if(i&2){let e=s();z("transform",e.popupTransform()),l(5),h("text-accent-qobuz",e.activeTab()==="player")("text-text-muted",e.activeTab()!=="player"),l(2),f(e.activeTab()==="player"?7:-1),l(),h("text-accent-qobuz",e.activeTab()==="queue")("text-text-muted",e.activeTab()!=="queue"),l(2),f(e.playerState.queue().length>0?10:-1),l(),f(e.activeTab()==="queue"?11:-1),l(2),f(e.activeTab()==="player"?13:14)}}var ne=class i{popupPanel;qualitySelector;playerSelector;playerState=w(j);playback=w(I);router=w(Y);activeTab=M("player");isClosing=M(!1);touchStartY=0;currentDragY=0;dragOffset=M(0);coverImage=q(()=>{let t=this.playerState.playbackStatus(),e=this.playerState.currentTrack();return t?.imageUrl||e?.album?.image?.large});trackTitle=q(()=>{let t=this.playerState.playbackStatus(),e=this.playerState.currentTrack();return t?.title||e?.title});artistName=q(()=>{let t=this.playerState.playbackStatus(),e=this.playerState.currentTrack();return t?.artist||e?.performer?.name});artistId=q(()=>{let t=this.playerState.playbackStatus(),e=this.playerState.currentTrack();return t?.artistId||e?.performer?.id});albumTitle=q(()=>{let t=this.playerState.playbackStatus(),e=this.playerState.currentTrack();return t?.album||e?.album?.title});popupTransform=q(()=>{if(this.isClosing())return"translateY(100%)";let t=this.dragOffset();return t>0?`translateY(${t}px)`:"translateY(0)"});setTab(t){this.activeTab.set(t)}close(){this.isClosing.set(!0),setTimeout(()=>{this.playerState.hideNowPlaying(),this.isClosing.set(!1),this.dragOffset.set(0)},300)}onTouchStart(t){this.touchStartY=t.touches[0].clientY,this.currentDragY=0}onTouchMove(t){let n=t.touches[0].clientY-this.touchStartY;n>0&&(this.currentDragY=n,this.dragOffset.set(n))}onTouchEnd(){this.currentDragY>100?this.close():this.dragOffset.set(0),this.currentDragY=0}onDragStart(t){t.preventDefault(),this.touchStartY=t.clientY;let e=o=>{let v=o.clientY-this.touchStartY;v>0&&(this.currentDragY=v,this.dragOffset.set(v))},n=()=>{this.currentDragY>100?this.close():this.dragOffset.set(0),this.currentDragY=0,document.removeEventListener("mousemove",e),document.removeEventListener("mouseup",n)};document.addEventListener("mousemove",e),document.addEventListener("mouseup",n)}togglePlayPause(){this.playback.togglePlayPause()}skipPrevious(){this.playback.skipPrevious()}skipNext(){this.playback.skipNext()}async seekTo(t){let n=t.currentTarget.getBoundingClientRect(),o=(t.clientX-n.left)/n.width*100;await this.playback.seekToPercent(o)}formatDuration=be;openQualitySelector(){this.qualitySelector.open()}openPlayerSelector(){this.playerSelector.open()}onEscapeKey(){this.playerState.isNowPlayingVisible()&&this.close()}static \u0275fac=function(e){return new(e||i)};static \u0275cmp=T({type:i,selectors:[["app-now-playing-popup"]],viewQuery:function(e,n){if(e&1&&$(ct,5)(dt,5)(mt,5),e&2){let o;B(o=F())&&(n.popupPanel=o.first),B(o=F())&&(n.qualitySelector=o.first),B(o=F())&&(n.playerSelector=o.first)}},hostBindings:function(e,n){e&1&&x("keydown.escape",function(){return n.onEscapeKey()},L)},decls:6,vars:2,consts:[["qualitySelector",""],["playerSelector",""],["popupPanel",""],[1,"fixed","inset-0","bg-black/60","z-[100]","transition-opacity","duration-300",3,"opacity-100","opacity-0"],[1,"fixed","left-0","right-0","bottom-0","bg-bg-primary","rounded-t-3xl","z-[101]","max-h-[90vh]","overflow-hidden","flex","flex-col","transition-transform","duration-300","ease-out","safe-area-bottom",3,"transform"],[1,"fixed","inset-0","bg-black/60","z-[100]","transition-opacity","duration-300",3,"click"],[1,"fixed","left-0","right-0","bottom-0","bg-bg-primary","rounded-t-3xl","z-[101]","max-h-[90vh]","overflow-hidden","flex","flex-col","transition-transform","duration-300","ease-out","safe-area-bottom",3,"touchstart","touchmove","touchend"],[1,"flex","justify-center","py-3","cursor-grab",3,"mousedown"],[1,"w-10","h-1","bg-text-muted/30","rounded-full"],[1,"flex","border-b","border-border-subtle","px-4"],[1,"flex-1","py-3","text-sm","font-medium","transition-colors","relative",3,"click"],[1,"absolute","bottom-0","left-0","right-0","h-0.5","bg-accent-qobuz"],[1,"ml-1","px-1.5","py-0.5","bg-accent-qobuz/10","text-accent-qobuz","text-xs","rounded"],[1,"flex-1","overflow-y-auto"],[1,"p-6","flex","flex-col","items-center"],[1,"p-4"],[1,"w-64","h-64","md:w-80","md:h-80","rounded-xl","overflow-hidden","bg-bg-secondary","shadow-2xl","mb-6"],[1,"w-full","h-full","object-cover",3,"src","alt"],[1,"w-full","h-full","flex","items-center","justify-center","text-text-muted"],[1,"text-center","mb-6","w-full","max-w-md"],[1,"text-xl","font-bold","truncate","mb-1"],[1,"text-text-secondary","hover:text-accent-qobuz","transition-colors",3,"routerLink"],[1,"text-text-secondary"],[1,"text-sm","text-text-muted","mt-1","truncate"],[1,"w-full","max-w-md","mb-4"],[1,"h-1.5","bg-bg-secondary","rounded-full","cursor-pointer","group",3,"click"],[1,"h-full","bg-accent-qobuz","rounded-full","relative","transition-all"],[1,"absolute","right-0","top-1/2","-translate-y-1/2","w-4","h-4","bg-white","rounded-full","shadow-lg","opacity-0","group-hover:opacity-100","transition-opacity"],[1,"flex","justify-between","mt-2","text-xs","text-text-muted"],[1,"flex","items-center","justify-center","gap-6","mb-6"],[1,"w-10","h-10","text-text-muted","hover:text-text-primary","transition-colors"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"w-5","h-5","mx-auto"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"],[1,"w-12","h-12","text-text-primary","hover:text-accent-qobuz","transition-colors",3,"click"],["xmlns","http://www.w3.org/2000/svg","fill","currentColor","viewBox","0 0 24 24",1,"w-8","h-8","mx-auto"],["d","M6 6h2v12H6V6zm3.5 6l8.5 6V6l-8.5 6z"],[1,"w-16","h-16","rounded-full","bg-accent-qobuz","text-white","flex","items-center","justify-center","hover:opacity-90","transition-opacity","shadow-lg",3,"click"],["xmlns","http://www.w3.org/2000/svg","fill","currentColor","viewBox","0 0 24 24",1,"w-8","h-8"],["xmlns","http://www.w3.org/2000/svg","fill","currentColor","viewBox","0 0 24 24",1,"w-8","h-8","ml-1"],["d","M6 18l8.5-6L6 6v12zM16 6v12h2V6h-2z"],[1,"flex","items-center","gap-4","text-sm"],[1,"flex","items-center","gap-2","px-3","py-1.5","bg-accent-qobuz/10","text-accent-qobuz","rounded-lg","hover:bg-accent-qobuz/20","transition-colors",3,"click"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"w-4","h-4"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 19V6l12-3v13M9 19c0 1.105-1.343 2-3 2s-3-.895-3-2 1.343-2 3-2 3 .895 3 2zm12-3c0 1.105-1.343 2-3 2s-3-.895-3-2 1.343-2 3-2 3 .895 3 2zM9 10l12-3"],[1,"flex","items-center","gap-2","text-text-muted","hover:text-text-primary","transition-colors",3,"click"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"w-24","h-24"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","1","d","M9 19V6l12-3v13M9 19c0 1.105-1.343 2-3 2s-3-.895-3-2 1.343-2 3-2 3 .895 3 2zm12-3c0 1.105-1.343 2-3 2s-3-.895-3-2 1.343-2 3-2 3 .895 3 2zM9 10l12-3"],[1,"text-text-secondary","hover:text-accent-qobuz","transition-colors",3,"click","routerLink"],["d","M6 4h4v16H6V4zm8 0h4v16h-4V4z"],["d","M8 5v14l11-7z"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9.75 17L9 20l-1 1h8l-1-1-.75-3M3 13h18M5 17h14a2 2 0 002-2V5a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M19.428 15.428a2 2 0 00-1.022-.547l-2.387-.477a6 6 0 00-3.86.517l-.318.158a6 6 0 01-3.86.517L6.05 15.21a2 2 0 00-1.806.547M8 4h8l-1 1v5.172a2 2 0 00.586 1.414l5 5c1.26 1.26.367 3.414-1.415 3.414H4.828c-1.782 0-2.674-2.154-1.414-3.414l5-5A2 2 0 009 10.172V5L8 4z"],[1,"text-center","py-12","text-text-muted"],[1,"space-y-1"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"w-12","h-12","mx-auto","mb-4","opacity-50"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","1.5","d","M9 19V6l12-3v13M9 19c0 1.105-1.343 2-3 2s-3-.895-3-2 1.343-2 3-2 3 .895 3 2zm12-3c0 1.105-1.343 2-3 2s-3-.895-3-2 1.343-2 3-2 3 .895 3 2zM9 10l12-3"],[1,"flex","items-center","gap-3","p-3","rounded-lg","transition-colors",3,"bg-accent-qobuz/10","hover:bg-bg-card"],[1,"flex","items-center","gap-3","p-3","rounded-lg","transition-colors"],[1,"w-6","text-center","text-sm","text-text-muted"],[1,"w-10","h-10","rounded","bg-bg-secondary","overflow-hidden","flex-shrink-0"],[1,"flex-1","min-w-0"],[1,"text-sm","font-medium","truncate"],[1,"text-xs","text-text-muted","truncate"],[1,"text-sm","text-text-muted"]],template:function(e,n){e&1&&(_(0,_t,1,4,"div",3),_(1,Ht,15,14,"div",4),b(2,"app-quality-selector",null,0)(4,"app-player-selector",null,1)),e&2&&(f(n.playerState.isNowPlayingVisible()?0:-1),l(),f(n.playerState.isNowPlayingVisible()?1:-1))},dependencies:[V,Z,U,A],styles:[".safe-area-bottom[_ngcontent-%COMP%]{padding-bottom:env(safe-area-inset-bottom,0)}"]})};var Nt=i=>({exact:i}),qt=(i,t)=>t.route;function Dt(i,t){if(i&1){let e=C();r(0,"div",5),x("click",function(){p(e);let o=s();return u(o.close())}),a()}if(i&2){let e=s();h("opacity-100",!e.isClosing())("opacity-0",e.isClosing())}}function jt(i,t){if(i&1){let e=C();r(0,"a",21),x("click",function(){p(e);let o=s(3);return u(o.close())}),b(1,"span",22),r(2,"span"),c(3),a()()}if(i&2){let e=s().$implicit;D("routerLink",e.route)("routerLinkActiveOptions",J(4,Nt,e.route==="/")),l(),D("innerHTML",e.icon,W),l(2),y(e.label)}}function It(i,t){if(i&1&&_(0,jt,4,6,"a",20),i&2){let e=t.$implicit,n=s(2);f(!e.requiresAuth||n.auth.isLoggedIn()?0:-1)}}function Bt(i,t){if(i&1&&(r(0,"p",23),c(1),a(),r(2,"p",24),c(3),a()),i&2){let e,n,o=s(2);l(),y(((e=o.profileService.activeProfile())==null?null:e.name)??((e=o.auth.user())==null?null:e.display_name)??"Profil"),l(2),y((n=o.auth.user())==null?null:n.email)}}function Ft(i,t){if(i&1&&(r(0,"p",23),c(1),a(),r(2,"p",25),c(3,"Nicht eingeloggt"),a()),i&2){let e,n=s(2);l(),y(((e=n.profileService.activeProfile())==null?null:e.name)??"Kein Profil")}}function Ot(i,t){if(i&1){let e=C();r(0,"button",26),x("click",function(){p(e);let o=s(2);return u(o.logout())}),g(),r(1,"svg",27),b(2,"path",28),a(),c(3," Von Qobuz abmelden "),a()}}function Gt(i,t){if(i&1){let e=C();r(0,"a",29),x("click",function(){p(e);let o=s(2);return u(o.close())}),c(1," Bei Qobuz anmelden "),a()}}function Qt(i,t){if(i&1){let e=C();r(0,"nav",6)(1,"div",7)(2,"h1",8),c(3,"Bluesound"),a(),r(4,"p",9),c(5,"Web Controller"),a()(),r(6,"div",10),H(7,It,1,1,null,null,qt),a(),r(9,"div",11)(10,"button",12),x("click",function(){p(e);let o=s();return u(o.openProfileSwitcher())}),r(11,"div",13),c(12),a(),r(13,"div",14),_(14,Bt,4,2)(15,Ft,4,1),r(16,"p",15),c(17,"Profil wechseln"),a()(),g(),r(18,"svg",16),b(19,"path",17),a()(),_(20,Ot,4,0,"button",18)(21,Gt,2,0,"a",19),a()()}if(i&2){let e=s();h("translate-x-0",!e.isClosing())("-translate-x-full",e.isClosing()),l(7),N(e.menuItems),l(4),z("background-color",e.activeProfileColor()),l(),P(" ",e.activeProfileInitial()," "),l(2),f(e.auth.isLoggedIn()?14:15),l(6),f(e.auth.isLoggedIn()?20:21)}}function At(i,t){if(i&1){let e=C();r(0,"app-profile-switcher",30),x("closed",function(){p(e);let o=s();return u(o.closeProfileSwitcher())})("profileSelected",function(o){p(e);let v=s();return u(v.onProfileSelected(o))}),a()}}var oe=class i{auth=w(_e);profileService=w(ee);router=w(Y);isOpen=M(!1);isClosing=M(!1);showProfileSwitcher=M(!1);menuItems=[{label:"Home",route:"/",icon:'<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6" /></svg>'},{label:"Qobuz",route:"/qobuz/browse",icon:'<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19V6l12-3v13M9 19c0 1.105-1.343 2-3 2s-3-.895-3-2 1.343-2 3-2 3 .895 3 2zm12-3c0 1.105-1.343 2-3 2s-3-.895-3-2 1.343-2 3-2 3 .895 3 2zM9 10l12-3" /></svg>',requiresAuth:!0},{label:"TuneIn",route:"/tunein",icon:'<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5.636 18.364a9 9 0 010-12.728m12.728 0a9 9 0 010 12.728m-9.9-2.829a5 5 0 010-7.07m7.072 0a5 5 0 010 7.07M13 12a1 1 0 11-2 0 1 1 0 012 0z" /></svg>'},{label:"Radio Paradise",route:"/radioparadise",icon:'<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19.428 15.428a2 2 0 00-1.022-.547l-2.387-.477a6 6 0 00-3.86.517l-.318.158a6 6 0 01-3.86.517L6.05 15.21a2 2 0 00-1.806.547M8 4h8l-1 1v5.172a2 2 0 00.586 1.414l5 5c1.26 1.26.367 3.414-1.415 3.414H4.828c-1.782 0-2.674-2.154-1.414-3.414l5-5A2 2 0 009 10.172V5L8 4z" /></svg>'},{label:"Ger\xE4te",route:"/players",icon:'<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.75 17L9 20l-1 1h8l-1-1-.75-3M3 13h18M5 17h14a2 2 0 002-2V5a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z" /></svg>'},{label:"Einstellungen",route:"/settings",icon:'<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"><circle cx="12" cy="12" r="3" stroke-width="2"/><path stroke-width="2" d="M19.4 15a1.65 1.65 0 00.33 1.82l.06.06a2 2 0 010 2.83 2 2 0 01-2.83 0l-.06-.06a1.65 1.65 0 00-1.82-.33 1.65 1.65 0 00-1 1.51V21a2 2 0 01-2 2 2 2 0 01-2-2v-.09A1.65 1.65 0 009 19.4a1.65 1.65 0 00-1.82.33l-.06.06a2 2 0 01-2.83 0 2 2 0 010-2.83l.06-.06a1.65 1.65 0 00.33-1.82 1.65 1.65 0 00-1.51-1H3a2 2 0 01-2-2 2 2 0 012-2h.09A1.65 1.65 0 004.6 9a1.65 1.65 0 00-.33-1.82l-.06-.06a2 2 0 010-2.83 2 2 0 012.83 0l.06.06a1.65 1.65 0 001.82.33H9a1.65 1.65 0 001-1.51V3a2 2 0 012-2 2 2 0 012 2v.09a1.65 1.65 0 001 1.51 1.65 1.65 0 001.82-.33l.06-.06a2 2 0 012.83 0 2 2 0 010 2.83l-.06.06a1.65 1.65 0 00-.33 1.82V9a1.65 1.65 0 001.51 1H21a2 2 0 012 2 2 2 0 01-2 2h-.09a1.65 1.65 0 00-1.51 1z"/></svg>'}];ngOnInit(){this.profileService.loadProfiles().subscribe()}activeProfileColor(){let t=this.profileService.activeProfile();return t?this.profileService.getProfileColor(t.id):"hsl(200, 65%, 45%)"}activeProfileInitial(){let t=this.profileService.activeProfile();if(t)return this.profileService.getProfileInitial(t.name);let e=this.auth.user();return e?.display_name?e.display_name.charAt(0).toUpperCase():"Q"}toggle(){this.isOpen()?this.close():this.isOpen.set(!0)}close(){this.isClosing.set(!0),setTimeout(()=>{this.isOpen.set(!1),this.isClosing.set(!1)},300)}openProfileSwitcher(){this.showProfileSwitcher.set(!0)}closeProfileSwitcher(){this.showProfileSwitcher.set(!1)}onProfileSelected(t){t.qobuz?.authToken?this.auth.loadFromProfileCredentials(t.qobuz):(this.auth.logout(),this.close(),this.router.navigate(["/qobuz/login"]))}logout(){this.auth.logout(),this.close(),this.router.navigate(["/"])}onEscapeKey(){this.showProfileSwitcher()||this.isOpen()&&this.close()}static \u0275fac=function(e){return new(e||i)};static \u0275cmp=T({type:i,selectors:[["app-hamburger-menu"]],hostBindings:function(e,n){e&1&&x("keydown.escape",function(){return n.onEscapeKey()},L)},decls:8,vars:15,consts:[[1,"hamburger-btn","fixed","top-4","left-4","z-[110]","w-10","h-10","rounded-lg","bg-bg-card","border","border-border-subtle","flex","items-center","justify-center","hover:bg-bg-card-hover","transition-colors",3,"click"],[1,"hamburger-lines","w-5","h-4","relative","flex","flex-col","justify-between"],[1,"block","h-0.5","w-full","bg-text-primary","rounded","transition-all","duration-300"],[1,"fixed","inset-0","bg-black/50","z-[55]","transition-opacity","duration-300",3,"opacity-100","opacity-0"],[1,"fixed","top-0","left-0","bottom-0","w-72","max-w-[80vw]","bg-bg-primary","z-[56]","shadow-2xl","transition-transform","duration-300","ease-out","flex","flex-col","safe-area-left",3,"translate-x-0","-translate-x-full"],[1,"fixed","inset-0","bg-black/50","z-[55]","transition-opacity","duration-300",3,"click"],[1,"fixed","top-0","left-0","bottom-0","w-72","max-w-[80vw]","bg-bg-primary","z-[56]","shadow-2xl","transition-transform","duration-300","ease-out","flex","flex-col","safe-area-left"],[1,"p-6","pt-20","border-b","border-border-subtle"],[1,"text-xl","font-bold","text-text-primary"],[1,"text-sm","text-text-muted","mt-1"],[1,"flex-1","overflow-y-auto","py-4"],[1,"border-t","border-border-subtle","p-4"],[1,"w-full","flex","items-center","gap-3","p-2","-m-2","rounded-xl","hover:bg-bg-card","transition-colors","text-left",3,"click"],[1,"w-12","h-12","rounded-full","flex","items-center","justify-center","text-white","font-semibold","text-lg","flex-shrink-0"],[1,"flex-1","min-w-0"],[1,"text-xs","text-accent-qobuz","mt-0.5"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"w-5","h-5","text-text-muted","flex-shrink-0"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 5l7 7-7 7"],[1,"w-full","mt-3","px-4","py-2","text-sm","text-text-muted","hover:text-error","hover:bg-error/10","rounded-lg","transition-colors","flex","items-center","justify-center","gap-2"],["routerLink","/qobuz/login",1,"block","w-full","mt-3","px-4","py-3","bg-accent-qobuz","text-white","text-center","rounded-lg","font-medium","hover:opacity-90","transition-opacity"],["routerLinkActive","bg-accent-qobuz/10 text-accent-qobuz border-r-2 border-accent-qobuz",1,"flex","items-center","gap-4","px-6","py-3","text-text-secondary","hover:bg-bg-card","transition-colors",3,"routerLink","routerLinkActiveOptions"],["routerLinkActive","bg-accent-qobuz/10 text-accent-qobuz border-r-2 border-accent-qobuz",1,"flex","items-center","gap-4","px-6","py-3","text-text-secondary","hover:bg-bg-card","transition-colors",3,"click","routerLink","routerLinkActiveOptions"],[1,"w-6","h-6",3,"innerHTML"],[1,"font-medium","truncate"],[1,"text-xs","text-text-muted","truncate"],[1,"text-xs","text-text-muted"],[1,"w-full","mt-3","px-4","py-2","text-sm","text-text-muted","hover:text-error","hover:bg-error/10","rounded-lg","transition-colors","flex","items-center","justify-center","gap-2",3,"click"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"w-4","h-4"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"],["routerLink","/qobuz/login",1,"block","w-full","mt-3","px-4","py-3","bg-accent-qobuz","text-white","text-center","rounded-lg","font-medium","hover:opacity-90","transition-opacity",3,"click"],[3,"closed","profileSelected"]],template:function(e,n){e&1&&(r(0,"button",0),x("click",function(){return n.toggle()}),r(1,"div",1),b(2,"span",2)(3,"span",2)(4,"span",2),a()(),_(5,Dt,1,4,"div",3),_(6,Qt,22,9,"nav",4),_(7,At,1,0,"app-profile-switcher")),e&2&&(h("is-open",n.isOpen()),l(2),h("rotate-45",n.isOpen())("translate-y-[7px]",n.isOpen()),l(),h("opacity-0",n.isOpen()),l(),h("-rotate-45",n.isOpen())("-translate-y-[7px]",n.isOpen()),l(),f(n.isOpen()?5:-1),l(),f(n.isOpen()?6:-1),l(),f(n.showProfileSwitcher()?7:-1))},dependencies:[V,Z,ue,K],styles:[".safe-area-left[_ngcontent-%COMP%]{padding-left:env(safe-area-inset-left,0)}"]})};var $t=(i,t)=>t.id;function Yt(i,t){if(i&1){let e=C();d(0,"div",8),E("click",function(){p(e);let o=s();return u(o.close())}),m()}}function Rt(i,t){if(i&1){let e=C();d(0,"button",9),E("click",function(){let o=p(e).$implicit,v=s();return u(v.executeAction(o))}),k(1,"span",10),d(2,"span",11),c(3),m()()}if(i&2){let e=t.$implicit,n=t.$index,o=s();z("transition-delay",o.getTransitionDelay(n))("--icon-color",e.color),h("fab-mini-visible",o.isOpen()),l(),X("innerHTML",e.iconHtml,W),l(2),y(e.label)}}var re=class i{router=w(Y);sanitizer=w(pe);isOpen=M(!1);colors={tunein:"#f97316",radioparadise:"#f97316",qobuz:"#1db954",player:"#a1a1aa"};icons={tunein:this.sanitizer.bypassSecurityTrustHtml(`
      <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
        <path d="M4.9 19.1C1 15.2 1 8.8 4.9 4.9"/>
        <path d="M7.8 16.2c-2.3-2.3-2.3-6.1 0-8.5"/>
        <circle cx="12" cy="12" r="2"/>
        <path d="M16.2 7.8c2.3 2.3 2.3 6.1 0 8.5"/>
        <path d="M19.1 4.9C23 8.8 23 15.1 19.1 19"/>
      </svg>
    `),radioparadise:this.sanitizer.bypassSecurityTrustHtml(`
      <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
        <circle cx="12" cy="12" r="2"/>
        <path d="M16.24 7.76a6 6 0 0 1 0 8.49"/>
        <path d="M7.76 16.24a6 6 0 0 1 0-8.49"/>
        <path d="M19.07 4.93a10 10 0 0 1 0 14.14"/>
        <path d="M4.93 19.07a10 10 0 0 1 0-14.14"/>
      </svg>
    `),qobuz:this.sanitizer.bypassSecurityTrustHtml(`
      <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
        <path d="M9 18V5l12-2v13"/>
        <circle cx="6" cy="18" r="3"/>
        <circle cx="18" cy="16" r="3"/>
      </svg>
    `),player:this.sanitizer.bypassSecurityTrustHtml(`
      <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
        <rect x="4" y="4" width="16" height="16" rx="2"/>
        <circle cx="12" cy="12" r="3"/>
      </svg>
    `)};actions=[{id:"tunein",label:"TuneIn",iconHtml:this.icons.tunein,route:"/tunein",color:this.colors.tunein},{id:"radio-paradise",label:"Radio Paradise",iconHtml:this.icons.radioparadise,route:"/radioparadise",color:this.colors.radioparadise},{id:"qobuz",label:"Qobuz",iconHtml:this.icons.qobuz,route:"/qobuz/browse",color:this.colors.qobuz},{id:"player",label:"Player",iconHtml:this.icons.player,route:"/players",color:this.colors.player}];getTransitionDelay(t){return this.isOpen()?`${(this.actions.length-1-t)*50}ms`:`${t*30}ms`}toggle(){this.isOpen.update(t=>!t)}close(){this.isOpen.set(!1)}executeAction(t){this.close(),setTimeout(()=>{t.route?this.router.navigate([t.route]):t.action&&t.action()},100)}onEscapeKey(){this.isOpen()&&this.close()}static \u0275fac=function(e){return new(e||i)};static \u0275cmp=T({type:i,selectors:[["app-fab-menu"]],hostBindings:function(e,n){e&1&&x("keydown.escape",function(){return n.onEscapeKey()},L)},decls:9,vars:8,consts:[[1,"fab-overlay","fixed","inset-0","bg-black/40","z-[449]"],[1,"fab-container","fixed","z-[450]","right-4","md:right-6","bottom-[100px]","md:bottom-[116px]"],[1,"fab-actions","absolute","bottom-[68px]","right-0","flex","flex-col","items-end","gap-3"],[1,"fab-mini","flex","items-center","gap-3","h-12","px-4","pl-3","rounded-[14px]","bg-bg-secondary","border","border-border-subtle","text-text-primary","text-sm","font-medium","whitespace-nowrap","cursor-pointer","shadow-lg","transition-all",3,"fab-mini-visible","transition-delay","--icon-color"],["aria-haspopup","true","aria-label","Men\xFC \xF6ffnen",1,"fab-main","w-14","h-14","rounded-2xl","bg-accent-qobuz","border-none","cursor-pointer","flex","items-center","justify-center","shadow-xl","transition-all","duration-200","hover:shadow-2xl","active:scale-95","relative","z-[2]",3,"click"],["viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"fab-plus-icon","w-6","h-6","text-white","transition-transform","duration-300"],["x1","12","y1","5","x2","12","y2","19"],["x1","5","y1","12","x2","19","y2","12"],[1,"fab-overlay","fixed","inset-0","bg-black/40","z-[449]",3,"click"],[1,"fab-mini","flex","items-center","gap-3","h-12","px-4","pl-3","rounded-[14px]","bg-bg-secondary","border","border-border-subtle","text-text-primary","text-sm","font-medium","whitespace-nowrap","cursor-pointer","shadow-lg","transition-all",3,"click"],[1,"fab-icon","w-6","h-6","flex-shrink-0",3,"innerHTML"],[1,"fab-label"]],template:function(e,n){e&1&&(_(0,Yt,1,0,"div",0),d(1,"div",1)(2,"div",2),H(3,Rt,4,8,"button",3,$t),m(),d(5,"button",4),E("click",function(){return n.toggle()}),g(),d(6,"svg",5),k(7,"line",6)(8,"line",7),m()()()),e&2&&(f(n.isOpen()?0:-1),l(2),h("pointer-events-none",!n.isOpen())("pointer-events-auto",n.isOpen()),l(),N(n.actions),l(2),ae("aria-expanded",n.isOpen()),l(),h("rotate-45",n.isOpen()))},dependencies:[V],styles:[".fab-mini[_ngcontent-%COMP%]{opacity:0;transform:scale(.3) translateY(20px);transition:opacity .25s cubic-bezier(.32,.72,0,1),transform .25s cubic-bezier(.32,.72,0,1),background .15s ease,border-color .15s ease}.fab-mini-visible[_ngcontent-%COMP%]{opacity:1;transform:scale(1) translateY(0)}.fab-mini[_ngcontent-%COMP%]:hover{background:var(--color-bg-primary);border-color:var(--icon-color)}.fab-mini[_ngcontent-%COMP%]:active{transform:scale(.97) translateY(0)!important}.fab-icon[_ngcontent-%COMP%]{color:var(--icon-color);display:flex;align-items:center;justify-content:center}.fab-icon[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:deep(svg){width:100%;height:100%}"]})};var Kt=["sliderTrack"];function Ut(i,t){i&1&&(d(0,"div",8),g(),d(1,"svg",11),k(2,"path",12),m(),S(),d(3,"p",13),c(4,"Fixed Volume"),m(),d(5,"p",14),c(6,"Die Lautst\xE4rke wird extern gesteuert"),m()())}function Wt(i,t){i&1&&(g(),d(0,"svg",6),k(1,"path",26)(2,"path",27),m())}function Xt(i,t){i&1&&(g(),d(0,"svg",6),k(1,"path",28),m())}function Jt(i,t){if(i&1){let e=C();d(0,"button",29),E("click",function(){let o=p(e).$implicit,v=s(3);return u(v.setVolume(o))}),c(1),m()}if(i&2){let e=t.$implicit,n=s(3);h("bg-accent-qobuz",n.playerState.volume()===e)("text-white",n.playerState.volume()===e)("bg-bg-card",n.playerState.volume()!==e)("text-text-secondary",n.playerState.volume()!==e)("hover:bg-bg-card-hover",n.playerState.volume()!==e),l(),P(" ",e,"% ")}}function Zt(i,t){if(i&1){let e=C();d(0,"div",15)(1,"div",16)(2,"button",17),E("click",function(){p(e);let o=s(2);return u(o.toggleMute())}),_(3,Wt,3,0,":svg:svg",6)(4,Xt,2,0,":svg:svg",6),m(),d(5,"span",18),c(6),m(),d(7,"span",19),c(8,"%"),m()(),d(9,"div",20,0),E("mousedown",function(o){p(e);let v=s(2);return u(v.onSliderStart(o))})("touchstart",function(o){p(e);let v=s(2);return u(v.onTouchStart(o))}),k(11,"div",21)(12,"div",22)(13,"div",23),m()(),d(14,"div",24),H(15,Jt,2,11,"button",25,se),m()}if(i&2){let e=s(2);l(3),f(e.playerState.isMuted()||e.playerState.volume()===0?3:4),l(3),P(" ",e.playerState.isMuted()?0:e.playerState.volume()," "),l(6),z("width",e.playerState.isMuted()?0:e.playerState.volume(),"%"),l(),z("left",e.playerState.isMuted()?0:e.playerState.volume(),"%"),l(2),N(e.presets)}}function ei(i,t){i&1&&(d(0,"span",10),g(),d(1,"svg",30),k(2,"path",31),m(),c(3," Browser-Wiedergabe "),m())}function ti(i,t){if(i&1&&(d(0,"span",10),g(),d(1,"svg",32),k(2,"path",33),m(),c(3),m()),i&2){let e,n=s(2);l(3),P(" ",(e=n.playerState.selectedPlayer())==null?null:e.name," ")}}function ii(i,t){if(i&1){let e=C();d(0,"div",1),E("click",function(){p(e);let o=s();return u(o.close())}),m(),d(1,"div",2),E("click",function(o){return p(e),u(o.stopPropagation())}),d(2,"div",3)(3,"h3",4),c(4,"Lautst\xE4rke"),m(),d(5,"button",5),E("click",function(){p(e);let o=s();return u(o.close())}),g(),d(6,"svg",6),k(7,"path",7),m()()(),_(8,Ut,7,0,"div",8)(9,Zt,17,6),S(),d(10,"div",9),_(11,ei,4,0,"span",10)(12,ti,4,1,"span",10),m()()}if(i&2){let e=s();l(8),f(e.playerState.isFixedVolume()?8:9),l(3),f(e.playerState.playerMode()==="browser"?11:e.playerState.selectedPlayer()?12:-1)}}var le=class i{sliderTrack;playerState=w(j);playback=w(I);presets=[25,50,75,100];isDragging=!1;close(){this.playerState.isVolumePanelVisible.set(!1)}toggleMute(){this.playback.toggleMute()}setVolume(t){this.playback.setVolume(t)}onSliderStart(t){this.isDragging=!0,this.updateVolumeFromEvent(t);let e=o=>{this.isDragging&&this.updateVolumeFromEvent(o)},n=()=>{this.isDragging=!1,document.removeEventListener("mousemove",e),document.removeEventListener("mouseup",n)};document.addEventListener("mousemove",e),document.addEventListener("mouseup",n)}onTouchStart(t){this.isDragging=!0,this.updateVolumeFromTouch(t);let e=o=>{this.isDragging&&(o.preventDefault(),this.updateVolumeFromTouch(o))},n=()=>{this.isDragging=!1,document.removeEventListener("touchmove",e),document.removeEventListener("touchend",n)};document.addEventListener("touchmove",e,{passive:!1}),document.addEventListener("touchend",n)}updateVolumeFromEvent(t){if(!this.sliderTrack)return;let n=this.sliderTrack.nativeElement.getBoundingClientRect(),o=Math.max(0,Math.min(100,(t.clientX-n.left)/n.width*100)),v=Math.round(o);this.playback.setVolume(v)}updateVolumeFromTouch(t){if(!this.sliderTrack||!t.touches[0])return;let n=this.sliderTrack.nativeElement.getBoundingClientRect(),o=Math.max(0,Math.min(100,(t.touches[0].clientX-n.left)/n.width*100)),v=Math.round(o);this.playback.setVolume(v)}onEscapeKey(){this.playerState.isVolumePanelVisible()&&this.close()}static \u0275fac=function(e){return new(e||i)};static \u0275cmp=T({type:i,selectors:[["app-volume-panel"]],viewQuery:function(e,n){if(e&1&&$(Kt,5),e&2){let o;B(o=F())&&(n.sliderTrack=o.first)}},hostBindings:function(e,n){e&1&&x("keydown.escape",function(){return n.onEscapeKey()},L)},decls:1,vars:1,consts:[["sliderTrack",""],[1,"fixed","inset-0","bg-black/40","z-[80]",3,"click"],[1,"fixed","bottom-0","left-0","right-0","bg-bg-primary","rounded-t-2xl","z-[81]","p-6","safe-area-bottom","animate-slide-up",3,"click"],[1,"flex","items-center","justify-between","mb-6"],[1,"text-lg","font-semibold"],[1,"w-8","h-8","rounded-full","hover:bg-bg-card","flex","items-center","justify-center","text-text-muted","hover:text-text-primary","transition-colors",3,"click"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"w-5","h-5"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M6 18L18 6M6 6l12 12"],[1,"text-center","py-8","text-text-muted"],[1,"mt-6","pt-4","border-t","border-border-subtle","text-center","text-sm","text-text-muted"],[1,"flex","items-center","justify-center","gap-2"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"w-12","h-12","mx-auto","mb-3","opacity-50"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","1.5","d","M15.536 8.464a5 5 0 010 7.072m2.828-9.9a9 9 0 010 12.728M5.586 15H4a1 1 0 01-1-1v-4a1 1 0 011-1h1.586l4.707-4.707C10.923 3.663 12 4.109 12 5v14c0 .891-1.077 1.337-1.707.707L5.586 15z"],[1,"font-medium"],[1,"text-sm","mt-1"],[1,"mb-6"],[1,"flex","items-center","justify-center","gap-4","mb-4"],[1,"w-10","h-10","rounded-full","bg-bg-card","flex","items-center","justify-center","text-text-secondary","hover:text-text-primary","transition-colors",3,"click"],[1,"text-4xl","font-bold","tabular-nums","min-w-[80px]","text-center"],[1,"text-text-muted"],[1,"relative","h-12","flex","items-center","cursor-pointer","touch-none",3,"mousedown","touchstart"],[1,"absolute","inset-x-0","h-2","bg-bg-secondary","rounded-full"],[1,"absolute","left-0","h-2","bg-accent-qobuz","rounded-full","transition-all"],[1,"absolute","w-6","h-6","bg-white","rounded-full","shadow-lg","border-2","border-accent-qobuz","transition-all","-translate-x-1/2"],[1,"grid","grid-cols-4","gap-3"],[1,"py-3","rounded-lg","text-sm","font-medium","transition-colors",3,"bg-accent-qobuz","text-white","bg-bg-card","text-text-secondary","hover:bg-bg-card-hover"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M5.586 15H4a1 1 0 01-1-1v-4a1 1 0 011-1h1.586l4.707-4.707C10.923 3.663 12 4.109 12 5v14c0 .891-1.077 1.337-1.707.707L5.586 15z"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M17 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M15.536 8.464a5 5 0 010 7.072m2.828-9.9a9 9 0 010 12.728M5.586 15H4a1 1 0 01-1-1v-4a1 1 0 011-1h1.586l4.707-4.707C10.923 3.663 12 4.109 12 5v14c0 .891-1.077 1.337-1.707.707L5.586 15z"],[1,"py-3","rounded-lg","text-sm","font-medium","transition-colors",3,"click"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"w-4","h-4"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9.75 17L9 20l-1 1h8l-1-1-.75-3M3 13h18M5 17h14a2 2 0 002-2V5a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"w-4","h-4","text-accent-qobuz"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M19.428 15.428a2 2 0 00-1.022-.547l-2.387-.477a6 6 0 00-3.86.517l-.318.158a6 6 0 01-3.86.517L6.05 15.21a2 2 0 00-1.806.547M8 4h8l-1 1v5.172a2 2 0 00.586 1.414l5 5c1.26 1.26.367 3.414-1.415 3.414H4.828c-1.782 0-2.674-2.154-1.414-3.414l5-5A2 2 0 009 10.172V5L8 4z"]],template:function(e,n){e&1&&_(0,ii,13,2),e&2&&f(n.playerState.isVolumePanelVisible()?0:-1)},dependencies:[V],styles:[".safe-area-bottom[_ngcontent-%COMP%]{padding-bottom:env(safe-area-inset-bottom,0)}@keyframes _ngcontent-%COMP%_slide-up{0%{transform:translateY(100%)}to{transform:translateY(0)}}.animate-slide-up[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_slide-up .3s ease-out}"]})};export{ie as a,ne as b,K as c,oe as d,re as e,le as f};
