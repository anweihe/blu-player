import{a as k,b as N,d as R,e as H,f as L}from"./chunk-A6CKD6C3.js";import"./chunk-65UUZ2JX.js";import"./chunk-D3B5OSRM.js";import{a as M}from"./chunk-HRW6X6ES.js";import{a as p}from"./chunk-3PSR7F6U.js";import{h as T}from"./chunk-MJJT2YLI.js";import"./chunk-LW2KCD3F.js";import"./chunk-TB3BYDLV.js";import{a as C,c as I,g as O,h as x,i as D,k as r}from"./chunk-3IHUMDY3.js";import{G as y,H as b,I as g,Ja as S,M as v,R as i,Sb as A,Tb as w,Ya as c,Za as d,_a as n,f as h,ga as P,ha as u,v as f,w as m}from"./chunk-NJ7QWJ2J.js";var j=[{path:"",loadComponent:()=>import("./chunk-SH7KX4PL.js").then(e=>e.HomeComponent)},{path:"qobuz",loadChildren:()=>import("./chunk-VGTFWUN2.js").then(e=>e.QOBUZ_ROUTES)},{path:"tunein",loadComponent:()=>import("./chunk-2YPDUBKU.js").then(e=>e.TuneInComponent)},{path:"radioparadise",loadComponent:()=>import("./chunk-BXLLQHLV.js").then(e=>e.RadioParadiseComponent)},{path:"players",loadComponent:()=>import("./chunk-7R7JWMZE.js").then(e=>e.PlayersComponent)},{path:"settings",loadComponent:()=>import("./chunk-7PU3HMEF.js").then(e=>e.SettingsComponent)},{path:"**",redirectTo:""}];var E=(e,t)=>{if(!e.url.includes("/Qobuz")&&!e.url.includes("/api/qobuz"))return t(e);let s=i(r).getAuthHeaders();if(!s["X-Auth-Token"]||e.headers.has("X-Auth-Token"))return t(e);let G=e.clone({setHeaders:s});return t(G)};var F={providers:[P(),O(j,x(),D()),A(w([E]))]};var a=class e{bluesoundApi=i(M);playerState=i(p);destroy$=new h;pollingSubscription;POLLING_INTERVAL=1e3;isPolling=u(!1);lastPoll=u(null);startPolling(){this.stopPolling(),this.isPolling.set(!0),this.pollingSubscription=f(this.POLLING_INTERVAL).pipe(b(this.destroy$),m(()=>this.playerState.playerMode()==="bluesound"),m(()=>!!this.playerState.selectedPlayer()),y(()=>{let t=this.playerState.selectedPlayer();return t?this.bluesoundApi.getStatus(t.ipAddress):[]}),g(()=>this.lastPoll.set(new Date))).subscribe(t=>{t&&this.playerState.updatePlaybackStatus(t)})}stopPolling(){this.pollingSubscription&&(this.pollingSubscription.unsubscribe(),this.pollingSubscription=void 0),this.isPolling.set(!1)}pollOnce(){let t=this.playerState.selectedPlayer();t&&this.bluesoundApi.getStatus(t.ipAddress).subscribe(o=>{o&&this.playerState.updatePlaybackStatus(o),this.lastPoll.set(new Date)})}refreshPlayers(){this.bluesoundApi.refreshPlayers().subscribe(t=>{this.playerState.players.set(t)})}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete(),this.stopPolling()}static \u0275fac=function(o){return new(o||e)};static \u0275prov=v({token:e,factory:e.\u0275fac,providedIn:"root"})};var l=class e{auth=i(r);playerState=i(p);polling=i(a);ngOnInit(){this.auth.authToken()&&this.auth.verifyToken().subscribe()}static \u0275fac=function(o){return new(o||e)};static \u0275cmp=S({type:e,selectors:[["app-root"]],decls:9,vars:0,consts:[[1,"app-container","min-h-screen","bg-bg-primary"],[1,"flex-1","pb-24","overflow-y-auto"]],template:function(o,s){o&1&&(c(0,"div",0),n(1,"app-hamburger-menu"),c(2,"main",1),n(3,"router-outlet"),d(),n(4,"app-global-player")(5,"app-now-playing-popup")(6,"app-fab-menu")(7,"app-volume-panel")(8,"app-global-context-menu"),d())},dependencies:[I,k,N,R,H,L,T],styles:[".app-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:100vh;height:100dvh;overflow:hidden}main[_ngcontent-%COMP%]{flex:1;overflow-y:auto;-webkit-overflow-scrolling:touch}"]})};C(l,F).catch(e=>console.error(e));
